<div class="resources">

    <div class="form-group">
        <label for="cpu" class="col-sm-3 control-label">CPU:</label>
        <div class="col-sm-9">
            {%- for cpu, max_duration in cpus.items() -%}
            <div class="col-sm-2">
                <input type="radio" name="cpu" id="cpu_{{cpu}}" value="{{cpu}}"
                    data-max-duration="{{max_duration}}"
                    {%- if loop.first %} checked{% endif %}>
                <label for="cpu_{{cpu}}" class="btn btn-default btn-block">
                    {{ cpu }}
                </label>
            </div>
            {% endfor -%}
        </div>
    </div>

    <div class="form-group">
        <label for="mem" class="col-sm-3 control-label">Memory:</label>
        <div class="col-sm-9">
            {%- for mem, max_duration in mems.items() -%}
            <div class="col-sm-2">
                <input type="radio" name="mem" id="mem_{{mem}}" value="{{mem}}"
                    data-max-duration="{{max_duration}}"
                    {%- if loop.first %} checked{% endif %}>
                <label for="mem_{{mem}}" class="btn btn-default btn-block">
                    {{ mem }} GB
                </label>
            </div>
            {% endfor -%}
        </div>
    </div>

    <div class="form-group">
        <label for="gpu" class="col-sm-3 control-label">GPU:</label>
        <div class="col-sm-9">
            {%- for gpu, max_duration in gpus.items() -%}
            <div class="col-sm-2">
                <input type="radio" name="gpu" id="gpu_{{gpu}}" value="{{gpu}}"
                    data-max-duration="{{max_duration}}"
                    {%- if loop.first %} checked{% endif %}>
                <label for="gpu_{{gpu}}" class="btn btn-default btn-block">
                    {{ gpu | replace("_"," ") | replace("."," ") | replace("gb","GB") }}
                </label>
            </div>
            {% endfor -%}
        </div>
    </div>

</div>

<div class="form-group">
    <label class="col-sm-3 control-label">Session duration:</label>
    <div class="col-sm-9">
        <div class="form-control-static"><span id="time-max-duration">24</span> h</div>
    </div>
</div>

<script>
    // Adjust time duration
    var $reservations_dropdown = $("#time-max-duration");

    $('.resources input[type=radio]').change(function () {
        var cpu = $('input[name=cpu]:checked').data('max-duration');
        var mem = $('input[name=mem]:checked').data('max-duration');
        var gpu = $('input[name=gpu]:checked').data('max-duration');

        $reservations_dropdown.text(Math.min(cpu, mem, gpu));
    })
</script>
