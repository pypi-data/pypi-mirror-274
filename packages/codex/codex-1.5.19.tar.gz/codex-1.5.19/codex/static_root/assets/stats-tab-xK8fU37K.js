import{_ as b}from"./confirm-dialog-BoVvCI5y.js";import{_ as g,N as m,k,t as y,c2 as I,c3 as A,O as B,b7 as P,aB as a,aG as t,L as i,T as u,aE as r,R as d,ai as l,M as w,aC as K,ae as _,ah as S,c4 as v,bh as R,bk as V,aK as D,aL as E}from"./admin-drawer-panel-DffXGW1d.js";import{c as L}from"./index-DUjeNg4x.js";import{c as N}from"./to-case-kUm8NPpW.js";import{V as c}from"./VTable-TEvK4Tmn.js";import"./confirm-footer-CIu2tkFD.js";import"./main-DB0zDxIA.js";const O="Copy API Key to clipboard",p="&nbsp;&nbsp;&nbsp;&nbsp;",M={name:"AdminTasksTab",components:{ConfirmDialog:b},data(){return{showTooltip:{show:!1},apiSchemaURL:window.CODEX.API_V3_PATH}},computed:{...m(k,{}),...m(y,{stats:s=>s.stats}),clipBoardEnabled(){return location.prototcal=="https:"},apiTooltip(){return O?this.clipBoardEnabled:void 0},clipBoardIcon(){return this.showTooltip?I:A}},created(){this.loadStats()},methods:{...B(y,["loadStats","updateAPIKey"]),regenAPIKey(){this.updateAPIKey().then(this.loadStats).catch(console.warn)},nf(s){return P.format(s)},onClickAPIKey(){this.clipBoardEnabled&&L(this.stats.config.apiKey,this.showTooltip)},metadataTitle(s){let o=s.replace(/Count$/,"");return o=N(o),o=o.replace(/^Contributor\s/,p),o=o.replace(/^Identifier\s/,p),o=o.replace(/^Story\sArc\s/,p),o}}},e=s=>(D("data-v-dbe3be76"),s=s(),E(),s),U={key:0,id:"stats"},F={class:"statBlock"},z=e(()=>t("h3",null,"Platform",-1)),G=e(()=>t("td",null,"Docker",-1)),H=e(()=>t("td",null,"Machine",-1)),j=e(()=>t("td",null,"System",-1)),X=e(()=>t("td",null,"Python",-1)),Z=e(()=>t("td",null,"Codex",-1)),q={class:"statBlock"},J=e(()=>t("h3",null,"Config",-1)),Q=e(()=>t("td",null,"Libraries",-1)),W=e(()=>t("td",null,"Anonymous Users",-1)),Y=e(()=>t("td",null,"Registered Users",-1)),x=e(()=>t("td",null,"Groups",-1)),$={class:"statBlock"},tt=e(()=>t("h3",null,"Groups",-1)),st=e(()=>t("td",null,"Folders",-1)),et=e(()=>t("td",null,"Publishers",-1)),lt=e(()=>t("td",null,"Imprints",-1)),nt=e(()=>t("td",null,"Series",-1)),ot=e(()=>t("td",null,"Volumes",-1)),at=e(()=>t("td",null,"Issues",-1)),dt={key:0},it=e(()=>t("td",{class:"indent"},"CBZ",-1)),rt={key:1},ut=e(()=>t("td",{class:"indent"},"CBR",-1)),ct={key:2},ht=e(()=>t("td",{class:"indent"},"CBX",-1)),_t={key:3},pt=e(()=>t("td",{class:"indent"},"CBT",-1)),ft={key:4},mt=e(()=>t("td",{class:"indent"},"PDF",-1)),yt={key:5},bt=e(()=>t("td",{class:"indent"},"Unknown",-1)),Ct={class:"statBlock"},Tt=e(()=>t("h3",null,"Metadata",-1)),gt=["innerHTML"],kt={class:"statBlock"},It=e(()=>t("h3",null,"API",-1)),At=e(()=>t("td",null,"Schema Documentation:",-1)),Bt={id:"schemaDocValue"},Pt=["href"],wt=["title"],Kt={key:0},St={class:"copied"},vt={id:"apiKey"},Rt={colspan:"2"};function Vt(s,o,Dt,Et,f,n){const C=b;return s.stats?(d(),a("div",U,[t("div",F,[z,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[G,t("td",null,l(s.stats.platform.docker),1)]),t("tr",null,[H,t("td",null,l(s.stats.platform.machine),1)]),t("tr",null,[j,t("td",null,l(s.stats.platform.system)+" "+l(s.stats.platform.systemRelease),1)]),t("tr",null,[X,t("td",null,l(s.stats.platform.python),1)]),t("tr",null,[Z,t("td",null,l(s.stats.platform.codex),1)])])]),_:1})]),t("div",q,[J,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[Q,t("td",null,l(n.nf(s.stats.config.librariesCount)),1)]),t("tr",null,[W,t("td",null,l(n.nf(s.stats.config.sessionsAnonCount)),1)]),t("tr",null,[Y,t("td",null,l(n.nf(s.stats.config.usersCount)),1)]),t("tr",null,[x,t("td",null,l(n.nf(s.stats.config.groupsCount)),1)])])]),_:1})]),t("div",$,[tt,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[st,t("td",null,l(n.nf(s.stats.groups.foldersCount)),1)]),t("tr",null,[et,t("td",null,l(n.nf(s.stats.groups.publishersCount)),1)]),t("tr",null,[lt,t("td",null,l(n.nf(s.stats.groups.imprintsCount)),1)]),t("tr",null,[nt,t("td",null,l(n.nf(s.stats.groups.seriesCount)),1)]),t("tr",null,[ot,t("td",null,l(n.nf(s.stats.groups.volumesCount)),1)]),t("tr",null,[at,t("td",null,l(n.nf(s.stats.groups.issuesCount)),1)]),s.stats.fileTypes.cbzCount?(d(),a("tr",dt,[it,t("td",null,l(n.nf(s.stats.fileTypes.cbzCount)),1)])):r("",!0),s.stats.fileTypes.cbrCount?(d(),a("tr",rt,[ut,t("td",null,l(n.nf(s.stats.fileTypes.cbrCount)),1)])):r("",!0),s.stats.fileTypes.cbxCount?(d(),a("tr",ct,[ht,t("td",null,l(n.nf(s.stats.fileTypes.cbxCount)),1)])):r("",!0),s.stats.fileTypes.cbtCount?(d(),a("tr",_t,[pt,t("td",null,l(n.nf(s.stats.fileTypes.cbtCount)),1)])):r("",!0),s.stats.fileTypes.pdfCount?(d(),a("tr",ft,[mt,t("td",null,l(n.nf(s.stats.fileTypes.pdfCount)),1)])):r("",!0),s.stats.fileTypes.unknownCount?(d(),a("tr",yt,[bt,t("td",null,l(n.nf(s.stats.fileTypes.unknownCount)),1)])):r("",!0)])]),_:1})]),t("div",Ct,[Tt,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[(d(!0),a(w,null,K(Object.entries(s.stats.metadata),([h,T])=>(d(),a("tr",{key:h},[t("td",{innerHTML:n.metadataTitle(h)},null,8,gt),t("td",null,l(n.nf(T)),1)]))),128))])]),_:1})]),t("div",kt,[It,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[At,t("td",Bt,[_(" The only endpoint accessible with API Key access is "),t("a",{href:`${f.apiSchemaURL}#/api/api_v3_admin_stats_retrieve`,target:"_blank"},"/admin/stats",8,Pt)])]),t("tr",{id:"apiKeyRow",title:n.apiTooltip,onClick:o[0]||(o[0]=(...h)=>n.onClickAPIKey&&n.onClickAPIKey(...h))},[t("td",null,[_(" API Key "),n.clipBoardEnabled?(d(),a("span",Kt,[i(S,{class:"clipBoardIcon",size:"small"},{default:u(()=>[_(l(n.clipBoardIcon),1)]),_:1}),i(v,null,{default:u(()=>[R(t("span",St,"Copied",512),[[V,f.showTooltip.show]])]),_:1})])):r("",!0)]),t("td",vt,l(s.stats.config.apiKey),1)],8,wt),t("tr",null,[t("td",Rt,[i(C,{"button-text":"Regenerate API Key","title-text":"Regenerate","object-name":"API Key","confirm-text":"Regenerate",onConfirm:n.regenAPIKey},null,8,["onConfirm"])])])])]),_:1})])])):r("",!0)}const Gt=g(M,[["render",Vt],["__scopeId","data-v-dbe3be76"]]);export{Gt as default};
