import{s as Dt,E as Ot,F as Pt,G as Rt,H as zt,w as nt,e as mt,i as B,d as h,I as me,x as Nt,y as hl,p as ut,f as D,g as I,h as y,L as bt,_ as le,u as P,v as jt,T as Ee,C as pt,P as te,a as R,l as Q,R as wt,c as z,m as K,j as d,r as b,n as st,K as ie,t as vt,X as ml,z as J,A as x,Q as Ie,O as El,Y as Kt,o as Dl,S as _e,B as Il}from"./scheduler.7238b518.js";import{S as It,i as Mt,a as N,t as U,g as yt,c as Et,h as _l,j as gl,k as Me,f as Jt,b as $,d as tt,m as et,e as lt}from"./index.4c8b96e2.js";import{e as Ut}from"./each.7b9c02b5.js";import{a as gt}from"./Toaster.svelte_svelte_type_style_lang.93775e0f.js";import{p as Ml,k as Tl,m as pl,d as ye,h as Cl,j as Vl,a as Te,S as Ce,o as Ve,u as Sl,f as ge,W as Bl,g as Ll}from"./index.bf1cda65.js";import{q as vl,r as ke,t as Se,w as Be}from"./index.2773335b.js";import{A as Al,u as Hl,a as Nl,b as Ul}from"./AddFilesPlaceholder.04934d17.js";import{t as Le}from"./index.5c5f41f8.js";import"./Messages.c2dd6758.js";import"./index.295018b5.js";import{T as $t}from"./create.92fd517e.js";import{a as Ol,D as Pl,M as pe,T as Rl,S as zl}from"./ShareChatModal.c882a116.js";import{S as jl}from"./Selector.bc7d31fa.js";import{d as Fl}from"./index.6bf40fed.js";import{s as Wl,g as ql,u as Zl,c as Gl,M as Yl}from"./menu-trigger.45608dc4.js";import{g as ne}from"./spread.8a54911c.js";import{a as bl,d as Xl}from"./updater.f2a63360.js";import{f as Ql}from"./FileSaver.min.898eb36f.js";import{f as wl}from"./index.1df8947f.js";import{a as Kl}from"./index.662a80f2.js";import"./singletons.b400c586.js";const Jl=n=>({subIds:n&1}),Ae=n=>({subIds:n[0]});function xl(n){let t;const e=n[6].default,l=Ot(e,n,n[5],Ae);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,[r]){l&&l.p&&(!t||r&33)&&Pt(l,e,s,s[5],t?zt(e,s[5],r,Jl):Rt(s[5]),Ae)},i(s){t||(N(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function $l(n,t,e){let l,{$$slots:s={},$$scope:r}=t,{disabled:o=void 0}=t,{open:i=void 0}=t,{onOpenChange:a=void 0}=t;const{updateOption:u,ids:c,states:{subOpen:f}}=Wl({disabled:o,onOpenChange:({next:g})=>(i!==g&&(a==null||a(g),e(2,i=g)),g)}),m=Fl([c.menu,c.trigger],([g,_])=>({menu:g,trigger:_}));return nt(n,m,g=>e(0,l=g)),n.$$set=g=>{"disabled"in g&&e(3,o=g.disabled),"open"in g&&e(2,i=g.open),"onOpenChange"in g&&e(4,a=g.onOpenChange),"$$scope"in g&&e(5,r=g.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&i!==void 0&&f.set(i),n.$$.dirty&8&&u("disabled",o)},[l,m,i,o,a,r,s]}class tn extends It{constructor(t){super(),Mt(this,t,$l,xl,Dt,{disabled:3,open:2,onOpenChange:4})}}const en=n=>({builder:n[0]&256}),He=n=>({builder:n[8]}),ln=n=>({builder:n[0]&256}),Ne=n=>({builder:n[8]}),nn=n=>({builder:n[0]&256}),Ue=n=>({builder:n[8]}),sn=n=>({builder:n[0]&256}),Oe=n=>({builder:n[8]}),on=n=>({builder:n[0]&256}),Pe=n=>({builder:n[8]}),rn=n=>({builder:n[0]&256}),Re=n=>({builder:n[8]});function an(n){let t,e,l,s;const r=n[28].default,o=Ot(r,n,n[27],He);let i=[n[8],n[13]],a={};for(let u=0;u<i.length;u+=1)a=Nt(a,i[u]);return{c(){t=D("div"),o&&o.c(),this.h()},l(u){t=I(u,"DIV",{});var c=y(t);o&&o.l(c),c.forEach(h),this.h()},h(){bt(t,a)},m(u,c){B(u,t,c),o&&o.m(t,null),n[33](t),e=!0,l||(s=[le(n[8].action(t)),P(t,"m-focusout",n[12]),P(t,"m-keydown",n[12]),P(t,"m-pointermove",n[12])],l=!0)},p(u,c){o&&o.p&&(!e||c[0]&134217984)&&Pt(o,r,u,u[27],e?zt(r,u[27],c,en):Rt(u[27]),He),bt(t,a=ne(i,[c[0]&256&&u[8],c[0]&8192&&u[13]]))},i(u){e||(N(o,u),e=!0)},o(u){U(o,u),e=!1},d(u){u&&h(t),o&&o.d(u),n[33](null),l=!1,jt(s)}}}function cn(n){let t,e,l,s,r;const o=n[28].default,i=Ot(o,n,n[27],Ne);let a=[n[8],n[13]],u={};for(let c=0;c<a.length;c+=1)u=Nt(u,a[c]);return{c(){t=D("div"),i&&i.c(),this.h()},l(c){t=I(c,"DIV",{});var f=y(t);i&&i.l(f),f.forEach(h),this.h()},h(){bt(t,u)},m(c,f){B(c,t,f),i&&i.m(t,null),n[32](t),l=!0,s||(r=[le(n[8].action(t)),P(t,"m-focusout",n[12]),P(t,"m-keydown",n[12]),P(t,"m-pointermove",n[12])],s=!0)},p(c,f){n=c,i&&i.p&&(!l||f[0]&134217984)&&Pt(i,o,n,n[27],l?zt(o,n[27],f,ln):Rt(n[27]),Ne),bt(t,u=ne(a,[f[0]&256&&n[8],f[0]&8192&&n[13]]))},i(c){l||(N(i,c),e&&e.end(1),l=!0)},o(c){U(i,c),c&&(e=_l(t,n[5],n[6])),l=!1},d(c){c&&h(t),i&&i.d(c),n[32](null),c&&e&&e.end(),s=!1,jt(r)}}}function un(n){let t,e,l,s,r;const o=n[28].default,i=Ot(o,n,n[27],Ue);let a=[n[8],n[13]],u={};for(let c=0;c<a.length;c+=1)u=Nt(u,a[c]);return{c(){t=D("div"),i&&i.c(),this.h()},l(c){t=I(c,"DIV",{});var f=y(t);i&&i.l(f),f.forEach(h),this.h()},h(){bt(t,u)},m(c,f){B(c,t,f),i&&i.m(t,null),n[31](t),l=!0,s||(r=[le(n[8].action(t)),P(t,"m-focusout",n[12]),P(t,"m-keydown",n[12]),P(t,"m-pointermove",n[12])],s=!0)},p(c,f){n=c,i&&i.p&&(!l||f[0]&134217984)&&Pt(i,o,n,n[27],l?zt(o,n[27],f,nn):Rt(n[27]),Ue),bt(t,u=ne(a,[f[0]&256&&n[8],f[0]&8192&&n[13]]))},i(c){l||(N(i,c),c&&(e||Ee(()=>{e=gl(t,n[3],n[4]),e.start()})),l=!0)},o(c){U(i,c),l=!1},d(c){c&&h(t),i&&i.d(c),n[31](null),s=!1,jt(r)}}}function fn(n){let t,e,l,s,r,o;const i=n[28].default,a=Ot(i,n,n[27],Oe);let u=[n[8],n[13]],c={};for(let f=0;f<u.length;f+=1)c=Nt(c,u[f]);return{c(){t=D("div"),a&&a.c(),this.h()},l(f){t=I(f,"DIV",{});var m=y(t);a&&a.l(m),m.forEach(h),this.h()},h(){bt(t,c)},m(f,m){B(f,t,m),a&&a.m(t,null),n[30](t),s=!0,r||(o=[le(n[8].action(t)),P(t,"m-focusout",n[12]),P(t,"m-keydown",n[12]),P(t,"m-pointermove",n[12])],r=!0)},p(f,m){n=f,a&&a.p&&(!s||m[0]&134217984)&&Pt(a,i,n,n[27],s?zt(i,n[27],m,sn):Rt(n[27]),Oe),bt(t,c=ne(u,[m[0]&256&&n[8],m[0]&8192&&n[13]]))},i(f){s||(N(a,f),f&&Ee(()=>{s&&(l&&l.end(1),e=gl(t,n[3],n[4]),e.start())}),s=!0)},o(f){U(a,f),e&&e.invalidate(),f&&(l=_l(t,n[5],n[6])),s=!1},d(f){f&&h(t),a&&a.d(f),n[30](null),f&&l&&l.end(),r=!1,jt(o)}}}function dn(n){let t,e,l,s,r;const o=n[28].default,i=Ot(o,n,n[27],Pe);let a=[n[8],n[13]],u={};for(let c=0;c<a.length;c+=1)u=Nt(u,a[c]);return{c(){t=D("div"),i&&i.c(),this.h()},l(c){t=I(c,"DIV",{});var f=y(t);i&&i.l(f),f.forEach(h),this.h()},h(){bt(t,u)},m(c,f){B(c,t,f),i&&i.m(t,null),n[29](t),l=!0,s||(r=[le(n[8].action(t)),P(t,"m-focusout",n[12]),P(t,"m-keydown",n[12]),P(t,"m-pointermove",n[12])],s=!0)},p(c,f){n=c,i&&i.p&&(!l||f[0]&134217984)&&Pt(i,o,n,n[27],l?zt(o,n[27],f,on):Rt(n[27]),Pe),bt(t,u=ne(a,[f[0]&256&&n[8],f[0]&8192&&n[13]]))},i(c){l||(N(i,c),c&&Ee(()=>{l&&(e||(e=Me(t,n[1],n[2],!0)),e.run(1))}),l=!0)},o(c){U(i,c),c&&(e||(e=Me(t,n[1],n[2],!1)),e.run(0)),l=!1},d(c){c&&h(t),i&&i.d(c),n[29](null),c&&e&&e.end(),s=!1,jt(r)}}}function hn(n){let t;const e=n[28].default,l=Ot(e,n,n[27],Re);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,r){l&&l.p&&(!t||r[0]&134217984)&&Pt(l,e,s,s[27],t?zt(e,s[27],r,rn):Rt(s[27]),Re)},i(s){t||(N(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function mn(n){let t,e,l,s;const r=[hn,dn,fn,un,cn,an],o=[];function i(a,u){return a[7]&&a[9]?0:a[1]&&a[9]?1:a[3]&&a[5]&&a[9]?2:a[3]&&a[9]?3:a[5]&&a[9]?4:a[9]?5:-1}return~(t=i(n))&&(e=o[t]=r[t](n)),{c(){e&&e.c(),l=mt()},l(a){e&&e.l(a),l=mt()},m(a,u){~t&&o[t].m(a,u),B(a,l,u),s=!0},p(a,u){let c=t;t=i(a),t===c?~t&&o[t].p(a,u):(e&&(yt(),U(o[c],1,1,()=>{o[c]=null}),Et()),~t?(e=o[t],e?e.p(a,u):(e=o[t]=r[t](a),e.c()),N(e,1),e.m(l.parentNode,l)):e=null)},i(a){s||(N(e),s=!0)},o(a){U(e),s=!1},d(a){a&&h(l),~t&&o[t].d(a)}}}function _n(n,t,e){let l;const s=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let r=me(t,s),o,i,{$$slots:a={},$$scope:u}=t,{transition:c=void 0}=t,{transitionConfig:f=void 0}=t,{inTransition:m=void 0}=t,{inTransitionConfig:g=void 0}=t,{outTransition:_=void 0}=t,{outTransitionConfig:v=void 0}=t,{asChild:w=!1}=t,{id:E=void 0}=t,{side:k="right"}=t,{align:S="start"}=t,{sideOffset:L=0}=t,{alignOffset:C=0}=t,{collisionPadding:M=8}=t,{avoidCollisions:T=!0}=t,{collisionBoundary:V=void 0}=t,{sameWidth:Z=!1}=t,{fitViewport:X=!1}=t,{strategy:G="absolute"}=t,{overlap:ct=!1}=t,{el:F=void 0}=t;const{elements:{subMenu:Ft},states:{subOpen:Tt},ids:xt,getAttrs:kt}=ql();nt(n,Ft,A=>e(26,o=A)),nt(n,Tt,A=>e(9,i=A));const Wt=bl(),at=kt("sub-content");function _t(A){ut[A?"unshift":"push"](()=>{F=A,e(0,F)})}function Gt(A){ut[A?"unshift":"push"](()=>{F=A,e(0,F)})}function Ct(A){ut[A?"unshift":"push"](()=>{F=A,e(0,F)})}function qt(A){ut[A?"unshift":"push"](()=>{F=A,e(0,F)})}function Yt(A){ut[A?"unshift":"push"](()=>{F=A,e(0,F)})}return n.$$set=A=>{t=Nt(Nt({},t),hl(A)),e(13,r=me(t,s)),"transition"in A&&e(1,c=A.transition),"transitionConfig"in A&&e(2,f=A.transitionConfig),"inTransition"in A&&e(3,m=A.inTransition),"inTransitionConfig"in A&&e(4,g=A.inTransitionConfig),"outTransition"in A&&e(5,_=A.outTransition),"outTransitionConfig"in A&&e(6,v=A.outTransitionConfig),"asChild"in A&&e(7,w=A.asChild),"id"in A&&e(14,E=A.id),"side"in A&&e(15,k=A.side),"align"in A&&e(16,S=A.align),"sideOffset"in A&&e(17,L=A.sideOffset),"alignOffset"in A&&e(18,C=A.alignOffset),"collisionPadding"in A&&e(19,M=A.collisionPadding),"avoidCollisions"in A&&e(20,T=A.avoidCollisions),"collisionBoundary"in A&&e(21,V=A.collisionBoundary),"sameWidth"in A&&e(22,Z=A.sameWidth),"fitViewport"in A&&e(23,X=A.fitViewport),"strategy"in A&&e(24,G=A.strategy),"overlap"in A&&e(25,ct=A.overlap),"el"in A&&e(0,F=A.el),"$$scope"in A&&e(27,u=A.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&E&&xt.menu.set(E),n.$$.dirty[0]&67108864&&e(8,l=o),n.$$.dirty[0]&256&&Object.assign(l,at),n.$$.dirty[0]&67076096&&Zl({side:k,align:S,sideOffset:L,alignOffset:C,collisionPadding:M,avoidCollisions:T,collisionBoundary:V,sameWidth:Z,fitViewport:X,strategy:G,overlap:ct})},[F,c,f,m,g,_,v,w,l,i,Ft,Tt,Wt,r,E,k,S,L,C,M,T,V,Z,X,G,ct,o,u,a,_t,Gt,Ct,qt,Yt]}class gn extends It{constructor(t){super(),Mt(this,t,_n,mn,Dt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const pn=n=>({builder:n&4}),ze=n=>({builder:n[2]}),vn=n=>({builder:n&4}),je=n=>({builder:n[2]});function bn(n){let t,e,l,s;const r=n[13].default,o=Ot(r,n,n[12],ze);let i=[n[2],n[6]],a={};for(let u=0;u<i.length;u+=1)a=Nt(a,i[u]);return{c(){t=D("div"),o&&o.c(),this.h()},l(u){t=I(u,"DIV",{});var c=y(t);o&&o.l(c),c.forEach(h),this.h()},h(){bt(t,a)},m(u,c){B(u,t,c),o&&o.m(t,null),n[14](t),e=!0,l||(s=[le(n[2].action(t)),P(t,"m-click",n[5]),P(t,"m-focusin",n[5]),P(t,"m-focusout",n[5]),P(t,"m-keydown",n[5]),P(t,"m-pointerleave",n[5]),P(t,"m-pointermove",n[5])],l=!0)},p(u,c){o&&o.p&&(!e||c&4100)&&Pt(o,r,u,u[12],e?zt(r,u[12],c,pn):Rt(u[12]),ze),bt(t,a=ne(i,[c&4&&u[2],c&64&&u[6]]))},i(u){e||(N(o,u),e=!0)},o(u){U(o,u),e=!1},d(u){u&&h(t),o&&o.d(u),n[14](null),l=!1,jt(s)}}}function wn(n){let t;const e=n[13].default,l=Ot(e,n,n[12],je);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,r){l&&l.p&&(!t||r&4100)&&Pt(l,e,s,s[12],t?zt(e,s[12],r,vn):Rt(s[12]),je)},i(s){t||(N(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function kn(n){let t,e,l,s;const r=[wn,bn],o=[];function i(a,u){return a[1]?0:1}return t=i(n),e=o[t]=r[t](n),{c(){e.c(),l=mt()},l(a){e.l(a),l=mt()},m(a,u){o[t].m(a,u),B(a,l,u),s=!0},p(a,[u]){let c=t;t=i(a),t===c?o[t].p(a,u):(yt(),U(o[c],1,1,()=>{o[c]=null}),Et(),e=o[t],e?e.p(a,u):(e=o[t]=r[t](a),e.c()),N(e,1),e.m(l.parentNode,l))},i(a){s||(N(e),s=!0)},o(a){U(e),s=!1},d(a){a&&h(l),o[t].d(a)}}}function yn(n,t,e){let l,s;const r=["disabled","asChild","id","el"];let o=me(t,r),i,a,{$$slots:u={},$$scope:c}=t,{disabled:f=!1}=t,{asChild:m=!1}=t,{id:g=void 0}=t,{el:_=void 0}=t;const{elements:{subTrigger:v},ids:w,getAttrs:E,options:k}=Gl();nt(n,v,M=>e(11,a=M));const{disabled:S}=k;nt(n,S,M=>e(10,i=M));const L=bl();function C(M){ut[M?"unshift":"push"](()=>{_=M,e(0,_)})}return n.$$set=M=>{t=Nt(Nt({},t),hl(M)),e(6,o=me(t,r)),"disabled"in M&&e(7,f=M.disabled),"asChild"in M&&e(1,m=M.asChild),"id"in M&&e(8,g=M.id),"el"in M&&e(0,_=M.el),"$$scope"in M&&e(12,c=M.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&g&&w.trigger.set(g),n.$$.dirty&2048&&e(2,l=a),n.$$.dirty&1152&&e(9,s={...E("sub-trigger"),...Xl(f||i)}),n.$$.dirty&516&&Object.assign(l,s)},[_,m,l,v,S,L,o,f,g,s,i,a,c,u,C]}class En extends It{constructor(t){super(),Mt(this,t,yn,kn,Dt,{disabled:7,asChild:1,id:8,el:0})}}function Fe(n,t,e){const l=n.slice();return l[11]=t[e],l[13]=e,l}function We(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">/</div>',r,o,i,a,u,c,f='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',m,g,_=n[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",v,w=Ut(n[1]),E=[];for(let k=0;k<w.length;k+=1)E[k]=qe(Fe(n,w,k));return{c(){t=D("div"),e=D("div"),l=D("div"),l.innerHTML=s,r=R(),o=D("div"),i=D("div");for(let k=0;k<E.length;k+=1)E[k].c();a=R(),u=D("div"),c=D("div"),c.innerHTML=f,m=R(),g=D("div"),v=Q(_),this.h()},l(k){t=I(k,"DIV",{class:!0});var S=y(t);e=I(S,"DIV",{class:!0});var L=y(e);l=I(L,"DIV",{class:!0,"data-svelte-h":!0}),wt(l)!=="svelte-1ynv172"&&(l.innerHTML=s),r=z(L),o=I(L,"DIV",{class:!0});var C=y(o);i=I(C,"DIV",{class:!0});var M=y(i);for(let Z=0;Z<E.length;Z+=1)E[Z].l(M);M.forEach(h),a=z(C),u=I(C,"DIV",{class:!0});var T=y(u);c=I(T,"DIV",{"data-svelte-h":!0}),wt(c)!=="svelte-cdi12d"&&(c.innerHTML=f),m=z(T),g=I(T,"DIV",{class:!0});var V=y(g);v=K(V,_),V.forEach(h),T.forEach(h),C.forEach(h),L.forEach(h),S.forEach(h),this.h()},h(){d(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),d(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),d(g,"class","line-clamp-1"),d(u,"class","px-2 pb-1 text-xs text-gray-600 bg-white rounded-br-xl flex items-center space-x-1"),d(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),d(e,"class","flex w-full px-2"),d(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(k,S){B(k,t,S),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i);for(let L=0;L<E.length;L+=1)E[L]&&E[L].m(i,null);b(o,a),b(o,u),b(u,c),b(u,m),b(u,g),b(g,v)},p(k,S){if(S&19){w=Ut(k[1]);let L;for(L=0;L<w.length;L+=1){const C=Fe(k,w,L);E[L]?E[L].p(C,S):(E[L]=qe(C),E[L].c(),E[L].m(i,null))}for(;L<E.length;L+=1)E[L].d(1);E.length=w.length}S&4&&_!==(_=k[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&st(v,_)},d(k){k&&h(t),ie(E,k)}}}function qe(n){let t,e,l=n[11].command+"",s,r,o,i=n[11].title+"",a,u,c,f,m;function g(){return n[9](n[11])}function _(){return n[10](n[13])}return{c(){t=D("button"),e=D("div"),s=Q(l),r=R(),o=D("div"),a=Q(i),u=R(),this.h()},l(v){t=I(v,"BUTTON",{class:!0,type:!0});var w=y(t);e=I(w,"DIV",{class:!0});var E=y(e);s=K(E,l),E.forEach(h),r=z(w),o=I(w,"DIV",{class:!0});var k=y(o);a=K(k,i),k.forEach(h),u=z(w),w.forEach(h),this.h()},h(){d(e,"class","font-medium text-black"),d(o,"class","text-xs text-gray-600"),d(t,"class",c="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?" bg-gray-100 selected-command-option-button":"")),d(t,"type","button")},m(v,w){B(v,t,w),b(t,e),b(e,s),b(t,r),b(t,o),b(o,a),b(t,u),f||(m=[P(t,"click",g),P(t,"mousemove",_),P(t,"focus",In)],f=!0)},p(v,w){n=v,w&2&&l!==(l=n[11].command+"")&&st(s,l),w&2&&i!==(i=n[11].title+"")&&st(a,i),w&1&&c!==(c="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?" bg-gray-100 selected-command-option-button":""))&&d(t,"class",c)},d(v){v&&h(t),f=!1,jt(m)}}}function Dn(n){let t,e=n[1].length>0&&We(n);return{c(){e&&e.c(),t=mt()},l(l){e&&e.l(l),t=mt()},m(l,s){e&&e.m(l,s),B(l,t,s)},p(l,[s]){l[1].length>0?e?e.p(l,s):(e=We(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:pt,o:pt,d(l){l&&h(t),e&&e.d(l)}}}const In=()=>{};function Mn(n,t,e){let l,s;nt(n,Ml,_=>e(8,s=_));const r=te("i18n");nt(n,r,_=>e(2,l=_));let{prompt:o=""}=t,i=0,a=[];const u=()=>{e(0,i=Math.max(0,i-1))},c=()=>{e(0,i=Math.min(i+1,a.length-1))},f=async _=>{let v=_.content;if(_.content.includes("{{CLIPBOARD}}")){const k=await navigator.clipboard.readText().catch(S=>(gt.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));v=_.content.replaceAll("{{CLIPBOARD}}",k)}e(5,o=v);const w=document.getElementById("chat-textarea");await vt(),w.style.height="",w.style.height=Math.min(w.scrollHeight,200)+"px",w==null||w.focus(),await vt();const E=vl(o);if(E.length>0){const k=E.at(0);w.setSelectionRange(k==null?void 0:k.startIndex,k.endIndex+1)}},m=_=>{f(_)},g=_=>{e(0,i=_)};return n.$$set=_=>{"prompt"in _&&e(5,o=_.prompt)},n.$$.update=()=>{n.$$.dirty&288&&e(1,a=s.filter(_=>_.command.includes(o)).sort((_,v)=>_.title.localeCompare(v.title))),n.$$.dirty&32&&o&&e(0,i=0)},[i,a,l,r,f,o,u,c,s,m,g]}class Tn extends It{constructor(t){super(),Mt(this,t,Mn,Dn,Dt,{prompt:5,selectUp:6,selectDown:7})}get selectUp(){return this.$$.ctx[6]}get selectDown(){return this.$$.ctx[7]}}function Ze(n,t,e){const l=n.slice();return l[19]=t[e],l[21]=e,l}function Ge(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">#</div>',r,o,i,a,u,c,f=Ut(n[3]),m=[];for(let w=0;w<f.length;w+=1)m[w]=Ye(Ze(n,f,w));function g(w,E){var k,S;if(E&1&&(u=null),E&1&&(c=null),u==null&&(u=!!w[0].split(" ").some(An)),u)return Bn;if(c==null&&(c=!!((S=(k=w[0].split(" "))==null?void 0:k.at(0))!=null&&S.substring(1).startsWith("http"))),c)return Sn}let _=g(n,-1),v=_&&_(n);return{c(){t=D("div"),e=D("div"),l=D("div"),l.innerHTML=s,r=R(),o=D("div"),i=D("div");for(let w=0;w<m.length;w+=1)m[w].c();a=R(),v&&v.c(),this.h()},l(w){t=I(w,"DIV",{class:!0});var E=y(t);e=I(E,"DIV",{class:!0});var k=y(e);l=I(k,"DIV",{class:!0,"data-svelte-h":!0}),wt(l)!=="svelte-czbw16"&&(l.innerHTML=s),r=z(k),o=I(k,"DIV",{class:!0});var S=y(o);i=I(S,"DIV",{class:!0});var L=y(i);for(let C=0;C<m.length;C+=1)m[C].l(L);a=z(L),v&&v.l(L),L.forEach(h),S.forEach(h),k.forEach(h),E.forEach(h),this.h()},h(){d(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),d(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),d(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),d(e,"class","flex w-full px-2"),d(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(w,E){B(w,t,E),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(i,null);b(i,a),v&&v.m(i,null)},p(w,E){if(E&46){f=Ut(w[3]);let k;for(k=0;k<f.length;k+=1){const S=Ze(w,f,k);m[k]?m[k].p(S,E):(m[k]=Ye(S),m[k].c(),m[k].m(i,a))}for(;k<m.length;k+=1)m[k].d(1);m.length=f.length}_===(_=g(w,E))&&v?v.p(w,E):(v&&v.d(1),v=_&&_(w),v&&(v.c(),v.m(i,null)))},d(w){w&&h(t),ie(m,w),v&&v.d()}}}function Cn(n){let t,e,l=n[19].name+"",s,r,o=n[19].filename+"",i,a,u,c,f=n[19].title+"",m;return{c(){t=D("div"),e=Q("#"),s=Q(l),r=Q(" ("),i=Q(o),a=Q(")"),u=R(),c=D("div"),m=Q(f),this.h()},l(g){t=I(g,"DIV",{class:!0});var _=y(t);e=K(_,"#"),s=K(_,l),r=K(_," ("),i=K(_,o),a=K(_,")"),_.forEach(h),u=z(g),c=I(g,"DIV",{class:!0});var v=y(c);m=K(v,f),v.forEach(h),this.h()},h(){d(t,"class","font-medium text-black line-clamp-1"),d(c,"class","text-xs text-gray-600 line-clamp-1")},m(g,_){B(g,t,_),b(t,e),b(t,s),b(t,r),b(t,i),b(t,a),B(g,u,_),B(g,c,_),b(c,m)},p(g,_){_&8&&l!==(l=g[19].name+"")&&st(s,l),_&8&&o!==(o=g[19].filename+"")&&st(i,o),_&8&&f!==(f=g[19].title+"")&&st(m,f)},d(g){g&&(h(t),h(u),h(c))}}}function Vn(n){var a;let t,e=(((a=n[19])==null?void 0:a.title)??`#${n[19].name}`)+"",l,s,r,o=n[1].t("Collection")+"",i;return{c(){t=D("div"),l=Q(e),s=R(),r=D("div"),i=Q(o),this.h()},l(u){t=I(u,"DIV",{class:!0});var c=y(t);l=K(c,e),c.forEach(h),s=z(u),r=I(u,"DIV",{class:!0});var f=y(r);i=K(f,o),f.forEach(h),this.h()},h(){d(t,"class","font-medium text-black line-clamp-1"),d(r,"class","text-xs text-gray-600 line-clamp-1")},m(u,c){B(u,t,c),b(t,l),B(u,s,c),B(u,r,c),b(r,i)},p(u,c){var f;c&8&&e!==(e=(((f=u[19])==null?void 0:f.title)??`#${u[19].name}`)+"")&&st(l,e),c&2&&o!==(o=u[1].t("Collection")+"")&&st(i,o)},d(u){u&&(h(t),h(s),h(r))}}}function Ye(n){let t,e,l,s;function r(c,f){return c[19].type==="collection"?Vn:Cn}let o=r(n),i=o(n);function a(){return n[14](n[19])}function u(){return n[15](n[21])}return{c(){t=D("button"),i.c(),this.h()},l(c){t=I(c,"BUTTON",{class:!0,type:!0});var f=y(t);i.l(f),f.forEach(h),this.h()},h(){d(t,"class",e="px-3 py-1.5 rounded-xl w-full text-left "+(n[21]===n[2]?" bg-gray-100 selected-command-option-button":"")),d(t,"type","button")},m(c,f){B(c,t,f),i.m(t,null),l||(s=[P(t,"click",a),P(t,"mousemove",u),P(t,"focus",Hn)],l=!0)},p(c,f){n=c,o===(o=r(n))&&i?i.p(n,f):(i.d(1),i=o(n),i&&(i.c(),i.m(t,null))),f&4&&e!==(e="px-3 py-1.5 rounded-xl w-full text-left "+(n[21]===n[2]?" bg-gray-100 selected-command-option-button":""))&&d(t,"class",e)},d(c){c&&h(t),i.d(),l=!1,jt(s)}}}function Sn(n){var f,m;let t,e,l=((m=(f=n[0].split(" "))==null?void 0:f.at(0))==null?void 0:m.substring(1))+"",s,r,o,i=n[1].t("Web")+"",a,u,c;return{c(){t=D("button"),e=D("div"),s=Q(l),r=R(),o=D("div"),a=Q(i),this.h()},l(g){t=I(g,"BUTTON",{class:!0,type:!0});var _=y(t);e=I(_,"DIV",{class:!0});var v=y(e);s=K(v,l),v.forEach(h),r=z(_),o=I(_,"DIV",{class:!0});var w=y(o);a=K(w,i),w.forEach(h),_.forEach(h),this.h()},h(){d(e,"class","font-medium text-black line-clamp-1"),d(o,"class","text-xs text-gray-600 line-clamp-1"),d(t,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),d(t,"type","button")},m(g,_){B(g,t,_),b(t,e),b(e,s),b(t,r),b(t,o),b(o,a),u||(c=P(t,"click",n[17]),u=!0)},p(g,_){var v,w;_&1&&l!==(l=((w=(v=g[0].split(" "))==null?void 0:v.at(0))==null?void 0:w.substring(1))+"")&&st(s,l),_&2&&i!==(i=g[1].t("Web")+"")&&st(a,i)},d(g){g&&h(t),u=!1,c()}}}function Bn(n){var f,m;let t,e,l=((m=(f=n[0].split(" "))==null?void 0:f.at(0))==null?void 0:m.substring(1))+"",s,r,o,i=n[1].t("Youtube")+"",a,u,c;return{c(){t=D("button"),e=D("div"),s=Q(l),r=R(),o=D("div"),a=Q(i),this.h()},l(g){t=I(g,"BUTTON",{class:!0,type:!0});var _=y(t);e=I(_,"DIV",{class:!0});var v=y(e);s=K(v,l),v.forEach(h),r=z(_),o=I(_,"DIV",{class:!0});var w=y(o);a=K(w,i),w.forEach(h),_.forEach(h),this.h()},h(){d(e,"class","font-medium text-black line-clamp-1"),d(o,"class","text-xs text-gray-600 line-clamp-1"),d(t,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),d(t,"type","button")},m(g,_){B(g,t,_),b(t,e),b(e,s),b(t,r),b(t,o),b(o,a),u||(c=P(t,"click",n[16]),u=!0)},p(g,_){var v,w;_&1&&l!==(l=((w=(v=g[0].split(" "))==null?void 0:v.at(0))==null?void 0:w.substring(1))+"")&&st(s,l),_&2&&i!==(i=g[1].t("Youtube")+"")&&st(a,i)},d(g){g&&h(t),u=!1,c()}}}function Ln(n){var s,r;let t=n[3].length>0||((r=(s=n[0].split(" "))==null?void 0:s.at(0))==null?void 0:r.substring(1).startsWith("http")),e,l=t&&Ge(n);return{c(){l&&l.c(),e=mt()},l(o){l&&l.l(o),e=mt()},m(o,i){l&&l.m(o,i),B(o,e,i)},p(o,[i]){var a,u;i&9&&(t=o[3].length>0||((u=(a=o[0].split(" "))==null?void 0:a.at(0))==null?void 0:u.substring(1).startsWith("http"))),t?l?l.p(o,i):(l=Ge(o),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:pt,o:pt,d(o){o&&h(e),l&&l.d(o)}}}const An=n=>n.substring(1).startsWith("https://www.youtube.com")||n.substring(1).startsWith("https://youtu.be"),Hn=()=>{};function Nn(n,t,e){let l,s,r;nt(n,Tl,M=>e(13,s=M));const o=te("i18n");nt(n,o,M=>e(1,r=M));let{prompt:i=""}=t;const a=ml();let u=0,c=[],f=[],m=[];const g=()=>{e(2,u=Math.max(0,u-1))},_=()=>{e(2,u=Math.min(u+1,c.length-1))},v=async M=>{a("select",M),e(0,i=ke(i));const T=document.getElementById("chat-textarea");await vt(),T==null||T.focus(),await vt()},w=async M=>{a("url",M),e(0,i=ke(i));const T=document.getElementById("chat-textarea");await vt(),T==null||T.focus(),await vt()},E=async M=>{a("youtube",M),e(0,i=ke(i));const T=document.getElementById("chat-textarea");await vt(),T==null||T.focus(),await vt()},k=M=>{console.log(M),v(M)},S=M=>{e(2,u=M)},L=()=>{var T,V;const M=(V=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:V.substring(1);Se(M)?E(M):gt.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},C=()=>{var T,V;const M=(V=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:V.substring(1);Se(M)?w(M):gt.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return n.$$set=M=>{"prompt"in M&&e(0,i=M.prompt)},n.$$.update=()=>{n.$$.dirty&8194&&e(11,m=[...s.length>0?[{name:"All Documents",type:"collection",title:r.t("All Documents"),collection_names:s.map(M=>M.collection_name)}]:[],...s.reduce((M,T,V,Z)=>{var X;return[...new Set([...M,...(((X=T==null?void 0:T.content)==null?void 0:X.tags)??[]).map(G=>G.name)])]},[]).map(M=>({name:M,type:"collection",collection_names:s.filter(T=>{var V;return(((V=T==null?void 0:T.content)==null?void 0:V.tags)??[]).map(Z=>Z.name).includes(M)}).map(T=>T.collection_name)}))]),n.$$.dirty&2049&&e(12,l=m.filter(M=>{var T,V;return M.name.includes(((V=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:V.substring(1))??"")}).sort((M,T)=>M.name.localeCompare(T.name))),n.$$.dirty&8193&&e(10,f=s.filter(M=>{var T,V;return M.name.includes(((V=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:V.substring(1))??"")}).sort((M,T)=>M.title.localeCompare(T.title))),n.$$.dirty&5120&&e(3,c=[...l,...f]),n.$$.dirty&4097&&i&&(e(2,u=0),console.log(l))},[i,r,u,c,o,v,w,E,g,_,f,m,l,s,k,S,L,C]}class Un extends It{constructor(t){super(),Mt(this,t,Nn,Ln,Dt,{prompt:0,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function Xe(n,t,e){const l=n.slice();return l[16]=t[e],l[18]=e,l}function Qe(n){let t,e=n[2].length>0&&Ke(n);return{c(){e&&e.c(),t=mt()},l(l){e&&e.l(l),t=mt()},m(l,s){e&&e.m(l,s),B(l,t,s)},p(l,s){l[2].length>0?e?e.p(l,s):(e=Ke(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&h(t),e&&e.d(l)}}}function Ke(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">@</div>',r,o,i,a=Ut(n[2]),u=[];for(let c=0;c<a.length;c+=1)u[c]=Je(Xe(n,a,c));return{c(){t=D("div"),e=D("div"),l=D("div"),l.innerHTML=s,r=R(),o=D("div"),i=D("div");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=I(c,"DIV",{class:!0});var f=y(t);e=I(f,"DIV",{class:!0});var m=y(e);l=I(m,"DIV",{class:!0,"data-svelte-h":!0}),wt(l)!=="svelte-1ourwwn"&&(l.innerHTML=s),r=z(m),o=I(m,"DIV",{class:!0});var g=y(o);i=I(g,"DIV",{class:!0});var _=y(i);for(let v=0;v<u.length;v+=1)u[v].l(_);_.forEach(h),g.forEach(h),m.forEach(h),f.forEach(h),this.h()},h(){d(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),d(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),d(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),d(e,"class","flex w-full px-2"),d(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(c,f){B(c,t,f),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null)},p(c,f){if(f&22){a=Ut(c[2]);let m;for(m=0;m<a.length;m+=1){const g=Xe(c,a,m);u[m]?u[m].p(g,f):(u[m]=Je(g),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}},d(c){c&&h(t),ie(u,c)}}}function Je(n){let t,e,l=n[16].name+"",s,r,o,i,a;function u(){return n[11](n[16])}function c(){return n[12](n[18])}return{c(){t=D("button"),e=D("div"),s=Q(l),r=R(),this.h()},l(f){t=I(f,"BUTTON",{class:!0,type:!0});var m=y(t);e=I(m,"DIV",{class:!0});var g=y(e);s=K(g,l),g.forEach(h),r=z(m),m.forEach(h),this.h()},h(){d(e,"class","font-medium text-black line-clamp-1"),d(t,"class",o="px-3 py-1.5 rounded-xl w-full text-left "+(n[18]===n[1]?" bg-gray-100 selected-command-option-button":"")),d(t,"type","button")},m(f,m){B(f,t,m),b(t,e),b(e,s),b(t,r),i||(a=[P(t,"click",u),P(t,"mousemove",c),P(t,"focus",Pn)],i=!0)},p(f,m){n=f,m&4&&l!==(l=n[16].name+"")&&st(s,l),m&2&&o!==(o="px-3 py-1.5 rounded-xl w-full text-left "+(n[18]===n[1]?" bg-gray-100 selected-command-option-button":""))&&d(t,"class",o)},d(f){f&&h(t),i=!1,jt(a)}}}function On(n){let t=n[0].charAt(0)==="@",e,l=t&&Qe(n);return{c(){l&&l.c(),e=mt()},l(s){l&&l.l(s),e=mt()},m(s,r){l&&l.m(s,r),B(s,e,r)},p(s,[r]){r&1&&(t=s[0].charAt(0)==="@"),t?l?l.p(s,r):(l=Qe(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:pt,o:pt,d(s){s&&h(e),l&&l.d(s)}}}const Pn=()=>{};function Rn(n,t,e){let l;nt(n,pl,E=>e(10,l=E));const s=te("i18n");nt(n,s,E=>e(13,E));const r=ml();let{prompt:o=""}=t,{user:i=null}=t,{chatInputPlaceholder:a=""}=t,{messages:u=[]}=t,c=0,f=[];const m=()=>{e(1,c=Math.max(0,c-1))},g=()=>{e(1,c=Math.min(c+1,f.length-1))},_=async E=>{e(0,o=""),r("select",E)},v=E=>{_(E)},w=E=>{e(1,c=E)};return n.$$set=E=>{"prompt"in E&&e(0,o=E.prompt),"user"in E&&e(5,i=E.user),"chatInputPlaceholder"in E&&e(6,a=E.chatInputPlaceholder),"messages"in E&&e(7,u=E.messages)},n.$$.update=()=>{n.$$.dirty&1025&&e(2,f=l.filter(E=>{var k,S;return E.name.includes(((S=(k=o.split(" "))==null?void 0:k.at(0))==null?void 0:S.substring(1))??"")}).sort((E,k)=>E.name.localeCompare(k.name))),n.$$.dirty&1&&o&&e(1,c=0)},[o,c,f,s,_,i,a,u,m,g,l,v,w]}class zn extends It{constructor(t){super(),Mt(this,t,Rn,On,Dt,{prompt:0,user:5,chatInputPlaceholder:6,messages:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function jn(n){let t,e;return{c(){t=J("svg"),e=J("path"),this.h()},l(l){t=x(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=y(t);e=x(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(e).forEach(h),s.forEach(h),this.h()},h(){d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"d","M6 18 18 6M6 6l12 12"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width",n[1]),d(t,"stroke","currentColor"),d(t,"class",n[0])},m(l,s){B(l,t,s),b(t,e)},p(l,[s]){s&2&&d(t,"stroke-width",l[1]),s&1&&d(t,"class",l[0])},i:pt,o:pt,d(l){l&&h(t)}}}function Fn(n,t,e){let{className:l="size-3.5"}=t,{strokeWidth:s="2"}=t;return n.$$set=r=>{"className"in r&&e(0,l=r.className),"strokeWidth"in r&&e(1,s=r.strokeWidth)},[l,s]}class Wn extends It{constructor(t){super(),Mt(this,t,Fn,jn,Dt,{className:0,strokeWidth:1})}}function xe(n,t,e){const l=n.slice();return l[65]=t[e],l[67]=e,l}function $e(n){let t,e,l,s,r,o,i;return r=new Al({}),{c(){t=D("div"),e=D("div"),l=D("div"),s=D("div"),$(r.$$.fragment),this.h()},l(a){t=I(a,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var u=y(t);e=I(u,"DIV",{class:!0});var c=y(e);l=I(c,"DIV",{class:!0});var f=y(l);s=I(f,"DIV",{class:!0});var m=y(s);tt(r.$$.fragment,m),m.forEach(h),f.forEach(h),c.forEach(h),u.forEach(h),this.h()},h(){d(s,"class","max-w-md"),d(l,"class","m-auto pt-64 flex flex-col justify-center"),d(e,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),d(t,"class",o="fixed "+(n[20]?"left-0 lg:left-[260px] lg:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),d(t,"id","dropzone"),d(t,"role","region"),d(t,"aria-label","Drag and Drop Container")},m(a,u){B(a,t,u),b(t,e),b(e,l),b(l,s),et(r,s,null),i=!0},p(a,u){(!i||u[0]&1048576&&o!==(o="fixed "+(a[20]?"left-0 lg:left-[260px] lg:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&d(t,"class",o)},i(a){i||(N(r.$$.fragment,a),i=!0)},o(a){U(r.$$.fragment,a),i=!1},d(a){a&&h(t),lt(r)}}}function tl(n){let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',s,r;return{c(){t=D("div"),e=D("button"),e.innerHTML=l,this.h()},l(o){t=I(o,"DIV",{class:!0});var i=y(t);e=I(i,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(e)!=="svelte-4loiwr"&&(e.innerHTML=l),i.forEach(h),this.h()},h(){d(e,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full"),d(t,"class","absolute -top-12 left-0 right-0 flex justify-center z-30")},m(o,i){B(o,t,i),b(t,e),s||(r=P(e,"click",n[28]),s=!0)},p:pt,d(o){o&&h(t),s=!1,r()}}}function qn(n){let t,e,l;function s(o){n[32](o)}let r={};return n[0]!==void 0&&(r.prompt=n[0]),t=new Un({props:r}),n[31](t),ut.push(()=>Jt(t,"prompt",s)),t.$on("youtube",n[33]),t.$on("url",n[34]),t.$on("select",n[35]),{c(){$(t.$$.fragment)},l(o){tt(t.$$.fragment,o)},m(o,i){et(t,o,i),l=!0},p(o,i){const a={};!e&&i[0]&1&&(e=!0,a.prompt=o[0],Kt(()=>e=!1)),t.$set(a)},i(o){l||(N(t.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),l=!1},d(o){n[31](null),lt(t,o)}}}function Zn(n){let t,e,l;function s(o){n[30](o)}let r={};return n[0]!==void 0&&(r.prompt=n[0]),t=new Tn({props:r}),n[29](t),ut.push(()=>Jt(t,"prompt",s)),{c(){$(t.$$.fragment)},l(o){tt(t.$$.fragment,o)},m(o,i){et(t,o,i),l=!0},p(o,i){const a={};!e&&i[0]&1&&(e=!0,a.prompt=o[0],Kt(()=>e=!1)),t.$set(a)},i(o){l||(N(t.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),l=!1},d(o){n[29](null),lt(t,o)}}}function el(n){let t,e,l,s,r,o,i,a,u=n[2].name+"",c,f,m,g,_,v,w,E;return _=new Wn({}),{c(){t=D("div"),e=D("div"),l=D("img"),r=R(),o=D("div"),i=Q("Talking to "),a=D("span"),c=Q(u),f=R(),m=D("div"),g=D("button"),$(_.$$.fragment),this.h()},l(k){t=I(k,"DIV",{class:!0});var S=y(t);e=I(S,"DIV",{class:!0});var L=y(e);l=I(L,"IMG",{alt:!0,class:!0,src:!0}),r=z(L),o=I(L,"DIV",{});var C=y(o);i=K(C,"Talking to "),a=I(C,"SPAN",{class:!0});var M=y(a);c=K(M,u),M.forEach(h),C.forEach(h),L.forEach(h),f=z(S),m=I(S,"DIV",{});var T=y(m);g=I(T,"BUTTON",{class:!0});var V=y(g);tt(_.$$.fragment,V),V.forEach(h),T.forEach(h),S.forEach(h),this.h()},h(){var k;d(l,"alt","model profile"),d(l,"class","size-5 max-w-[28px] object-cover rounded-full"),_e(l.src,s=((k=n[21].find(n[41]))==null?void 0:k.imageUrl)??(n[19].language==="dg-DG"?"/doge.png":`${Te}/static/favicon.png`))||d(l,"src",s),d(a,"class","font-medium"),d(e,"class","flex items-center gap-2 text-sm dark:text-gray-500"),d(g,"class","flex items-center"),d(t,"class","px-3 py-2.5 text-left w-full flex justify-between items-center absolute bottom-0 left-0 right-0 bg-gradient-to-t from-50% from-white dark:from-gray-900")},m(k,S){B(k,t,S),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i),b(o,a),b(a,c),b(t,f),b(t,m),b(m,g),et(_,g,null),v=!0,w||(E=P(g,"click",n[42]),w=!0)},p(k,S){var L;(!v||S[0]&2621444&&!_e(l.src,s=((L=k[21].find(k[41]))==null?void 0:L.imageUrl)??(k[19].language==="dg-DG"?"/doge.png":`${Te}/static/favicon.png`)))&&d(l,"src",s),(!v||S[0]&4)&&u!==(u=k[2].name+"")&&st(c,u)},i(k){v||(N(_.$$.fragment,k),v=!0)},o(k){U(_.$$.fragment,k),v=!1},d(k){k&&h(t),lt(_),w=!1,E()}}}function ll(n){let t,e=Ut(n[3]),l=[];for(let s=0;s<e.length;s+=1)l[s]=nl(xe(n,e,s));return{c(){t=D("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=I(s,"DIV",{class:!0});var r=y(t);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(h),this.h()},h(){d(t,"class","mx-2 mt-2 mb-1 flex flex-wrap gap-2")},m(s,r){B(s,t,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(s,r){if(r[0]&524296){e=Ut(s[3]);let o;for(o=0;o<e.length;o+=1){const i=xe(s,e,o);l[o]?l[o].p(i,r):(l[o]=nl(i),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(s){s&&h(t),ie(l,s)}}}function Gn(n){var g;let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"></path><path d="M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"></path></svg>',s,r,o,i=(((g=n[65])==null?void 0:g.title)??`#${n[65].name}`)+"",a,u,c,f=n[19].t("Collection")+"",m;return{c(){t=D("div"),e=D("div"),e.innerHTML=l,s=R(),r=D("div"),o=D("div"),a=Q(i),u=R(),c=D("div"),m=Q(f),this.h()},l(_){t=I(_,"DIV",{class:!0});var v=y(t);e=I(v,"DIV",{class:!0,"data-svelte-h":!0}),wt(e)!=="svelte-2wa7ie"&&(e.innerHTML=l),s=z(v),r=I(v,"DIV",{class:!0});var w=y(r);o=I(w,"DIV",{class:!0});var E=y(o);a=K(E,i),E.forEach(h),u=z(w),c=I(w,"DIV",{class:!0});var k=y(c);m=K(k,f),k.forEach(h),w.forEach(h),v.forEach(h),this.h()},h(){d(e,"class","p-2.5 bg-red-400 text-white rounded-lg"),d(o,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),d(c,"class","text-gray-500 text-sm"),d(r,"class","flex flex-col justify-center -space-y-0.5"),d(t,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(_,v){B(_,t,v),b(t,e),b(t,s),b(t,r),b(r,o),b(o,a),b(r,u),b(r,c),b(c,m)},p(_,v){var w;v[0]&8&&i!==(i=(((w=_[65])==null?void 0:w.title)??`#${_[65].name}`)+"")&&st(a,i),v[0]&524288&&f!==(f=_[19].t("Collection")+"")&&st(m,f)},d(_){_&&h(t)}}}function Yn(n){let t,e,l,s,r,o=n[65].name+"",i,a,u,c=n[19].t("Document")+"",f;function m(v,w){return v[65].upload_status?Kn:Qn}let g=m(n),_=g(n);return{c(){t=D("div"),e=D("div"),_.c(),l=R(),s=D("div"),r=D("div"),i=Q(o),a=R(),u=D("div"),f=Q(c),this.h()},l(v){t=I(v,"DIV",{class:!0});var w=y(t);e=I(w,"DIV",{class:!0});var E=y(e);_.l(E),E.forEach(h),l=z(w),s=I(w,"DIV",{class:!0});var k=y(s);r=I(k,"DIV",{class:!0});var S=y(r);i=K(S,o),S.forEach(h),a=z(k),u=I(k,"DIV",{class:!0});var L=y(u);f=K(L,c),L.forEach(h),k.forEach(h),w.forEach(h),this.h()},h(){d(e,"class","p-2.5 bg-red-400 text-white rounded-lg"),d(r,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),d(u,"class","text-gray-500 text-sm"),d(s,"class","flex flex-col justify-center -space-y-0.5"),d(t,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(v,w){B(v,t,w),b(t,e),_.m(e,null),b(t,l),b(t,s),b(s,r),b(r,i),b(s,a),b(s,u),b(u,f)},p(v,w){g!==(g=m(v))&&(_.d(1),_=g(v),_&&(_.c(),_.m(e,null))),w[0]&8&&o!==(o=v[65].name+"")&&st(i,o),w[0]&524288&&c!==(c=v[19].t("Document")+"")&&st(f,c)},d(v){v&&h(t),_.d()}}}function Xn(n){let t,e;return{c(){t=D("img"),this.h()},l(l){t=I(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){_e(t.src,e=n[65].url)||d(t,"src",e),d(t,"alt","input"),d(t,"class","h-16 w-16 rounded-xl object-cover")},m(l,s){B(l,t,s)},p(l,s){s[0]&8&&!_e(t.src,e=l[65].url)&&d(t,"src",e)},d(l){l&&h(t)}}}function Qn(n){let t,e,l,s,r,o;return{c(){t=J("svg"),e=J("style"),l=Q(`.spinner_qM83 {
																	animation: spinner_8HQG 1.05s infinite;
																}
																.spinner_oXPr {
																	animation-delay: 0.1s;
																}
																.spinner_ZTLf {
																	animation-delay: 0.2s;
																}
																@keyframes spinner_8HQG {
																	0%,
																	57.14% {
																		animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
																		transform: translate(0);
																	}
																	28.57% {
																		animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
																		transform: translateY(-6px);
																	}
																	100% {
																		transform: translate(0);
																	}
																}
															`),s=J("circle"),r=J("circle"),o=J("circle"),this.h()},l(i){t=x(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=y(t);e=x(a,"style",{});var u=y(e);l=K(u,`.spinner_qM83 {
																	animation: spinner_8HQG 1.05s infinite;
																}
																.spinner_oXPr {
																	animation-delay: 0.1s;
																}
																.spinner_ZTLf {
																	animation-delay: 0.2s;
																}
																@keyframes spinner_8HQG {
																	0%,
																	57.14% {
																		animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
																		transform: translate(0);
																	}
																	28.57% {
																		animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
																		transform: translateY(-6px);
																	}
																	100% {
																		transform: translate(0);
																	}
																}
															`),u.forEach(h),s=x(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(s).forEach(h),r=x(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(r).forEach(h),o=x(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(o).forEach(h),a.forEach(h),this.h()},h(){d(s,"class","spinner_qM83"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","2.5"),d(r,"class","spinner_qM83 spinner_oXPr"),d(r,"cx","12"),d(r,"cy","12"),d(r,"r","2.5"),d(o,"class","spinner_qM83 spinner_ZTLf"),d(o,"cx","20"),d(o,"cy","12"),d(o,"r","2.5"),d(t,"class","w-6 h-6 translate-y-[0.5px]"),d(t,"fill","currentColor"),d(t,"viewBox","0 0 24 24"),d(t,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,t,a),b(t,e),b(e,l),b(t,s),b(t,r),b(t,o)},d(i){i&&h(t)}}}function Kn(n){let t,e,l;return{c(){t=J("svg"),e=J("path"),l=J("path"),this.h()},l(s){t=x(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=y(t);e=x(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(e).forEach(h),l=x(r,"path",{d:!0}),y(l).forEach(h),r.forEach(h),this.h()},h(){d(e,"fill-rule","evenodd"),d(e,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),d(e,"clip-rule","evenodd"),d(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"fill","currentColor"),d(t,"class","w-6 h-6")},m(s,r){B(s,t,r),b(t,e),b(t,l)},d(s){s&&h(t)}}}function nl(n){let t,e,l,s,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',o,i,a;function u(g,_){if(g[65].type==="image")return Xn;if(g[65].type==="doc")return Yn;if(g[65].type==="collection")return Gn}let c=u(n),f=c&&c(n);function m(){return n[46](n[67])}return{c(){t=D("div"),f&&f.c(),e=R(),l=D("div"),s=D("button"),s.innerHTML=r,o=R(),this.h()},l(g){t=I(g,"DIV",{class:!0});var _=y(t);f&&f.l(_),e=z(_),l=I(_,"DIV",{class:!0});var v=y(l);s=I(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),wt(s)!=="svelte-1i5njtt"&&(s.innerHTML=r),v.forEach(h),o=z(_),_.forEach(h),this.h()},h(){d(s,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),d(s,"type","button"),d(l,"class","absolute -top-1 -right-1"),d(t,"class","relative group")},m(g,_){B(g,t,_),f&&f.m(t,null),b(t,e),b(t,l),b(l,s),b(t,o),i||(a=P(s,"click",m),i=!0)},p(g,_){n=g,c===(c=u(n))&&f?f.p(n,_):(f&&f.d(1),f=c&&c(n),f&&(f.c(),f.m(t,e)))},d(g){g&&h(t),f&&f.d(),i=!1,a()}}}function sl(n){let t,e,l;return e=new $t({props:{content:n[19].t("Upload files"),$$slots:{default:[Jn]},$$scope:{ctx:n}}}),{c(){t=D("div"),$(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{class:!0});var r=y(t);tt(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"class","self-end mb-2 ml-1")},m(s,r){B(s,t,r),et(e,t,null),l=!0},p(s,r){const o={};r[0]&524288&&(o.content=s[19].t("Upload files")),r[0]&1024|r[2]&64&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&h(t),lt(e)}}}function Jn(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-[1.2rem] h-[1.2rem]"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=I(r,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),wt(t)!=="svelte-1nsa5at"&&(t.innerHTML=e),this.h()},h(){d(t,"class","bg-gray-50 hover:bg-gray-100 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5"),d(t,"type","button")},m(r,o){B(r,t,o),l||(s=P(t,"click",n[47]),l=!0)},p:pt,d(r){r&&h(t),l=!1,s()}}}function xn(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=I(r,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(t)!=="svelte-1ygp9cw"&&(t.innerHTML=e),this.h()},h(){d(t,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(r,o){B(r,t,o),l||(s=P(t,"click",function(){Il(n[5])&&n[5].apply(this,arguments)}),l=!0)},p(r,o){n=r},i:pt,o:pt,d(r){r&&h(t),l=!1,s()}}}function $n(n){let t,e,l,s;return t=new $t({props:{content:n[19].t("Record voice"),$$slots:{default:[ls]},$$scope:{ctx:n}}}),l=new $t({props:{content:n[19].t("Send message"),$$slots:{default:[ns]},$$scope:{ctx:n}}}),{c(){$(t.$$.fragment),e=R(),$(l.$$.fragment)},l(r){tt(t.$$.fragment,r),e=z(r),tt(l.$$.fragment,r)},m(r,o){et(t,r,o),B(r,e,o),et(l,r,o),s=!0},p(r,o){const i={};o[0]&524288&&(i.content=r[19].t("Record voice")),o[0]&262272|o[2]&64&&(i.$$scope={dirty:o,ctx:r}),t.$set(i);const a={};o[0]&524288&&(a.content=r[19].t("Send message")),o[0]&1|o[2]&64&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){s||(N(t.$$.fragment,r),N(l.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),U(l.$$.fragment,r),s=!1},d(r){r&&h(e),lt(t,r),lt(l,r)}}}function ol(n){let t,e,l;function s(i,a){return i[18]?es:ts}let r=s(n),o=r(n);return{c(){t=D("button"),o.c(),this.h()},l(i){t=I(i,"BUTTON",{id:!0,class:!0,type:!0});var a=y(t);o.l(a),a.forEach(h),this.h()},h(){d(t,"id","voice-input-button"),d(t,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-1.5 mr-0.5 self-center"),d(t,"type","button")},m(i,a){B(i,t,a),o.m(t,null),e||(l=P(t,"click",n[55]),e=!0)},p(i,a){r!==(r=s(i))&&(o.d(1),o=r(i),o&&(o.c(),o.m(t,null)))},d(i){i&&h(t),o.d(),e=!1,l()}}}function ts(n){let t,e,l;return{c(){t=J("svg"),e=J("path"),l=J("path"),this.h()},l(s){t=x(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=y(t);e=x(r,"path",{d:!0}),y(e).forEach(h),l=x(r,"path",{d:!0}),y(l).forEach(h),r.forEach(h),this.h()},h(){d(e,"d","M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"),d(l,"d","M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 20 20"),d(t,"fill","currentColor"),d(t,"class","w-5 h-5 translate-y-[0.5px]")},m(s,r){B(s,t,r),b(t,e),b(t,l)},d(s){s&&h(t)}}}function es(n){let t,e,l,s,r,o;return{c(){t=J("svg"),e=J("style"),l=Q(`.spinner_qM83 {
																animation: spinner_8HQG 1.05s infinite;
															}
															.spinner_oXPr {
																animation-delay: 0.1s;
															}
															.spinner_ZTLf {
																animation-delay: 0.2s;
															}
															@keyframes spinner_8HQG {
																0%,
																57.14% {
																	animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
																	transform: translate(0);
																}
																28.57% {
																	animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
																	transform: translateY(-6px);
																}
																100% {
																	transform: translate(0);
																}
															}
														`),s=J("circle"),r=J("circle"),o=J("circle"),this.h()},l(i){t=x(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var a=y(t);e=x(a,"style",{});var u=y(e);l=K(u,`.spinner_qM83 {
																animation: spinner_8HQG 1.05s infinite;
															}
															.spinner_oXPr {
																animation-delay: 0.1s;
															}
															.spinner_ZTLf {
																animation-delay: 0.2s;
															}
															@keyframes spinner_8HQG {
																0%,
																57.14% {
																	animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
																	transform: translate(0);
																}
																28.57% {
																	animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
																	transform: translateY(-6px);
																}
																100% {
																	transform: translate(0);
																}
															}
														`),u.forEach(h),s=x(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(s).forEach(h),r=x(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(r).forEach(h),o=x(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(o).forEach(h),a.forEach(h),this.h()},h(){d(s,"class","spinner_qM83"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","2.5"),d(r,"class","spinner_qM83 spinner_oXPr"),d(r,"cx","12"),d(r,"cy","12"),d(r,"r","2.5"),d(o,"class","spinner_qM83 spinner_ZTLf"),d(o,"cx","20"),d(o,"cy","12"),d(o,"r","2.5"),d(t,"class","w-5 h-5 translate-y-[0.5px]"),d(t,"fill","currentColor"),d(t,"viewBox","0 0 24 24"),d(t,"xmlns","http://www.w3.org/2000/svg")},m(i,a){B(i,t,a),b(t,e),b(e,l),b(t,s),b(t,r),b(t,o)},d(i){i&&h(t)}}}function ls(n){let t,e=n[7]&&ol(n);return{c(){e&&e.c(),t=mt()},l(l){e&&e.l(l),t=mt()},m(l,s){e&&e.m(l,s),B(l,t,s)},p(l,s){l[7]?e?e.p(l,s):(e=ol(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&h(t),e&&e.d(l)}}}function ns(n){let t,e,l,s,r;return{c(){t=D("button"),e=J("svg"),l=J("path"),this.h()},l(o){t=I(o,"BUTTON",{id:!0,class:!0,type:!0});var i=y(t);e=x(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=y(e);l=x(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(l).forEach(h),a.forEach(h),i.forEach(h),this.h()},h(){d(l,"fill-rule","evenodd"),d(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),d(l,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16"),d(e,"fill","currentColor"),d(e,"class","w-5 h-5"),d(t,"id","send-message-button"),d(t,"class",s=(n[0]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-100 dark:text-gray-900 dark:bg-gray-800 disabled")+" transition rounded-full p-1.5 self-center"),d(t,"type","submit"),t.disabled=r=n[0]===""},m(o,i){B(o,t,i),b(t,e),b(e,l)},p(o,i){i[0]&1&&s!==(s=(o[0]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-100 dark:text-gray-900 dark:bg-gray-800 disabled")+" transition rounded-full p-1.5 self-center")&&d(t,"class",s),i[0]&1&&r!==(r=o[0]==="")&&(t.disabled=r)},d(o){o&&h(t)}}}function ss(n){let t,e,l,s,r,o,i,a,u,c,f,m,g,_,v,w,E,k,S,L,C,M,T,V,Z,X,G,ct,F,Ft,Tt,xt,kt,Wt,at,_t,Gt,Ct,qt=n[19].t("LLMs can make mistakes. Verify important information.")+"",Yt,A,Vt,se,ae,ot=n[15]&&$e(n),ft=n[1]===!1&&n[8].length>0&&tl(n);const ce=[Zn,qn],St=[];function ue(H,q){return q[0]&1&&(u=null),q[0]&1&&(c=null),u==null&&(u=H[0].charAt(0)==="/"),u?0:(c==null&&(c=H[0].charAt(0)==="#"),c?1:-1)}~(f=ue(n,[-1,-1,-1]))&&(m=St[f]=ce[f](n));function ve(H){n[37](H)}function be(H){n[38](H)}function we(H){n[39](H)}let ee={messages:n[8]};n[0]!==void 0&&(ee.prompt=n[0]),n[16]!==void 0&&(ee.user=n[16]),n[17]!==void 0&&(ee.chatInputPlaceholder=n[17]),_=new zn({props:ee}),n[36](_),ut.push(()=>Jt(_,"prompt",ve)),ut.push(()=>Jt(_,"user",be)),ut.push(()=>Jt(_,"chatInputPlaceholder",we)),_.$on("select",n[40]);let rt=n[2]!==""&&el(n),dt=n[3].length>0&&ll(n),it=n[6]&&sl(n);const fe=[$n,xn],Bt=[];function de(H,q){return q[0]&256&&(Wt=null),Wt==null&&(Wt=H[8].length==0||H[8].at(-1).done==!0),Wt?0:1}return at=de(n,[-1,-1,-1]),_t=Bt[at]=fe[at](n),{c(){ot&&ot.c(),t=R(),e=D("div"),l=D("div"),s=D("div"),r=D("div"),o=D("div"),ft&&ft.c(),i=R(),a=D("div"),m&&m.c(),g=R(),$(_.$$.fragment),k=R(),rt&&rt.c(),S=R(),L=D("div"),C=D("div"),M=D("div"),T=D("input"),V=R(),Z=D("form"),dt&&dt.c(),X=R(),G=D("div"),it&&it.c(),ct=R(),F=D("textarea"),xt=R(),kt=D("div"),_t.c(),Gt=R(),Ct=D("div"),Yt=Q(qt),this.h()},l(H){ot&&ot.l(H),t=z(H),e=I(H,"DIV",{class:!0});var q=y(e);l=I(q,"DIV",{class:!0});var Lt=y(l);s=I(Lt,"DIV",{class:!0});var At=y(s);r=I(At,"DIV",{class:!0});var Ht=y(r);o=I(Ht,"DIV",{class:!0});var he=y(o);ft&&ft.l(he),he.forEach(h),i=z(Ht),a=I(Ht,"DIV",{class:!0});var Xt=y(a);m&&m.l(Xt),g=z(Xt),tt(_.$$.fragment,Xt),k=z(Xt),rt&&rt.l(Xt),Xt.forEach(h),Ht.forEach(h),At.forEach(h),S=z(Lt),L=I(Lt,"DIV",{class:!0});var p=y(L);C=I(p,"DIV",{class:!0});var j=y(C);M=I(j,"DIV",{class:!0});var W=y(M);T=I(W,"INPUT",{type:!0}),V=z(W),Z=I(W,"FORM",{class:!0});var O=y(Z);dt&&dt.l(O),X=z(O),G=I(O,"DIV",{class:!0});var Y=y(G);it&&it.l(Y),ct=z(Y),F=I(Y,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),y(F).forEach(h),xt=z(Y),kt=I(Y,"DIV",{class:!0});var ht=y(kt);_t.l(ht),ht.forEach(h),Y.forEach(h),O.forEach(h),Gt=z(W),Ct=I(W,"DIV",{class:!0});var Qt=y(Ct);Yt=K(Qt,qt),Qt.forEach(h),W.forEach(h),j.forEach(h),p.forEach(h),Lt.forEach(h),q.forEach(h),this.h()},h(){d(o,"class","relative"),d(a,"class","w-full relative"),d(r,"class","flex flex-col max-w-5xl w-full"),d(s,"class","px-2.5 lg:px-16 -mb-0.5 mx-auto inset-x-0 bg-transparent flex justify-center"),d(T,"type","file"),T.hidden=!0,T.multiple=!0,d(F,"id","chat-textarea"),d(F,"class",Ft="scrollbar-none dark:bg-gray-900 dark:text-gray-100 outline-none w-full py-3 px-3 "+(n[6]?"":" pl-4")+" rounded-xl resize-none h-[48px] svelte-4kxdzh"),d(F,"placeholder",Tt=n[17]!==""?n[17]:n[18]?n[19].t("Listening..."):n[19].t("Send a Message")),d(F,"rows","1"),d(kt,"class","self-end mb-2 flex space-x-1 mr-1"),d(G,"class","flex"),d(Z,"class","flex flex-col relative w-full rounded-3xl px-1.5 border border-gray-100 dark:border-gray-850 bg-white dark:bg-gray-900 dark:text-gray-100"),d(Ct,"class","mt-1.5 text-xs text-gray-500 text-center"),d(M,"class","pb-2"),d(C,"class","max-w-6xl px-2.5 lg:px-16 mx-auto inset-x-0"),d(L,"class","bg-white dark:bg-gray-900"),d(l,"class","w-full"),d(e,"class",A="fixed bottom-0 "+(n[20]?"left-0 lg:left-[260px]":"left-0")+" right-0")},m(H,q){ot&&ot.m(H,q),B(H,t,q),B(H,e,q),b(e,l),b(l,s),b(s,r),b(r,o),ft&&ft.m(o,null),b(r,i),b(r,a),~f&&St[f].m(a,null),b(a,g),et(_,a,null),b(a,k),rt&&rt.m(a,null),b(l,S),b(l,L),b(L,C),b(C,M),b(M,T),n[43](T),b(M,V),b(M,Z),dt&&dt.m(Z,null),b(Z,X),b(Z,G),it&&it.m(G,null),b(G,ct),b(G,F),n[48](F),Ie(F,n[0]),b(G,xt),b(G,kt),Bt[at].m(kt,null),b(M,Gt),b(M,Ct),b(Ct,Yt),Vt=!0,se||(ae=[P(T,"change",n[44]),P(T,"change",n[45]),P(F,"input",n[49]),P(F,"keypress",n[50]),P(F,"keydown",n[51]),P(F,"input",n[52]),P(F,"focus",n[53]),P(F,"paste",n[54]),P(Z,"submit",El(n[56]))],se=!0)},p(H,q){H[15]?ot?(ot.p(H,q),q[0]&32768&&N(ot,1)):(ot=$e(H),ot.c(),N(ot,1),ot.m(t.parentNode,t)):ot&&(yt(),U(ot,1,1,()=>{ot=null}),Et()),H[1]===!1&&H[8].length>0?ft?ft.p(H,q):(ft=tl(H),ft.c(),ft.m(o,null)):ft&&(ft.d(1),ft=null);let Lt=f;f=ue(H,q),f===Lt?~f&&St[f].p(H,q):(m&&(yt(),U(St[Lt],1,1,()=>{St[Lt]=null}),Et()),~f?(m=St[f],m?m.p(H,q):(m=St[f]=ce[f](H),m.c()),N(m,1),m.m(a,g)):m=null);const At={};q[0]&256&&(At.messages=H[8]),!v&&q[0]&1&&(v=!0,At.prompt=H[0],Kt(()=>v=!1)),!w&&q[0]&65536&&(w=!0,At.user=H[16],Kt(()=>w=!1)),!E&&q[0]&131072&&(E=!0,At.chatInputPlaceholder=H[17],Kt(()=>E=!1)),_.$set(At),H[2]!==""?rt?(rt.p(H,q),q[0]&4&&N(rt,1)):(rt=el(H),rt.c(),N(rt,1),rt.m(a,null)):rt&&(yt(),U(rt,1,1,()=>{rt=null}),Et()),H[3].length>0?dt?dt.p(H,q):(dt=ll(H),dt.c(),dt.m(Z,X)):dt&&(dt.d(1),dt=null),H[6]?it?(it.p(H,q),q[0]&64&&N(it,1)):(it=sl(H),it.c(),N(it,1),it.m(G,ct)):it&&(yt(),U(it,1,1,()=>{it=null}),Et()),(!Vt||q[0]&64&&Ft!==(Ft="scrollbar-none dark:bg-gray-900 dark:text-gray-100 outline-none w-full py-3 px-3 "+(H[6]?"":" pl-4")+" rounded-xl resize-none h-[48px] svelte-4kxdzh"))&&d(F,"class",Ft),(!Vt||q[0]&917504&&Tt!==(Tt=H[17]!==""?H[17]:H[18]?H[19].t("Listening..."):H[19].t("Send a Message")))&&d(F,"placeholder",Tt),q[0]&1&&Ie(F,H[0]);let Ht=at;at=de(H,q),at===Ht?Bt[at].p(H,q):(yt(),U(Bt[Ht],1,1,()=>{Bt[Ht]=null}),Et(),_t=Bt[at],_t?_t.p(H,q):(_t=Bt[at]=fe[at](H),_t.c()),N(_t,1),_t.m(kt,null)),(!Vt||q[0]&524288)&&qt!==(qt=H[19].t("LLMs can make mistakes. Verify important information.")+"")&&st(Yt,qt),(!Vt||q[0]&1048576&&A!==(A="fixed bottom-0 "+(H[20]?"left-0 lg:left-[260px]":"left-0")+" right-0"))&&d(e,"class",A)},i(H){Vt||(N(ot),N(m),N(_.$$.fragment,H),N(rt),N(it),N(_t),Vt=!0)},o(H){U(ot),U(m),U(_.$$.fragment,H),U(rt),U(it),U(_t),Vt=!1},d(H){H&&(h(t),h(e)),ot&&ot.d(H),ft&&ft.d(),~f&&St[f].d(),n[36](null),lt(_),rt&&rt.d(),n[43](null),dt&&dt.d(),it&&it.d(),n[48](null),Bt[at].d(),se=!1,jt(ae)}}}function os(n,t,e){let l,s,r,o;nt(n,ye,p=>e(60,s=p)),nt(n,Cl,p=>e(20,r=p)),nt(n,Vl,p=>e(21,o=p));const i=te("i18n");nt(n,i,p=>e(19,l=p));let{submitPrompt:a}=t,{stopResponse:u}=t,{autoScroll:c=!0}=t,{selectedModel:f=""}=t,m,g,_,v,w,E,k=!1,S=null,L="",{files:C=[]}=t,{fileUploadEnabled:M=!0}=t,{speechRecognitionEnabled:T=!0}=t,{prompt:V=""}=t,{messages:Z=[]}=t,X,G,ct=[],F=!1;const Ft=-45,Tt=()=>{const p=document.getElementById("messages-container");p.scrollTop=p.scrollHeight},xt=async()=>{const p=await navigator.mediaDevices.getUserMedia({audio:!0});G=new MediaRecorder(p),G.onstart=()=>{e(18,F=!0),console.log("Recording started")},G.ondataavailable=j=>ct.push(j.data),G.onstop=async()=>{e(18,F=!1),console.log("Recording stopped");const j=new Blob(ct,{type:"audio/wav"}),W=Be(j,"recording.wav"),O=await Le(localStorage.token,W).catch(Y=>(gt.error(Y),null));O&&(e(0,V=O.text),await vt(),m==null||m.focus(),V!==""&&(s==null?void 0:s.speechAutoSend)===!0&&a(V,S)),ct=[]},G.start(),kt(p)},kt=p=>{const j=new AudioContext,W=j.createMediaStreamSource(p),O=j.createAnalyser();O.minDecibels=Ft,W.connect(O);const Y=O.frequencyBinCount,ht=new Uint8Array(Y);let Qt=Date.now();const oe=()=>{if(O.getByteFrequencyData(ht),ht.some(re=>re>0)&&(Qt=Date.now()),F&&Date.now()-Qt>3e3){G.stop(),j.close();return}window.requestAnimationFrame(oe)};window.requestAnimationFrame(oe)},Wt=()=>{var p;if(F)X&&X.stop(),G&&G.stop();else if(e(18,F=!0),((p=s==null?void 0:s.audio)==null?void 0:p.STTEngine)??!1)xt();else if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){X=new(window.SpeechRecognition||window.webkitSpeechRecognition),X.continuous=!0;const j=3e3;let W;X.start(),X.onresult=async O=>{clearTimeout(W),console.log(O);const Y=O.results[Object.keys(O.results).length-1][0].transcript;e(0,V=`${V}${Y}`),await vt(),m==null||m.focus(),W=setTimeout(()=>{console.log("Speech recognition turned off due to inactivity."),X.stop()},j)},X.onend=function(){console.log("recognition ended"),e(18,F=!1),V!==""&&(s==null?void 0:s.speechAutoSend)===!0&&a(V,S)},X.onerror=function(O){console.log(O),gt.error(l.t("Speech recognition error: {{error}}",{error:O.error})),e(18,F=!1)}}else gt.error(l.t("SpeechRecognition API is not supported in this browser."))},at=async p=>{console.log(p);const j={type:"doc",name:p.name,collection_name:"",upload_status:!1,error:""};try{if(e(3,C=[...C,j]),["audio/mpeg","audio/wav"].includes(p.type)){const O=await Le(localStorage.token,p).catch(Y=>(gt.error(Y),null));if(O){console.log(O);const Y=new Blob([O.text],{type:"text/plain"});p=Be(Y,`${p.name}.txt`)}}const W=await Hl(localStorage.token,"",p);W&&(j.upload_status=!0,j.collection_name=W.collection_name,e(3,C))}catch(W){e(3,C=C.filter(O=>O.name!==p.name)),gt.error(W)}},_t=async p=>{console.log(p);const j={type:"doc",name:p,collection_name:"",upload_status:!1,url:p,error:""};try{e(3,C=[...C,j]);const W=await Nl(localStorage.token,"",p);W&&(j.upload_status=!0,j.collection_name=W.collection_name,e(3,C))}catch(W){e(3,C=C.filter(O=>O.name!==p)),gt.error(W)}},Gt=async p=>{console.log(p);const j={type:"doc",name:p,collection_name:"",upload_status:!1,url:p,error:""};try{e(3,C=[...C,j]);const W=await Ul(localStorage.token,p);W&&(j.upload_status=!0,j.collection_name=W.collection_name,e(3,C))}catch(W){e(3,C=C.filter(O=>O.name!==p)),gt.error(W)}};Dl(()=>{console.log(document.getElementById("sidebar")),window.setTimeout(()=>m==null?void 0:m.focus(),0);const p=document.querySelector("body"),j=ht=>{ht.key==="Escape"&&(console.log("Escape"),e(15,k=!1))},W=ht=>{ht.preventDefault(),e(15,k=!0)},O=()=>{e(15,k=!1)},Y=async ht=>{var Qt,oe;if(ht.preventDefault(),console.log(ht),(Qt=ht.dataTransfer)!=null&&Qt.files){const re=Array.from((oe=ht.dataTransfer)==null?void 0:oe.files);re&&re.length>0?re.forEach(Zt=>{if(console.log(Zt,Zt.name.split(".").at(-1)),["image/gif","image/jpeg","image/png"].includes(Zt.type)){let De=new FileReader;De.onload=yl=>{e(3,C=[...C,{type:"image",url:`${yl.target.result}`}])},De.readAsDataURL(Zt)}else Ce.includes(Zt.type)||Ve.includes(Zt.name.split(".").at(-1))||gt.error(l.t("Unknown File Type '{{file_type}}', but accepting and treating as plain text",{file_type:Zt.type})),at(Zt)}):gt.error(l.t("File not found."))}e(15,k=!1)};return window.addEventListener("keydown",j),p==null||p.addEventListener("dragover",W),p==null||p.addEventListener("drop",Y),p==null||p.addEventListener("dragleave",O),()=>{window.removeEventListener("keydown",j),p==null||p.removeEventListener("dragover",W),p==null||p.removeEventListener("drop",Y),p==null||p.removeEventListener("dragleave",O)}});const Ct=()=>{e(1,c=!0),Tt()};function qt(p){ut[p?"unshift":"push"](()=>{_=p,e(11,_)})}function Yt(p){V=p,e(0,V)}function A(p){ut[p?"unshift":"push"](()=>{v=p,e(12,v)})}function Vt(p){V=p,e(0,V)}const se=p=>{console.log(p),Gt(p.detail)},ae=p=>{console.log(p),_t(p.detail)},ot=p=>{var j;console.log(p),e(3,C=[...C,{type:((j=p==null?void 0:p.detail)==null?void 0:j.type)??"doc",...p.detail,upload_status:!0}])};function ft(p){ut[p?"unshift":"push"](()=>{w=p,e(13,w)})}function ce(p){V=p,e(0,V)}function St(p){S=p,e(16,S)}function ue(p){L=p,e(17,L)}const ve=p=>{e(2,f=p.detail),m==null||m.focus()},be=p=>p.tagName===f.id,we=()=>{e(2,f="")};function ee(p){ut[p?"unshift":"push"](()=>{g=p,e(10,g)})}function rt(){E=this.files,e(14,E)}const dt=async()=>{E&&E.length>0?Array.from(E).forEach(j=>{if(["image/gif","image/jpeg","image/png"].includes(j.type)){let W=new FileReader;W.onload=O=>{e(3,C=[...C,{type:"image",url:`${O.target.result}`}]),e(14,E=null),e(10,g.value="",g)},W.readAsDataURL(j)}else Ce.includes(j.type)||Ve.includes(j.name.split(".").at(-1))?(at(j),e(10,g.value="",g)):(gt.error(l.t("Unknown File Type '{{file_type}}', but accepting and treating as plain text",{file_type:j.type})),at(j),e(10,g.value="",g))}):gt.error(l.t("File not found."))},it=p=>{C.splice(p,1),e(3,C)},fe=()=>{g.click()};function Bt(p){ut[p?"unshift":"push"](()=>{m=p,e(9,m),e(0,V)})}function de(){V=this.value,e(0,V)}const H=p=>{(window.innerWidth>1024||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(p.keyCode==13&&!p.shiftKey&&p.preventDefault(),V!==""&&p.keyCode==13&&!p.shiftKey&&a(V,S))},q=async p=>{var W;const j=p.ctrlKey||p.metaKey;if(V===""&&j&&p.key.toLowerCase()==="r"){p.preventDefault(),console.log("regenerate");const O=[...document.getElementsByClassName("regenerate-response-button")].at(-1);O==null||O.click()}if(V===""&&p.key=="ArrowUp"){p.preventDefault();const O=[...document.getElementsByClassName("user-message")].at(-1),Y=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(O),O.scrollIntoView({block:"center"}),Y==null||Y.click()}if(["/","#","@"].includes(V.charAt(0))&&p.key==="ArrowUp"&&(p.preventDefault(),(_||v||w).selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(V.charAt(0))&&p.key==="ArrowDown"&&(p.preventDefault(),(_||v||w).selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(V.charAt(0))&&p.key==="Enter"){p.preventDefault();const O=[...document.getElementsByClassName("selected-command-option-button")].at(-1);O?O==null||O.click():(W=document.getElementById("send-message-button"))==null||W.click()}if(["/","#","@"].includes(V.charAt(0))&&p.key==="Tab"){p.preventDefault();const O=[...document.getElementsByClassName("selected-command-option-button")].at(-1);O==null||O.click()}else if(p.key==="Tab"){const O=vl(V);if(O.length>0){const Y=O.at(0),ht=V;e(0,V=V.substring(0,(Y==null?void 0:Y.endIndex)+1)),await vt(),p.target.scrollTop=p.target.scrollHeight,e(0,V=ht),await vt(),p.preventDefault(),p.target.setSelectionRange(Y==null?void 0:Y.startIndex,Y.endIndex+1)}p.target.style.height="",p.target.style.height=Math.min(p.target.scrollHeight,200)+"px"}p.key==="Escape"&&(console.log("Escape"),e(2,f=""))},Lt=p=>{p.target.style.height="",p.target.style.height=Math.min(p.target.scrollHeight,200)+"px",e(16,S=null)},At=p=>{p.target.style.height="",p.target.style.height=Math.min(p.target.scrollHeight,200)+"px"},Ht=p=>{const j=p.clipboardData||window.clipboardData;if(j&&j.items){for(const W of j.items)if(W.type.indexOf("image")!==-1){const O=W.getAsFile(),Y=new FileReader;Y.onload=function(ht){e(3,C=[...C,{type:"image",url:`${ht.target.result}`}])},Y.readAsDataURL(O)}}},he=()=>{Wt()},Xt=()=>{a(V,S)};return n.$$set=p=>{"submitPrompt"in p&&e(4,a=p.submitPrompt),"stopResponse"in p&&e(5,u=p.stopResponse),"autoScroll"in p&&e(1,c=p.autoScroll),"selectedModel"in p&&e(2,f=p.selectedModel),"files"in p&&e(3,C=p.files),"fileUploadEnabled"in p&&e(6,M=p.fileUploadEnabled),"speechRecognitionEnabled"in p&&e(7,T=p.speechRecognitionEnabled),"prompt"in p&&e(0,V=p.prompt),"messages"in p&&e(8,Z=p.messages)},n.$$.update=()=>{n.$$.dirty[0]&513&&V&&m&&(e(9,m.style.height="",m),e(9,m.style.height=Math.min(m.scrollHeight,200)+"px",m))},[V,c,f,C,a,u,M,T,Z,m,g,_,v,w,E,k,S,L,F,l,r,o,i,Tt,Wt,at,_t,Gt,Ct,qt,Yt,A,Vt,se,ae,ot,ft,ce,St,ue,ve,be,we,ee,rt,dt,it,fe,Bt,de,H,q,Lt,At,Ht,he,Xt]}class ro extends It{constructor(t){super(),Mt(this,t,os,ss,Dt,{submitPrompt:4,stopResponse:5,autoScroll:1,selectedModel:2,files:3,fileUploadEnabled:6,speechRecognitionEnabled:7,prompt:0,messages:8},null,[-1,-1,-1])}}function rl(n,t,e){const l=n.slice();return l[12]=t[e],l[13]=t,l[14]=e,l}function rs(n){let t,e,l;return e=new $t({props:{content:n[4].t("Remove Model"),$$slots:{default:[as]},$$scope:{ctx:n}}}),{c(){t=D("div"),$(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{class:!0});var r=y(t);tt(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"class","self-center disabled:text-gray-600 disabled:hover:text-gray-600 mr-2")},m(s,r){B(s,t,r),et(e,t,null),l=!0},p(s,r){const o={};r&16&&(o.content=s[4].t("Remove Model")),r&32771&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&h(t),lt(e)}}}function is(n){let t,e,l;return e=new $t({props:{content:n[4].t("Add Model"),$$slots:{default:[cs]},$$scope:{ctx:n}}}),{c(){t=D("div"),$(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{class:!0});var r=y(t);tt(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"class","self-center mr-2 disabled:text-gray-600 disabled:hover:text-gray-600")},m(s,r){B(s,t,r),et(e,t,null),l=!0},p(s,r){const o={};r&16&&(o.content=s[4].t("Add Model")),r&32771&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&h(t),lt(e)}}}function as(n){let t,e,l,s,r;function o(){return n[9](n[14])}return{c(){t=D("button"),e=J("svg"),l=J("path"),this.h()},l(i){t=I(i,"BUTTON",{});var a=y(t);e=x(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=y(e);l=x(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(l).forEach(h),u.forEach(h),a.forEach(h),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M19.5 12h-15"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","2"),d(e,"stroke","currentColor"),d(e,"class","size-3.5"),t.disabled=n[1]},m(i,a){B(i,t,a),b(t,e),b(e,l),s||(r=P(t,"click",o),s=!0)},p(i,a){n=i,a&2&&(t.disabled=n[1])},d(i){i&&h(t),s=!1,r()}}}function cs(n){let t,e,l,s,r;return{c(){t=D("button"),e=J("svg"),l=J("path"),this.h()},l(o){t=I(o,"BUTTON",{class:!0});var i=y(t);e=x(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=y(e);l=x(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(l).forEach(h),a.forEach(h),i.forEach(h),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M12 6v12m6-6H6"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","2"),d(e,"stroke","currentColor"),d(e,"class","size-3.5"),d(t,"class",""),t.disabled=n[1]},m(o,i){B(o,t,i),b(t,e),b(e,l),s||(r=P(t,"click",n[8]),s=!0)},p(o,i){i&2&&(t.disabled=o[1])},d(o){o&&h(t),s=!1,r()}}}function il(n){let t,e,l,s,r,o,i,a,u,c;function f(w){n[7](w,n[12],n[13],n[14])}let m={placeholder:n[4].t("Select a model"),items:n[3].filter(cl).map(ul)};n[12]!==void 0&&(m.value=n[12]),s=new jl({props:m}),ut.push(()=>Jt(s,"value",f));const g=[is,rs],_=[];function v(w,E){return w[14]===0?0:1}return i=v(n),a=_[i]=g[i](n),{c(){t=D("div"),e=D("div"),l=D("div"),$(s.$$.fragment),o=R(),a.c(),u=R(),this.h()},l(w){t=I(w,"DIV",{class:!0});var E=y(t);e=I(E,"DIV",{class:!0});var k=y(e);l=I(k,"DIV",{class:!0});var S=y(l);tt(s.$$.fragment,S),S.forEach(h),k.forEach(h),o=z(E),a.l(E),u=z(E),E.forEach(h),this.h()},h(){d(l,"class","mr-1 max-w-full"),d(e,"class","overflow-hidden w-full"),d(t,"class","flex w-full max-w-fit")},m(w,E){B(w,t,E),b(t,e),b(e,l),et(s,l,null),b(t,o),_[i].m(t,null),b(t,u),c=!0},p(w,E){n=w;const k={};E&16&&(k.placeholder=n[4].t("Select a model")),E&8&&(k.items=n[3].filter(cl).map(ul)),!r&&E&1&&(r=!0,k.value=n[12],Kt(()=>r=!1)),s.$set(k),a.p(n,E)},i(w){c||(N(s.$$.fragment,w),N(a),c=!0)},o(w){U(s.$$.fragment,w),U(a),c=!1},d(w){w&&h(t),lt(s),_[i].d()}}}function al(n){let t,e,l=n[4].t("Set as default")+"",s,r,o;return{c(){t=D("div"),e=D("button"),s=Q(l),this.h()},l(i){t=I(i,"DIV",{class:!0});var a=y(t);e=I(a,"BUTTON",{});var u=y(e);s=K(u,l),u.forEach(h),a.forEach(h),this.h()},h(){d(t,"class","text-left mt-0.5 ml-1 text-[0.7rem] text-gray-500")},m(i,a){B(i,t,a),b(t,e),b(e,s),r||(o=P(e,"click",n[6]),r=!0)},p(i,a){a&16&&l!==(l=i[4].t("Set as default")+"")&&st(s,l)},d(i){i&&h(t),r=!1,o()}}}function us(n){let t,e,l,s,r=Ut(n[0]),o=[];for(let u=0;u<r.length;u+=1)o[u]=il(rl(n,r,u));const i=u=>U(o[u],1,1,()=>{o[u]=null});let a=n[2]&&al(n);return{c(){t=D("div");for(let u=0;u<o.length;u+=1)o[u].c();e=R(),a&&a.c(),l=mt(),this.h()},l(u){t=I(u,"DIV",{class:!0});var c=y(t);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(h),e=z(u),a&&a.l(u),l=mt(),this.h()},h(){d(t,"class","flex flex-col mt-0.5 w-full")},m(u,c){B(u,t,c);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(t,null);B(u,e,c),a&&a.m(u,c),B(u,l,c),s=!0},p(u,[c]){if(c&27){r=Ut(u[0]);let f;for(f=0;f<r.length;f+=1){const m=rl(u,r,f);o[f]?(o[f].p(m,c),N(o[f],1)):(o[f]=il(m),o[f].c(),N(o[f],1),o[f].m(t,null))}for(yt(),f=r.length;f<o.length;f+=1)i(f);Et()}u[2]?a?a.p(u,c):(a=al(u),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},i(u){if(!s){for(let c=0;c<r.length;c+=1)N(o[c]);s=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)U(o[c]);s=!1},d(u){u&&(h(t),h(e),h(l)),ie(o,u),a&&a.d(u)}}}const cl=n=>n.name!=="hr",ul=n=>({value:n.id,label:n.name,info:n});function fs(n,t,e){let l,s,r,o;nt(n,pl,v=>e(3,l=v)),nt(n,Sl,v=>e(10,r=v)),nt(n,ye,v=>e(11,o=v));const i=te("i18n");nt(n,i,v=>e(4,s=v));let{selectedModels:a=[""]}=t,{disabled:u=!1}=t,{showSetDefault:c=!0}=t;const f=async()=>{if(a.filter(w=>w==="").length){gt.error(s.t("Choose a model before saving..."));return}ye.set({...o,models:a}),localStorage.setItem("settings",JSON.stringify(o)),r.role==="admin"&&(console.log("setting default models globally"),await Ol(localStorage.token,a.join(","))),gt.success(s.t("Default model updated"))};function m(v,w,E,k){E[k]=v,e(0,a),e(3,l)}const g=()=>{e(0,a=[...a,""])},_=v=>{a.splice(v,1),e(0,a),e(3,l)};return n.$$set=v=>{"selectedModels"in v&&e(0,a=v.selectedModels),"disabled"in v&&e(1,u=v.disabled),"showSetDefault"in v&&e(2,c=v.showSetDefault)},n.$$.update=()=>{n.$$.dirty&9&&a.length>0&&l.length>0&&e(0,a=a.map(v=>l.map(w=>w.id).includes(v)?v:""))},[a,u,c,l,s,i,f,m,g,_]}class ds extends It{constructor(t){super(),Mt(this,t,fs,us,Dt,{selectedModels:0,disabled:1,showSetDefault:2})}}function hs(n){let t;const e=n[10].default,l=Ot(e,n,n[16],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,r){l&&l.p&&(!t||r&65536)&&Pt(l,e,s,s[16],t?zt(e,s[16],r,null):Rt(s[16]),null)},i(s){t||(N(l,s),t=!0)},o(s){U(l,s),t=!1},d(s){l&&l.d(s)}}}function ms(n){let t,e,l,s,r,o=n[5].t("Settings")+"",i;return{c(){t=J("svg"),e=J("path"),l=J("path"),s=R(),r=D("div"),i=Q(o),this.h()},l(a){t=x(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=y(t);e=x(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(e).forEach(h),l=x(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(l).forEach(h),u.forEach(h),s=z(a),r=I(a,"DIV",{class:!0});var c=y(r);i=K(c,o),c.forEach(h),this.h()},h(){d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"d","M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"),d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","1.5"),d(t,"stroke","currentColor"),d(t,"class","size-4"),d(r,"class","flex items-center")},m(a,u){B(a,t,u),b(t,e),b(t,l),B(a,s,u),B(a,r,u),b(r,i)},p(a,u){u&32&&o!==(o=a[5].t("Settings")+"")&&st(i,o)},d(a){a&&(h(t),h(s),h(r))}}}function fl(n){let t,e,l,s,r,o,i,a,u;return t=new pe({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[_s]},$$scope:{ctx:n}}}),t.$on("click",n[12]),l=new tn({props:{$$slots:{default:[ws]},$$scope:{ctx:n}}}),a=new Rl({props:{chatId:n[2].id}}),{c(){$(t.$$.fragment),e=R(),$(l.$$.fragment),s=R(),r=D("hr"),o=R(),i=D("div"),$(a.$$.fragment),this.h()},l(c){tt(t.$$.fragment,c),e=z(c),tt(l.$$.fragment,c),s=z(c),r=I(c,"HR",{class:!0}),o=z(c),i=I(c,"DIV",{class:!0});var f=y(i);tt(a.$$.fragment,f),f.forEach(h),this.h()},h(){d(r,"class","border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5"),d(i,"class","flex p-1")},m(c,f){et(t,c,f),B(c,e,f),et(l,c,f),B(c,s,f),B(c,r,f),B(c,o,f),B(c,i,f),et(a,i,null),u=!0},p(c,f){const m={};f&65568&&(m.$$scope={dirty:f,ctx:c}),t.$set(m);const g={};f&65568&&(g.$$scope={dirty:f,ctx:c}),l.$set(g);const _={};f&4&&(_.chatId=c[2].id),a.$set(_)},i(c){u||(N(t.$$.fragment,c),N(l.$$.fragment,c),N(a.$$.fragment,c),u=!0)},o(c){U(t.$$.fragment,c),U(l.$$.fragment,c),U(a.$$.fragment,c),u=!1},d(c){c&&(h(e),h(s),h(r),h(o),h(i)),lt(t,c),lt(l,c),lt(a)}}}function _s(n){let t,e,l,s,r=n[5].t("Share")+"",o;return{c(){t=J("svg"),e=J("path"),l=R(),s=D("div"),o=Q(r),this.h()},l(i){t=x(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=y(t);e=x(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(e).forEach(h),a.forEach(h),l=z(i),s=I(i,"DIV",{class:!0});var u=y(s);o=K(u,r),u.forEach(h),this.h()},h(){d(e,"fill-rule","evenodd"),d(e,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),d(e,"clip-rule","evenodd"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"fill","currentColor"),d(t,"class","size-4"),d(s,"class","flex items-center")},m(i,a){B(i,t,a),b(t,e),B(i,l,a),B(i,s,a),b(s,o)},p(i,a){a&32&&r!==(r=i[5].t("Share")+"")&&st(o,r)},d(i){i&&(h(t),h(l),h(s))}}}function gs(n){let t,e,l,s,r=n[5].t("Download")+"",o;return{c(){t=J("svg"),e=J("path"),l=R(),s=D("div"),o=Q(r),this.h()},l(i){t=x(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=y(t);e=x(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(e).forEach(h),a.forEach(h),l=z(i),s=I(i,"DIV",{class:!0});var u=y(s);o=K(u,r),u.forEach(h),this.h()},h(){d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","1.5"),d(t,"stroke","currentColor"),d(t,"class","size-4"),d(s,"class","flex items-center")},m(i,a){B(i,t,a),b(t,e),B(i,l,a),B(i,s,a),b(s,o)},p(i,a){a&32&&r!==(r=i[5].t("Download")+"")&&st(o,r)},d(i){i&&(h(t),h(l),h(s))}}}function ps(n){let t,e=n[5].t("Plain text (.txt)")+"",l;return{c(){t=D("div"),l=Q(e),this.h()},l(s){t=I(s,"DIV",{class:!0});var r=y(t);l=K(r,e),r.forEach(h),this.h()},h(){d(t,"class","flex items-center line-clamp-1")},m(s,r){B(s,t,r),b(t,l)},p(s,r){r&32&&e!==(e=s[5].t("Plain text (.txt)")+"")&&st(l,e)},d(s){s&&h(t)}}}function vs(n){let t,e=n[5].t("PDF document (.pdf)")+"",l;return{c(){t=D("div"),l=Q(e),this.h()},l(s){t=I(s,"DIV",{class:!0});var r=y(t);l=K(r,e),r.forEach(h),this.h()},h(){d(t,"class","flex items-center line-clamp-1")},m(s,r){B(s,t,r),b(t,l)},p(s,r){r&32&&e!==(e=s[5].t("PDF document (.pdf)")+"")&&st(l,e)},d(s){s&&h(t)}}}function bs(n){let t,e,l,s;return t=new pe({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[ps]},$$scope:{ctx:n}}}),t.$on("click",n[13]),l=new pe({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[vs]},$$scope:{ctx:n}}}),l.$on("click",n[14]),{c(){$(t.$$.fragment),e=R(),$(l.$$.fragment)},l(r){tt(t.$$.fragment,r),e=z(r),tt(l.$$.fragment,r)},m(r,o){et(t,r,o),B(r,e,o),et(l,r,o),s=!0},p(r,o){const i={};o&65568&&(i.$$scope={dirty:o,ctx:r}),t.$set(i);const a={};o&65568&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){s||(N(t.$$.fragment,r),N(l.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),U(l.$$.fragment,r),s=!1},d(r){r&&h(e),lt(t,r),lt(l,r)}}}function ws(n){let t,e,l,s;return t=new En({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[gs]},$$scope:{ctx:n}}}),l=new gn({props:{class:"w-full rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-900 dark:text-white shadow-lg",transition:wl,sideOffset:8,$$slots:{default:[bs]},$$scope:{ctx:n}}}),{c(){$(t.$$.fragment),e=R(),$(l.$$.fragment)},l(r){tt(t.$$.fragment,r),e=z(r),tt(l.$$.fragment,r)},m(r,o){et(t,r,o),B(r,e,o),et(l,r,o),s=!0},p(r,o){const i={};o&65568&&(i.$$scope={dirty:o,ctx:r}),t.$set(i);const a={};o&65568&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){s||(N(t.$$.fragment,r),N(l.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),U(l.$$.fragment,r),s=!1},d(r){r&&h(e),lt(t,r),lt(l,r)}}}function ks(n){let t,e,l,s;t=new pe({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[ms]},$$scope:{ctx:n}}}),t.$on("click",n[11]);let r=n[0]&&fl(n);return{c(){$(t.$$.fragment),e=R(),r&&r.c(),l=mt()},l(o){tt(t.$$.fragment,o),e=z(o),r&&r.l(o),l=mt()},m(o,i){et(t,o,i),B(o,e,i),r&&r.m(o,i),B(o,l,i),s=!0},p(o,i){const a={};i&65568&&(a.$$scope={dirty:i,ctx:o}),t.$set(a),o[0]?r?(r.p(o,i),i&1&&N(r,1)):(r=fl(o),r.c(),N(r,1),r.m(l.parentNode,l)):r&&(yt(),U(r,1,1,()=>{r=null}),Et())},i(o){s||(N(t.$$.fragment,o),N(r),s=!0)},o(o){U(t.$$.fragment,o),U(r),s=!1},d(o){o&&(h(e),h(l)),lt(t,o),r&&r.d(o)}}}function ys(n){let t,e,l;return e=new Yl({props:{class:"w-full max-w-[200px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-900 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:wl,$$slots:{default:[ks]},$$scope:{ctx:n}}}),{c(){t=D("div"),$(e.$$.fragment),this.h()},l(s){t=I(s,"DIV",{slot:!0});var r=y(t);tt(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"slot","content")},m(s,r){B(s,t,r),et(e,t,null),l=!0},p(s,r){const o={};r&65591&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(N(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){s&&h(t),lt(e)}}}function Es(n){let t,e;return t=new Pl({props:{$$slots:{content:[ys],default:[hs]},$$scope:{ctx:n}}}),t.$on("change",n[15]),{c(){$(t.$$.fragment)},l(l){tt(t.$$.fragment,l)},m(l,s){et(t,l,s),e=!0},p(l,[s]){const r={};s&65591&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){e||(N(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){lt(t,l)}}}function Ds(n,t,e){let l,s;nt(n,ge,C=>e(4,l=C));let{$$slots:r={},$$scope:o}=t;const{saveAs:i}=Ql,a=te("i18n");nt(n,a,C=>e(5,s=C));let{shareEnabled:u=!1}=t,{shareHandler:c}=t,{downloadHandler:f}=t,{chat:m}=t,{onClose:g=()=>{}}=t;const _=async()=>{const C=m.chat;console.log("download",m);const M=C.messages.reduce((V,Z,X,G)=>`${V}### ${Z.role.toUpperCase()}
${Z.content}

`,"");let T=new Blob([M],{type:"text/plain"});i(T,`chat-${C.title}.txt`)},v=async()=>{const C=m.chat;console.log("download",m);const M=await Kl(C),T=window.URL.createObjectURL(M),V=document.createElement("a");V.href=T,V.download=`chat-${C.title}.pdf`,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(T)},w=async()=>{await ge.set(!l)},E=()=>{c()},k=()=>{_()},S=()=>{v()},L=C=>{C.detail===!1&&g()};return n.$$set=C=>{"shareEnabled"in C&&e(0,u=C.shareEnabled),"shareHandler"in C&&e(1,c=C.shareHandler),"downloadHandler"in C&&e(9,f=C.downloadHandler),"chat"in C&&e(2,m=C.chat),"onClose"in C&&e(3,g=C.onClose),"$$scope"in C&&e(16,o=C.$$scope)},[u,c,m,g,l,s,a,_,v,f,r,w,E,k,S,L,o]}class Is extends It{constructor(t){super(),Mt(this,t,Ds,Es,Dt,{shareEnabled:0,shareHandler:1,downloadHandler:9,chat:2,onClose:3})}}function dl(n){let t,e,l;function s(o){n[13](o)}let r={showSetDefault:!n[2]};return n[0]!==void 0&&(r.selectedModels=n[0]),t=new ds({props:r}),ut.push(()=>Jt(t,"selectedModels",s)),{c(){$(t.$$.fragment)},l(o){tt(t.$$.fragment,o)},m(o,i){et(t,o,i),l=!0},p(o,i){const a={};i&4&&(a.showSetDefault=!o[2]),!e&&i&1&&(e=!0,a.selectedModels=o[0],Kt(()=>e=!1)),t.$set(a)},i(o){l||(N(t.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),l=!1},d(o){lt(t,o)}}}function Ms(n){let t,e;return t=new Is({props:{chat:n[3],shareEnabled:n[2],shareHandler:n[15],downloadHandler:n[16],$$slots:{default:[Cs]},$$scope:{ctx:n}}}),{c(){$(t.$$.fragment)},l(l){tt(t.$$.fragment,l)},m(l,s){et(t,l,s),e=!0},p(l,s){const r={};s&8&&(r.chat=l[3]),s&4&&(r.shareEnabled=l[2]),s&32&&(r.shareHandler=l[15]),s&64&&(r.downloadHandler=l[16]),s&524288&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){e||(N(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){lt(t,l)}}}function Ts(n){let t,e;return t=new $t({props:{content:n[8].t("Settings"),$$slots:{default:[Vs]},$$scope:{ctx:n}}}),{c(){$(t.$$.fragment)},l(l){tt(t.$$.fragment,l)},m(l,s){et(t,l,s),e=!0},p(l,s){const r={};s&256&&(r.content=l[8].t("Settings")),s&524800&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){e||(N(t.$$.fragment,l),e=!0)},o(l){U(t.$$.fragment,l),e=!1},d(l){lt(t,l)}}}function Cs(n){let t,e='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){t=D("button"),t.innerHTML=e,this.h()},l(l){t=I(l,"BUTTON",{class:!0,"data-svelte-h":!0}),wt(t)!=="svelte-sw01s9"&&(t.innerHTML=e),this.h()},h(){d(t,"class","cursor-pointer p-1.5 flex dark:hover:bg-gray-700 rounded-full transition")},m(l,s){B(l,t,s)},p:pt,d(l){l&&h(t)}}}function Vs(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=I(r,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),wt(t)!=="svelte-18q4zlt"&&(t.innerHTML=e),this.h()},h(){d(t,"class","cursor-pointer p-1.5 flex dark:hover:bg-gray-700 rounded-full transition"),d(t,"id","open-settings-button")},m(r,o){B(r,t,o),l||(s=P(t,"click",n[14]),l=!0)},p:pt,d(r){r&&h(t),l=!1,s()}}}function Ss(n){let t,e='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"></path><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"></path></svg></div>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=I(r,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),wt(t)!=="svelte-1lsyhb0"&&(t.innerHTML=e),this.h()},h(){d(t,"id","new-chat-button"),d(t,"class","cursor-pointer p-1.5 flex dark:hover:bg-gray-700 rounded-full transition")},m(r,o){B(r,t,o),l||(s=P(t,"click",n[17]),l=!0)},p:pt,d(r){r&&h(t),l=!1,s()}}}function Bs(n){let t,e,l,s,r,o,i,a,u,c,f,m,g,_,v,w;function E(T){n[12](T)}let k={chatId:n[7]};n[5]!==void 0&&(k.show=n[5]),t=new zl({props:k}),ut.push(()=>Jt(t,"show",E));let S=n[4]&&dl(n);const L=[Ts,Ms],C=[];function M(T,V){return T[2]?1:0}return m=M(n),g=C[m]=L[m](n),v=new $t({props:{content:n[8].t("New Chat"),$$slots:{default:[Ss]},$$scope:{ctx:n}}}),{c(){$(t.$$.fragment),l=R(),s=D("nav"),r=D("div"),o=D("div"),i=D("div"),S&&S.c(),a=R(),u=D("div"),c=D("div"),f=R(),g.c(),_=R(),$(v.$$.fragment),this.h()},l(T){tt(t.$$.fragment,T),l=z(T),s=I(T,"NAV",{id:!0,class:!0});var V=y(s);r=I(V,"DIV",{class:!0});var Z=y(r);o=I(Z,"DIV",{class:!0});var X=y(o);i=I(X,"DIV",{class:!0});var G=y(i);S&&S.l(G),G.forEach(h),a=z(X),u=I(X,"DIV",{class:!0});var ct=y(u);c=I(ct,"DIV",{class:!0}),y(c).forEach(h),f=z(ct),g.l(ct),_=z(ct),tt(v.$$.fragment,ct),ct.forEach(h),X.forEach(h),Z.forEach(h),V.forEach(h),this.h()},h(){d(i,"class","flex-1 overflow-hidden max-w-full"),d(c,"class","md:hidden flex self-center w-[1px] h-5 mx-2 bg-gray-300 dark:bg-stone-700"),d(u,"class","self-start flex flex-none items-center"),d(o,"class","flex items-center w-full max-w-full"),d(r,"class","flex max-w-full w-full mx-auto px-5 pt-0.5 md:px-[1.3rem]"),d(s,"id","nav"),d(s,"class","sticky py-2.5 top-0 flex flex-row justify-center z-30")},m(T,V){et(t,T,V),B(T,l,V),B(T,s,V),b(s,r),b(r,o),b(o,i),S&&S.m(i,null),b(o,a),b(o,u),b(u,c),b(u,f),C[m].m(u,null),b(u,_),et(v,u,null),w=!0},p(T,[V]){const Z={};V&128&&(Z.chatId=T[7]),!e&&V&32&&(e=!0,Z.show=T[5],Kt(()=>e=!1)),t.$set(Z),T[4]?S?(S.p(T,V),V&16&&N(S,1)):(S=dl(T),S.c(),N(S,1),S.m(i,null)):S&&(yt(),U(S,1,1,()=>{S=null}),Et());let X=m;m=M(T),m===X?C[m].p(T,V):(yt(),U(C[X],1,1,()=>{C[X]=null}),Et(),g=C[m],g?g.p(T,V):(g=C[m]=L[m](T),g.c()),N(g,1),g.m(u,_));const G={};V&256&&(G.content=T[8].t("New Chat")),V&524290&&(G.$$scope={dirty:V,ctx:T}),v.$set(G)},i(T){w||(N(t.$$.fragment,T),N(S),N(g),N(v.$$.fragment,T),w=!0)},o(T){U(t.$$.fragment,T),U(S),U(g),U(v.$$.fragment,T),w=!1},d(T){T&&(h(l),h(s)),lt(t,T),S&&S.d(),C[m].d(),lt(v)}}}function Ls(n,t,e){let l,s,r,o;nt(n,Bl,M=>e(18,l=M)),nt(n,Ll,M=>e(7,s=M)),nt(n,ge,M=>e(9,o=M));const i=te("i18n");nt(n,i,M=>e(8,r=M));let{initNewChat:a}=t,{title:u=l}=t,{shareEnabled:c=!1}=t,{chat:f}=t,{selectedModels:m}=t,{showModelSelector:g=!0}=t,_=!1,v=!1;function w(M){_=M,e(5,_)}function E(M){m=M,e(0,m)}const k=async()=>{await ge.set(!o)},S=()=>{e(5,_=!_)},L=()=>{e(6,v=!v)},C=()=>{a()};return n.$$set=M=>{"initNewChat"in M&&e(1,a=M.initNewChat),"title"in M&&e(11,u=M.title),"shareEnabled"in M&&e(2,c=M.shareEnabled),"chat"in M&&e(3,f=M.chat),"selectedModels"in M&&e(0,m=M.selectedModels),"showModelSelector"in M&&e(4,g=M.showModelSelector)},[m,a,c,f,g,_,v,s,r,o,i,u,w,E,k,S,L,C]}class io extends It{constructor(t){super(),Mt(this,t,Ls,Bs,Dt,{initNewChat:1,title:11,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function As(n){let t,e,l,s,r,o,i;return a(),{feed:u,reset:a};function a(){t=!0,e="",l=0,s=-1,r=void 0,o=void 0,i=""}function u(f){e=e?e+f:f,t&&Hs(e)&&(e=e.slice(kl.length)),t=!1;const m=e.length;let g=0,_=!1;for(;g<m;){_&&(e[g]===`
`&&++g,_=!1);let v=-1,w=s,E;for(let k=l;v<0&&k<m;++k)E=e[k],E===":"&&w<0?w=k-g:E==="\r"?(_=!0,v=k-g):E===`
`&&(v=k-g);if(v<0){l=m-g,s=w;break}else l=0,s=-1;c(e,g,w,v),g+=v+1}g===m?e="":g>0&&(e=e.slice(g))}function c(f,m,g,_){if(_===0){i.length>0&&(n({type:"event",id:r,event:o||void 0,data:i.slice(0,-1)}),i="",r=void 0),o=void 0;return}const v=g<0,w=f.slice(m,m+(v?_:g));let E=0;v?E=_:f[m+g+1]===" "?E=g+2:E=g+1;const k=m+E,S=_-E,L=f.slice(k,k+S).toString();if(w==="data")i+=L?"".concat(L,`
`):`
`;else if(w==="event")o=L;else if(w==="id"&&!L.includes("\0"))r=L;else if(w==="retry"){const C=parseInt(L,10);Number.isNaN(C)||n({type:"reconnect-interval",value:C})}}}const kl=[239,187,191];function Hs(n){return kl.every((t,e)=>n.charCodeAt(e)===t)}class Ns extends TransformStream{constructor(){let t;super({start(e){t=As(l=>{l.type==="event"&&e.enqueue(l)})},transform(e){t.feed(e)}})}}async function ao(n,t){const e=n.pipeThrough(new TextDecoderStream).pipeThrough(new Ns).getReader();let l=Us(e);return t&&(l=Os(l)),l}async function*Us(n){var t,e,l;for(;;){const{value:s,done:r}=await n.read();if(r){yield{done:!0,value:""};break}if(!s)continue;const o=s.data;if(o.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const i=JSON.parse(o);if(console.log(i),i.error){yield{done:!0,value:"",error:i.error};break}if(i.citations){yield{done:!1,value:"",citations:i.citations};continue}yield{done:!1,value:((l=(e=(t=i.choices)==null?void 0:t[0])==null?void 0:e.delta)==null?void 0:l.content)??""}}catch(i){console.error("Error extracting delta from SSE event:",i)}}}async function*Os(n){for await(const t of n){if(t.done){yield t;return}if(t.citations){yield t;continue}let e=t.value;if(e.length<5){yield{done:!1,value:e};continue}for(;e!="";){const l=Math.min(Math.floor(Math.random()*3)+1,e.length);yield{done:!1,value:e.slice(0,l)},(document==null?void 0:document.visibilityState)!=="hidden"&&await Ps(5),e=e.slice(l)}}}const Ps=n=>new Promise(t=>setTimeout(t,n));export{ro as M,io as N,ao as c};
