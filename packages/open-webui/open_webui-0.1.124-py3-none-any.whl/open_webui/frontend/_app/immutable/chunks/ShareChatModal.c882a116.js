import{n as Se,e as ae,i as ne,j as Me}from"./index.bf1cda65.js";import{s as J,e as Q,i as C,d as m,I as pe,w as Z,x as ue,y as Ue,p as de,E as x,F as ee,G as te,H as se,f as I,g as T,h as B,$ as ge,_ as De,u as D,v as Ie,Y as Te,X as Ee,a as M,c as U,R as le,j as b,C as q,o as Ne,z as oe,A as re,r as y,P as Oe,l as N,m as O,n as A}from"./scheduler.7238b518.js";import{S as F,i as G,g as Be,t as E,c as je,a as S,f as Le,b as z,d as R,m as W,e as H}from"./index.4c8b96e2.js";import"./create.92fd517e.js";import{g as Ae}from"./spread.8a54911c.js";import{a as Pe,d as Ve}from"./updater.f2a63360.js";import{d as ze,a as Re,b as We,M as He}from"./menu-trigger.45608dc4.js";import{f as Je}from"./index.1df8947f.js";import{m as Ye,n as Ze,u as we,k as be,o as qe,j as Fe,b as Ge,i as ie,s as Xe,p as Ke}from"./index.8cf31506.js";import{T as Qe}from"./Tags.83bbc638.js";import{a as ve}from"./Toaster.svelte_svelte_type_style_lang.93775e0f.js";import{a as xe}from"./index.2773335b.js";import{M as et}from"./dayjs.min.20eb4964.js";const Wt=async(a,e)=>{let s=null;const t=await fetch(`${Se}/configs/default/models`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({models:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(console.log(l),s=l.detail,null));if(s)throw s;return t},Ht=async(a,e)=>{let s=null;const t=await fetch(`${Se}/configs/default/suggestions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({suggestions:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(console.log(l),s=l.detail,null));if(s)throw s;return t},tt=a=>({builder:a&8}),ke=a=>({builder:a[3]}),st=a=>({builder:a&8}),ye=a=>({builder:a[3]});function lt(a){let e=a[1]?"a":"div",s,t,l=(a[1]?"a":"div")&&fe(a);return{c(){l&&l.c(),s=Q()},l(r){l&&l.l(r),s=Q()},m(r,n){l&&l.m(r,n),C(r,s,n),t=!0},p(r,n){r[1],e?J(e,r[1]?"a":"div")?(l.d(1),l=fe(r),e=r[1]?"a":"div",l.c(),l.m(s.parentNode,s)):l.p(r,n):(l=fe(r),e=r[1]?"a":"div",l.c(),l.m(s.parentNode,s))},i(r){t||(S(l,r),t=!0)},o(r){E(l,r),t=!1},d(r){r&&m(s),l&&l.d(r)}}}function at(a){let e;const s=a[11].default,t=x(s,a,a[10],ye);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&1032)&&ee(t,s,l,l[10],e?se(s,l[10],r,st):te(l[10]),ye)},i(l){e||(S(t,l),e=!0)},o(l){E(t,l),e=!1},d(l){t&&t.d(l)}}}function fe(a){let e,s,t,l;const r=a[11].default,n=x(r,a,a[10],ke);let o=[{href:a[1]},a[3],a[6]],i={};for(let f=0;f<o.length;f+=1)i=ue(i,o[f]);return{c(){e=I(a[1]?"a":"div"),n&&n.c(),this.h()},l(f){e=T(f,((a[1]?"a":"div")||"null").toUpperCase(),{href:!0});var d=B(e);n&&n.l(d),d.forEach(m),this.h()},h(){ge(a[1]?"a":"div")(e,i)},m(f,d){C(f,e,d),n&&n.m(e,null),a[12](e),s=!0,t||(l=[De(a[3].action(e)),D(e,"m-click",a[5]),D(e,"m-focusin",a[5]),D(e,"m-focusout",a[5]),D(e,"m-keydown",a[5]),D(e,"m-pointerdown",a[5]),D(e,"m-pointerleave",a[5]),D(e,"m-pointermove",a[5])],t=!0)},p(f,d){n&&n.p&&(!s||d&1032)&&ee(n,r,f,f[10],s?se(r,f[10],d,tt):te(f[10]),ke),ge(f[1]?"a":"div")(e,i=Ae(o,[(!s||d&2)&&{href:f[1]},d&8&&f[3],d&64&&f[6]]))},i(f){s||(S(n,f),s=!0)},o(f){E(n,f),s=!1},d(f){f&&m(e),n&&n.d(f),a[12](null),t=!1,Ie(l)}}}function nt(a){let e,s,t,l;const r=[at,lt],n=[];function o(i,f){return i[2]?0:1}return e=o(a),s=n[e]=r[e](a),{c(){s.c(),t=Q()},l(i){s.l(i),t=Q()},m(i,f){n[e].m(i,f),C(i,t,f),l=!0},p(i,[f]){let d=e;e=o(i),e===d?n[e].p(i,f):(Be(),E(n[d],1,1,()=>{n[d]=null}),je(),s=n[e],s?s.p(i,f):(s=n[e]=r[e](i),s.c()),S(s,1),s.m(t.parentNode,t))},i(i){l||(S(s),l=!0)},o(i){E(s),l=!1},d(i){i&&m(t),n[e].d(i)}}}function ot(a,e,s){let t,l;const r=["href","asChild","disabled","el"];let n=pe(e,r),o,{$$slots:i={},$$scope:f}=e,{href:d=void 0}=e,{asChild:c=!1}=e,{disabled:v=!1}=e,{el:_=void 0}=e;const{elements:{item:p},getAttrs:k}=ze();Z(a,p,g=>s(9,o=g));const j=Pe();function w(g){de[g?"unshift":"push"](()=>{_=g,s(0,_)})}return a.$$set=g=>{e=ue(ue({},e),Ue(g)),s(6,n=pe(e,r)),"href"in g&&s(1,d=g.href),"asChild"in g&&s(2,c=g.asChild),"disabled"in g&&s(7,v=g.disabled),"el"in g&&s(0,_=g.el),"$$scope"in g&&s(10,f=g.$$scope)},a.$$.update=()=>{a.$$.dirty&512&&s(3,t=o),a.$$.dirty&128&&s(8,l={...k("item"),...Ve(v)}),a.$$.dirty&264&&Object.assign(t,l)},[_,d,c,t,p,j,n,v,l,o,f,i,w]}class ce extends F{constructor(e){super(),G(this,e,ot,nt,J,{href:1,asChild:2,disabled:7,el:0})}}const rt=a=>({}),$e=a=>({});function it(a){let e;const s=a[2].default,t=x(s,a,a[5],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&32)&&ee(t,s,l,l[5],e?se(s,l[5],r,null):te(l[5]),null)},i(l){e||(S(t,l),e=!0)},o(l){E(t,l),e=!1},d(l){t&&t.d(l)}}}function ft(a){let e,s="Profile";return{c(){e=I("div"),e.textContent=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){b(e,"class","flex items-center")},m(t,l){C(t,e,l)},p:q,d(t){t&&m(e)}}}function ct(a){let e,s="Profile";return{c(){e=I("div"),e.textContent=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){b(e,"class","flex items-center")},m(t,l){C(t,e,l)},p:q,d(t){t&&m(e)}}}function ut(a){let e,s="Profile";return{c(){e=I("div"),e.textContent=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){b(e,"class","flex items-center")},m(t,l){C(t,e,l)},p:q,d(t){t&&m(e)}}}function dt(a){let e,s,t,l,r,n;return e=new ce({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[ft]},$$scope:{ctx:a}}}),t=new ce({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[ct]},$$scope:{ctx:a}}}),r=new ce({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[ut]},$$scope:{ctx:a}}}),{c(){z(e.$$.fragment),s=M(),z(t.$$.fragment),l=M(),z(r.$$.fragment)},l(o){R(e.$$.fragment,o),s=U(o),R(t.$$.fragment,o),l=U(o),R(r.$$.fragment,o)},m(o,i){W(e,o,i),C(o,s,i),W(t,o,i),C(o,l,i),W(r,o,i),n=!0},p(o,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:o}),e.$set(f);const d={};i&32&&(d.$$scope={dirty:i,ctx:o}),t.$set(d);const c={};i&32&&(c.$$scope={dirty:i,ctx:o}),r.$set(c)},i(o){n||(S(e.$$.fragment,o),S(t.$$.fragment,o),S(r.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(r.$$.fragment,o),n=!1},d(o){o&&(m(s),m(l)),H(e,o),H(t,o),H(r,o)}}}function mt(a){let e,s;return e=new He({props:{class:"w-full max-w-[130px] rounded-lg px-1 py-1.5 border border-gray-700 z-50 bg-gray-850 text-white",sideOffset:8,side:"bottom",align:"start",transition:Je,$$slots:{default:[dt]},$$scope:{ctx:a}}}),{c(){z(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p(t,l){const r={};l&32&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function _t(a){let e,s,t;e=new We({props:{$$slots:{default:[it]},$$scope:{ctx:a}}});const l=a[2].content,r=x(l,a,a[5],$e),n=r||mt(a);return{c(){z(e.$$.fragment),s=M(),n&&n.c()},l(o){R(e.$$.fragment,o),s=U(o),n&&n.l(o)},m(o,i){W(e,o,i),C(o,s,i),n&&n.m(o,i),t=!0},p(o,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:o}),e.$set(f),r&&r.p&&(!t||i&32)&&ee(r,l,o,o[5],t?se(l,o[5],i,rt):te(o[5]),$e)},i(o){t||(S(e.$$.fragment,o),S(n,o),t=!0)},o(o){E(e.$$.fragment,o),E(n,o),t=!1},d(o){o&&m(s),H(e,o),n&&n.d(o)}}}function ht(a){let e,s,t;function l(n){a[4](n)}let r={onOpenChange:a[3],$$slots:{default:[_t]},$$scope:{ctx:a}};return a[0]!==void 0&&(r.open=a[0]),e=new Re({props:r}),de.push(()=>Le(e,"open",l)),{c(){z(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){W(e,n,o),t=!0},p(n,[o]){const i={};o&32&&(i.$$scope={dirty:o,ctx:n}),!s&&o&1&&(s=!0,i.open=n[0],Te(()=>s=!1)),e.$set(i)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){E(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function pt(a,e,s){let{$$slots:t={},$$scope:l}=e,{show:r=!1}=e;const n=Ee(),o=f=>{n("change",f)};function i(f){r=f,s(0,r)}return a.$$set=f=>{"show"in f&&s(0,r=f.show),"$$scope"in f&&s(5,l=f.$$scope)},[r,n,t,o,i,l]}class Jt extends F{constructor(e){super(),G(this,e,pt,ht,J,{show:0})}}function gt(a){let e,s;return e=new Qe({props:{tags:a[0],deleteTag:a[2],addTag:a[1]}}),{c(){z(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p(t,[l]){const r={};l&1&&(r.tags=t[0]),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){H(e,t)}}}function wt(a,e,s){let t,l;Z(a,ae,c=>s(4,t=c)),Z(a,ne,c=>s(5,l=c));const r=Ee();let{chatId:n=""}=e,o=[];const i=async()=>await Ye(localStorage.token,n).catch(async c=>[]),f=async c=>{await Ze(localStorage.token,n,c),s(0,o=await i()),await we(localStorage.token,n,{tags:o}),ne.set(await be(localStorage.token))},d=async c=>{await qe(localStorage.token,n,c),s(0,o=await i()),await we(localStorage.token,n,{tags:o}),console.log(l),await ne.set(await be(localStorage.token)),console.log(l),l.map(v=>v.name).includes(c)?(await ae.set(await Fe(localStorage.token,c)),t.find(v=>v.id===n)&&r("close")):await ae.set(await Ge(localStorage.token))};return Ne(async()=>{n&&s(0,o=await i())}),a.$$set=c=>{"chatId"in c&&s(3,n=c.chatId)},[o,f,d,n]}class Yt extends F{constructor(e){super(),G(this,e,wt,gt,J,{chatId:3})}}function bt(a){let e,s,t;return{c(){e=oe("svg"),s=oe("path"),t=oe("path"),this.h()},l(l){e=re(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=B(e);s=re(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),B(s).forEach(m),t=re(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),B(t).forEach(m),r.forEach(m),this.h()},h(){b(s,"fill-rule","evenodd"),b(s,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),b(s,"clip-rule","evenodd"),b(t,"fill-rule","evenodd"),b(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),b(t,"clip-rule","evenodd"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 16 16"),b(e,"fill","currentColor"),b(e,"class",a[0])},m(l,r){C(l,e,r),y(e,s),y(e,t)},p(l,[r]){r&1&&b(e,"class",l[0])},i:q,o:q,d(l){l&&m(e)}}}function vt(a,e,s){let{className:t="w-4 h-4"}=e;return a.$$set=l=>{"className"in l&&s(0,t=l.className)},[t]}class kt extends F{constructor(e){super(),G(this,e,vt,bt,J,{className:0})}}function Ce(a){let e,s,t,l,r,n,o,i=a[3].t("Share to OpenWebUI Community")+"",f,d,c,v,_,p,k,j;function w(u,L){return u[2].share_id?$t:yt}let g=w(a),$=g(a);v=new kt({});function P(u,L){return u[2].share_id?St:Ct}let V=P(a),h=V(a);return{c(){e=I("div"),s=I("div"),$.c(),t=M(),l=I("div"),r=I("div"),n=I("div"),o=I("button"),f=N(i),d=M(),c=I("button"),z(v.$$.fragment),_=M(),h.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var L=B(e);s=T(L,"DIV",{class:!0});var Y=B(s);$.l(Y),Y.forEach(m),t=U(L),l=T(L,"DIV",{class:!0});var me=B(l);r=T(me,"DIV",{class:!0});var _e=B(r);n=T(_e,"DIV",{class:!0});var X=B(n);o=T(X,"BUTTON",{class:!0,type:!0});var he=B(o);f=O(he,i),he.forEach(m),d=U(X),c=T(X,"BUTTON",{class:!0,type:!0});var K=B(c);R(v.$$.fragment,K),_=U(K),h.l(K),K.forEach(m),X.forEach(m),_e.forEach(m),me.forEach(m),L.forEach(m),this.h()},h(){b(s,"class","text-sm dark:text-gray-300 mb-1"),b(o,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),b(o,"type","button"),b(c,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),b(c,"type","button"),b(n,"class","flex gap-1"),b(r,"class","flex flex-col items-end space-x-1 mt-1.5"),b(l,"class","flex justify-end"),b(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(u,L){C(u,e,L),y(e,s),$.m(s,null),y(e,t),y(e,l),y(l,r),y(r,n),y(n,o),y(o,f),y(n,d),y(n,c),W(v,c,null),y(c,_),h.m(c,null),p=!0,k||(j=[D(o,"click",a[9]),D(c,"click",a[10])],k=!0)},p(u,L){g===(g=w(u))&&$?$.p(u,L):($.d(1),$=g(u),$&&($.c(),$.m(s,null))),(!p||L&8)&&i!==(i=u[3].t("Share to OpenWebUI Community")+"")&&A(f,i),V===(V=P(u))&&h?h.p(u,L):(h.d(1),h=V(u),h&&(h.c(),h.m(c,null)))},i(u){p||(S(v.$$.fragment,u),p=!0)},o(u){E(v.$$.fragment,u),p=!1},d(u){u&&m(e),$.d(),H(v),h.d(),k=!1,Ie(j)}}}function yt(a){let e=a[3].t("Messages you send after creating your link won't be shared. Users with the URL will beable to view the shared chat.")+"",s;return{c(){s=N(e)},l(t){s=O(t,e)},m(t,l){C(t,s,l)},p(t,l){l&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will beable to view the shared chat.")+"")&&A(s,e)},d(t){t&&m(s)}}}function $t(a){let e,s=a[3].t("You have shared this chat")+"",t,l,r,n=a[3].t("before")+"",o,i,f,d,c=a[3].t("Click here to")+"",v,_,p,k=a[3].t("delete this link")+"",j,w,g=a[3].t("and create a new shared link.")+"",$,P,V;return{c(){e=I("a"),t=N(s),l=M(),r=I("span"),o=N(n),i=N("."),d=M(),v=N(c),_=M(),p=I("button"),j=N(k),w=M(),$=N(g),this.h()},l(h){e=T(h,"A",{href:!0,target:!0});var u=B(e);t=O(u,s),l=U(u),r=T(u,"SPAN",{class:!0});var L=B(r);o=O(L,n),L.forEach(m),i=O(u,"."),u.forEach(m),d=U(h),v=O(h,c),_=U(h),p=T(h,"BUTTON",{class:!0});var Y=B(p);j=O(Y,k),Y.forEach(m),w=U(h),$=O(h,g),this.h()},h(){b(r,"class","underline"),b(e,"href",f="/s/"+a[2].share_id),b(e,"target","_blank"),b(p,"class","underline")},m(h,u){C(h,e,u),y(e,t),y(e,l),y(e,r),y(r,o),y(e,i),C(h,d,u),C(h,v,u),C(h,_,u),C(h,p,u),y(p,j),C(h,w,u),C(h,$,u),P||(V=D(p,"click",a[8]),P=!0)},p(h,u){u&8&&s!==(s=h[3].t("You have shared this chat")+"")&&A(t,s),u&8&&n!==(n=h[3].t("before")+"")&&A(o,n),u&4&&f!==(f="/s/"+h[2].share_id)&&b(e,"href",f),u&8&&c!==(c=h[3].t("Click here to")+"")&&A(v,c),u&8&&k!==(k=h[3].t("delete this link")+"")&&A(j,k),u&8&&g!==(g=h[3].t("and create a new shared link.")+"")&&A($,g)},d(h){h&&(m(e),m(d),m(v),m(_),m(p),m(w),m($)),P=!1,V()}}}function Ct(a){let e=a[3].t("Copy Link")+"",s;return{c(){s=N(e)},l(t){s=O(t,e)},m(t,l){C(t,s,l)},p(t,l){l&8&&e!==(e=t[3].t("Copy Link")+"")&&A(s,e)},d(t){t&&m(s)}}}function St(a){let e=a[3].t("Update and Copy Link")+"",s;return{c(){s=N(e)},l(t){s=O(t,e)},m(t,l){C(t,s,l)},p(t,l){l&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&A(s,e)},d(t){t&&m(s)}}}function It(a){let e,s,t,l=a[3].t("Share Chat")+"",r,n,o,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,d,c,v,_=a[2]&&Ce(a);return{c(){e=I("div"),s=I("div"),t=I("div"),r=N(l),n=M(),o=I("button"),o.innerHTML=i,f=M(),_&&_.c(),this.h()},l(p){e=T(p,"DIV",{});var k=B(e);s=T(k,"DIV",{class:!0});var j=B(s);t=T(j,"DIV",{class:!0});var w=B(t);r=O(w,l),w.forEach(m),n=U(j),o=T(j,"BUTTON",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-745w2y"&&(o.innerHTML=i),j.forEach(m),f=U(k),_&&_.l(k),k.forEach(m),this.h()},h(){b(t,"class","text-lg font-medium self-center"),b(o,"class","self-center"),b(s,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(p,k){C(p,e,k),y(e,s),y(s,t),y(t,r),y(s,n),y(s,o),y(e,f),_&&_.m(e,null),d=!0,c||(v=D(o,"click",a[7]),c=!0)},p(p,k){(!d||k&8)&&l!==(l=p[3].t("Share Chat")+"")&&A(r,l),p[2]?_?(_.p(p,k),k&4&&S(_,1)):(_=Ce(p),_.c(),S(_,1),_.m(e,null)):_&&(Be(),E(_,1,1,()=>{_=null}),je())},i(p){d||(S(_),d=!0)},o(p){E(_),d=!1},d(p){p&&m(e),_&&_.d(),c=!1,v()}}}function Tt(a){let e,s,t;function l(n){a[11](n)}let r={size:"sm",$$slots:{default:[It]},$$scope:{ctx:a}};return a[0]!==void 0&&(r.show=a[0]),e=new et({props:r}),de.push(()=>Le(e,"show",l)),{c(){z(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){W(e,n,o),t=!0},p(n,[o]){const i={};o&16399&&(i.$$scope={dirty:o,ctx:n}),!s&&o&1&&(s=!0,i.show=n[0],Te(()=>s=!1)),e.$set(i)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){E(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function Et(a,e,s){let t,l;Z(a,Me,w=>s(13,t=w));let{chatId:r}=e,n=null,o=null;const i=Oe("i18n");Z(a,i,w=>s(3,l=w));const f=async()=>{const w=await Xe(localStorage.token,r);return o=`${window.location.origin}/s/${w.id}`,console.log(o),s(2,n=await ie(localStorage.token,r)),o},d=async()=>{const w=n.chat;console.log("share",w),ve.success(l.t("Redirecting you to OpenWebUI Community"));const g="https://openwebui.com",$=await window.open(`${g}/chats/upload`,"_blank");window.addEventListener("message",P=>{P.origin===g&&P.data==="loaded"&&$.postMessage(JSON.stringify({chat:w,modelfiles:t.filter(V=>w.models.includes(V.tagName))}),"*")},!1)};let{show:c=!1}=e;const v=()=>{s(0,c=!1)},_=async()=>{await Ke(localStorage.token,r)&&s(2,n=await ie(localStorage.token,r))},p=()=>{d(),s(0,c=!1)},k=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const g=async()=>{const $=await f();return new Blob([$],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":g()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch($=>(console.error("Async: Could not copy text: ",$),!1))}else xe(await f());ve.success(l.t("Copied shared chat URL to clipboard!")),s(0,c=!1)};function j(w){c=w,s(0,c)}return a.$$set=w=>{"chatId"in w&&s(1,r=w.chatId),"show"in w&&s(0,c=w.show)},a.$$.update=()=>{a.$$.dirty&7&&c&&(async()=>r?s(2,n=await ie(localStorage.token,r)):(s(2,n=null),console.log(n)))()},[c,r,n,l,i,f,d,v,_,p,k,j]}class Zt extends F{constructor(e){super(),G(this,e,Et,Tt,J,{chatId:1,show:0})}}export{Jt as D,ce as M,Zt as S,Yt as T,Wt as a,Ht as s};
