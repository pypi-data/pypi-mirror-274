import{s as hl,f as i,a as D,l as B,g as u,h as f,c as M,R as vt,m as C,d as r,j as a,i as G,r as l,Q as ce,u as K,O as ml,n as q,K as Kt,v as gt,w as Qt,P as _l,o as vl,t as $t,k as Vt,p as dl,z as el,A as tl,C as Pt,S as ll,e as sl,Y as gl}from"../chunks/scheduler.bcadb9af.js";import{S as bl,i as wl,t as Ke,c as fl,a as Xe,g as pl,f as kl,b as El,d as yl,m as Il,e as Tl}from"../chunks/index.bbb895f1.js";import{e as mt}from"../chunks/each.f3e982ad.js";import{a as _t}from"../chunks/Toaster.svelte_svelte_type_style_lang.a4036649.js";import{g as Dl}from"../chunks/navigation.c17c440e.js";import{d as Ml,l as Al}from"../chunks/index.9487f70b.js";import{A as Vl}from"../chunks/AdvancedParams.600b48aa.js";import{s as Pl}from"../chunks/index.146e7b79.js";import{e as Rl}from"../chunks/index.8cda1db3.js";import{a as Nl,c as Sl,g as Bl}from"../chunks/index.ad993ff1.js";function al(s,t,e){const o=s.slice();return o[46]=t[e],o[47]=t,o[48]=e,o}function rl(s,t,e){const o=s.slice();return o[49]=t[e],o[50]=t,o[51]=e,o}function Cl(s){let t,e;return{c(){t=el("svg"),e=el("path"),this.h()},l(o){t=tl(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=f(t);e=tl(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),f(e).forEach(r),n.forEach(r),this.h()},h(){a(e,"fill-rule","evenodd"),a(e,"d","M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z"),a(e,"clip-rule","evenodd"),a(t,"xmlns","http://www.w3.org/2000/svg"),a(t,"viewBox","0 0 24 24"),a(t,"fill","currentColor"),a(t,"class","w-8")},m(o,n){G(o,t,n),l(t,e)},p:Pt,d(o){o&&r(t)}}}function Ul(s){let t,e;return{c(){t=i("img"),this.h()},l(o){t=u(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ll(t.src,e=s[9])||a(t,"src",e),a(t,"alt","modelfile profile"),a(t,"class","rounded-full w-20 h-20 object-cover")},m(o,n){G(o,t,n)},p(o,n){n[0]&512&&!ll(t.src,e=o[9])&&a(t,"src",e)},d(o){o&&r(t)}}}function Ll(s){let t,e=s[18].t("Builder Mode")+"",o;return{c(){t=i("span"),o=B(e),this.h()},l(n){t=u(n,"SPAN",{class:!0});var p=f(t);o=C(p,e),p.forEach(r),this.h()},h(){a(t,"class","ml-2 self-center")},m(n,p){G(n,t,p),l(t,o)},p(n,p){p[0]&262144&&e!==(e=n[18].t("Builder Mode")+"")&&q(o,e)},d(n){n&&r(t)}}}function Ol(s){let t,e=s[18].t("Raw Format")+"",o;return{c(){t=i("span"),o=B(e),this.h()},l(n){t=u(n,"SPAN",{class:!0});var p=f(t);o=C(p,e),p.forEach(r),this.h()},h(){a(t,"class","ml-2 self-center")},m(n,p){G(n,t,p),l(t,o)},p(n,p){p[0]&262144&&e!==(e=n[18].t("Raw Format")+"")&&q(o,e)},d(n){n&&r(t)}}}function jl(s){let t,e,o=s[18].t("From (Base Model)")+"",n,p,N,b,m,T,I,A=s[18].t("To access the available model names for downloading,")+"",c,w,_,v=s[18].t("click here.")+"",z,W,y,U,Y=s[18].t("System Prompt")+"",X,h,V,k,L,O,J,te=s[18].t("Modelfile Advanced Settings")+"",Q,_e,le,we,ge,de,ke,oe;function Me(E,S){return E[14]?Fl:zl}let Te=Me(s),Z=Te(s),j=s[14]&&ol(s);return{c(){t=i("div"),e=i("div"),n=B(o),p=B("*"),N=D(),b=i("div"),m=i("input"),T=D(),I=i("div"),c=B(A),w=D(),_=i("a"),z=B(v),W=D(),y=i("div"),U=i("div"),X=B(Y),h=D(),V=i("div"),k=i("textarea"),L=D(),O=i("div"),J=i("div"),Q=B(te),_e=D(),le=i("button"),Z.c(),we=D(),j&&j.c(),ge=sl(),this.h()},l(E){t=u(E,"DIV",{class:!0});var S=f(t);e=u(S,"DIV",{class:!0});var Ae=f(e);n=C(Ae,o),p=C(Ae,"*"),Ae.forEach(r),N=M(S),b=u(S,"DIV",{});var Re=f(b);m=u(Re,"INPUT",{class:!0,placeholder:!0}),Re.forEach(r),T=M(S),I=u(S,"DIV",{class:!0});var be=f(I);c=C(be,A),w=M(be),_=u(be,"A",{class:!0,href:!0,target:!0});var ne=f(_);z=C(ne,v),ne.forEach(r),be.forEach(r),S.forEach(r),W=M(E),y=u(E,"DIV",{class:!0});var Ee=f(y);U=u(Ee,"DIV",{class:!0});var Ne=f(U);X=C(Ne,Y),Ne.forEach(r),h=M(Ee),V=u(Ee,"DIV",{});var g=f(V);k=u(g,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),f(k).forEach(r),g.forEach(r),Ee.forEach(r),L=M(E),O=u(E,"DIV",{class:!0});var P=f(O);J=u(P,"DIV",{class:!0});var fe=f(J);Q=C(fe,te),fe.forEach(r),_e=M(P),le=u(P,"BUTTON",{class:!0,type:!0});var ie=f(le);Z.l(ie),ie.forEach(r),P.forEach(r),we=M(E),j&&j.l(E),ge=sl(),this.h()},h(){a(e,"class","text-xs font-semibold mb-2"),a(m,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),a(m,"placeholder","Write a modelfile base model name (e.g. llama2, mistral)"),m.required=!0,a(_,"class","text-gray-500 dark:text-gray-300 font-medium"),a(_,"href","https://ollama.com/library"),a(_,"target","_blank"),a(I,"class","mt-1 text-xs text-gray-400 dark:text-gray-500"),a(t,"class","my-2"),a(U,"class","text-xs font-semibold mb-2"),a(k,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg -mb-1"),a(k,"placeholder",`Write your modelfile system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),a(k,"rows","4"),a(y,"class","my-1"),a(J,"class","self-center text-sm font-semibold"),a(le,"class","p-1 px-3 text-xs flex rounded transition"),a(le,"type","button"),a(O,"class","flex w-full justify-between")},m(E,S){G(E,t,S),l(t,e),l(e,n),l(e,p),l(t,N),l(t,b),l(b,m),ce(m,s[2]),l(t,T),l(t,I),l(I,c),l(I,w),l(I,_),l(_,z),G(E,W,S),G(E,y,S),l(y,U),l(U,X),l(y,h),l(y,V),l(V,k),ce(k,s[3]),G(E,L,S),G(E,O,S),l(O,J),l(J,Q),l(O,_e),l(O,le),Z.m(le,null),G(E,we,S),j&&j.m(E,S),G(E,ge,S),de=!0,ke||(oe=[K(m,"input",s[32]),K(k,"input",s[33]),K(le,"click",s[34])],ke=!0)},p(E,S){(!de||S[0]&262144)&&o!==(o=E[18].t("From (Base Model)")+"")&&q(n,o),S[0]&4&&m.value!==E[2]&&ce(m,E[2]),(!de||S[0]&262144)&&A!==(A=E[18].t("To access the available model names for downloading,")+"")&&q(c,A),(!de||S[0]&262144)&&v!==(v=E[18].t("click here.")+"")&&q(z,v),(!de||S[0]&262144)&&Y!==(Y=E[18].t("System Prompt")+"")&&q(X,Y),S[0]&8&&ce(k,E[3]),(!de||S[0]&262144)&&te!==(te=E[18].t("Modelfile Advanced Settings")+"")&&q(Q,te),Te===(Te=Me(E))&&Z?Z.p(E,S):(Z.d(1),Z=Te(E),Z&&(Z.c(),Z.m(le,null))),E[14]?j?(j.p(E,S),S[0]&16384&&Xe(j,1)):(j=ol(E),j.c(),Xe(j,1),j.m(ge.parentNode,ge)):j&&(pl(),Ke(j,1,1,()=>{j=null}),fl())},i(E){de||(Xe(j),de=!0)},o(E){Ke(j),de=!1},d(E){E&&(r(t),r(W),r(y),r(L),r(O),r(we),r(ge)),Z.d(),j&&j.d(E),ke=!1,gt(oe)}}}function Hl(s){let t,e,o=s[18].t("Content")+"",n,p,N,b,m,T,I,A=s[18].t("Not sure what to write? Switch to")+"",c,w,_,v=s[18].t("Builder Mode")+"",z,W,y,U=s[18].t("Click here to check other modelfiles.")+"",Y,X,h;return{c(){t=i("div"),e=i("div"),n=B(o),p=B("*"),N=D(),b=i("div"),m=i("textarea"),T=D(),I=i("div"),c=B(A),w=D(),_=i("button"),z=B(v),W=B(`
						or
						`),y=i("a"),Y=B(U),this.h()},l(V){t=u(V,"DIV",{class:!0});var k=f(t);e=u(k,"DIV",{class:!0});var L=f(e);n=C(L,o),p=C(L,"*"),L.forEach(r),N=M(k),b=u(k,"DIV",{});var O=f(b);m=u(O,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),f(m).forEach(r),O.forEach(r),T=M(k),I=u(k,"DIV",{class:!0});var J=f(I);c=C(J,A),w=M(J),_=u(J,"BUTTON",{class:!0,type:!0});var te=f(_);z=C(te,v),te.forEach(r),W=C(J,`
						or
						`),y=u(J,"A",{class:!0,href:!0,target:!0});var Q=f(y);Y=C(Q,U),Q.forEach(r),J.forEach(r),k.forEach(r),this.h()},h(){a(e,"class","text-xs font-semibold mb-2"),a(m,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),a(m,"placeholder",`FROM llama2
PARAMETER temperature 1
SYSTEM """
You are Mario from Super Mario Bros, acting as an assistant.
"""`),a(m,"rows","6"),m.required=!0,a(_,"class","text-gray-500 dark:text-gray-300 font-medium cursor-pointer"),a(_,"type","button"),a(y,"class","text-gray-500 dark:text-gray-300 font-medium"),a(y,"href","https://openwebui.com"),a(y,"target","_blank"),a(I,"class","text-xs text-gray-400 dark:text-gray-500"),a(t,"class","mt-2")},m(V,k){G(V,t,k),l(t,e),l(e,n),l(e,p),l(t,N),l(t,b),l(b,m),ce(m,s[15]),l(t,T),l(t,I),l(I,c),l(I,w),l(I,_),l(_,z),l(I,W),l(I,y),l(y,Y),X||(h=[K(m,"input",s[30]),K(_,"click",s[31])],X=!0)},p(V,k){k[0]&262144&&o!==(o=V[18].t("Content")+"")&&q(n,o),k[0]&32768&&ce(m,V[15]),k[0]&262144&&A!==(A=V[18].t("Not sure what to write? Switch to")+"")&&q(c,A),k[0]&262144&&v!==(v=V[18].t("Builder Mode")+"")&&q(z,v),k[0]&262144&&U!==(U=V[18].t("Click here to check other modelfiles.")+"")&&q(Y,U)},i:Pt,o:Pt,d(V){V&&r(t),X=!1,gt(h)}}}function zl(s){let t,e=s[18].t("Default")+"",o;return{c(){t=i("span"),o=B(e),this.h()},l(n){t=u(n,"SPAN",{class:!0});var p=f(t);o=C(p,e),p.forEach(r),this.h()},h(){a(t,"class","ml-2 self-center")},m(n,p){G(n,t,p),l(t,o)},p(n,p){p[0]&262144&&e!==(e=n[18].t("Default")+"")&&q(o,e)},d(n){n&&r(t)}}}function Fl(s){let t,e=s[18].t("Custom")+"",o;return{c(){t=i("span"),o=B(e),this.h()},l(n){t=u(n,"SPAN",{class:!0});var p=f(t);o=C(p,e),p.forEach(r),this.h()},h(){a(t,"class","ml-2 self-center")},m(n,p){G(n,t,p),l(t,o)},p(n,p){p[0]&262144&&e!==(e=n[18].t("Custom")+"")&&q(o,e)},d(n){n&&r(t)}}}function ol(s){let t,e,o=s[18].t("Template")+"",n,p,N,b,m,T,I,A=s[18].t("Parameters")+"",c,w,_,v,z,W,y,U;function Y(h){s[36](h)}let X={};return s[5]!==void 0&&(X.options=s[5]),v=new Vl({props:X}),dl.push(()=>kl(v,"options",Y)),{c(){t=i("div"),e=i("div"),n=B(o),p=D(),N=i("div"),b=i("textarea"),m=D(),T=i("div"),I=i("div"),c=B(A),w=D(),_=i("div"),El(v.$$.fragment),this.h()},l(h){t=u(h,"DIV",{class:!0});var V=f(t);e=u(V,"DIV",{class:!0});var k=f(e);n=C(k,o),k.forEach(r),p=M(V),N=u(V,"DIV",{});var L=f(N);b=u(L,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),f(b).forEach(r),L.forEach(r),V.forEach(r),m=M(h),T=u(h,"DIV",{class:!0});var O=f(T);I=u(O,"DIV",{class:!0});var J=f(I);c=C(J,A),J.forEach(r),w=M(O),_=u(O,"DIV",{});var te=f(_);yl(v.$$.fragment,te),te.forEach(r),O.forEach(r),this.h()},h(){a(e,"class","text-xs font-semibold mb-2"),a(b,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg -mb-1"),a(b,"placeholder","Write your modelfile template content here"),a(b,"rows","4"),a(t,"class","my-2"),a(I,"class","text-xs font-semibold mb-2"),a(T,"class","my-2")},m(h,V){G(h,t,V),l(t,e),l(e,n),l(t,p),l(t,N),l(N,b),ce(b,s[4]),G(h,m,V),G(h,T,V),l(T,I),l(I,c),l(T,w),l(T,_),Il(v,_,null),W=!0,y||(U=K(b,"input",s[35]),y=!0)},p(h,V){(!W||V[0]&262144)&&o!==(o=h[18].t("Template")+"")&&q(n,o),V[0]&16&&ce(b,h[4]),(!W||V[0]&262144)&&A!==(A=h[18].t("Parameters")+"")&&q(c,A);const k={};!z&&V[0]&32&&(z=!0,k.options=h[5],gl(()=>z=!1)),v.$set(k)},i(h){W||(Xe(v.$$.fragment,h),W=!0)},o(h){Ke(v.$$.fragment,h),W=!1},d(h){h&&(r(t),r(m),r(T)),Tl(v),y=!1,U()}}}function nl(s){let t,e,o,n,p,N='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',b,m,T;function I(){s[38].call(e,s[50],s[51])}function A(){return s[39](s[51])}return{c(){t=i("div"),e=i("input"),n=D(),p=i("button"),p.innerHTML=N,b=D(),this.h()},l(c){t=u(c,"DIV",{class:!0});var w=f(t);e=u(w,"INPUT",{class:!0,placeholder:!0}),n=M(w),p=u(w,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),vt(p)!=="svelte-2tlgcm"&&(p.innerHTML=N),b=M(w),w.forEach(r),this.h()},h(){a(e,"class","px-3 py-1.5 text-sm w-full bg-transparent outline-none border-r dark:border-gray-600"),a(e,"placeholder",o=s[18].t("Write a prompt suggestion (e.g. Who are you?)")),a(p,"class","px-2"),a(p,"type","button"),a(t,"class","flex border dark:border-gray-600 rounded-lg")},m(c,w){G(c,t,w),l(t,e),ce(e,s[49].content),l(t,n),l(t,p),l(t,b),m||(T=[K(e,"input",I),K(p,"click",A)],m=!0)},p(c,w){s=c,w[0]&262144&&o!==(o=s[18].t("Write a prompt suggestion (e.g. Who are you?)"))&&a(e,"placeholder",o),w[0]&65536&&e.value!==s[49].content&&ce(e,s[49].content)},d(c){c&&r(t),m=!1,gt(T)}}}function il(s){let t,e,o,n,p=s[46]+"",N,b,m,T;function I(){s[40].call(e,s[46])}return{c(){t=i("div"),e=i("input"),o=D(),n=i("div"),N=B(p),b=D(),this.h()},l(A){t=u(A,"DIV",{class:!0});var c=f(t);e=u(c,"INPUT",{type:!0}),o=M(c),n=u(c,"DIV",{class:!0});var w=f(n);N=C(w,p),w.forEach(r),b=M(c),c.forEach(r),this.h()},h(){a(e,"type","checkbox"),a(n,"class","capitalize"),a(t,"class","flex space-x-2 text-sm")},m(A,c){G(A,t,c),l(t,e),e.checked=s[17][s[46]],l(t,o),l(t,n),l(n,N),l(t,b),m||(T=K(e,"change",I),m=!0)},p(A,c){s=A,c[0]&131072&&(e.checked=s[17][s[46]]),c[0]&131072&&p!==(p=s[46]+"")&&q(N,p)},d(A){A&&r(t),m=!1,T()}}}function ul(s){let t,e,o=s[18].t("Pull Progress")+"",n,p,N,b,m=(s[11]??0)+"",T,I,A,c,w;return{c(){t=i("div"),e=i("div"),n=B(o),p=D(),N=i("div"),b=i("div"),T=B(m),I=B("%"),A=D(),c=i("div"),w=B(s[10]),this.h()},l(_){t=u(_,"DIV",{class:!0});var v=f(t);e=u(v,"DIV",{class:!0});var z=f(e);n=C(z,o),z.forEach(r),p=M(v),N=u(v,"DIV",{class:!0});var W=f(N);b=u(W,"DIV",{class:!0,style:!0});var y=f(b);T=C(y,m),I=C(y,"%"),y.forEach(r),W.forEach(r),A=M(v),c=u(v,"DIV",{class:!0,style:!0});var U=f(c);w=C(U,s[10]),U.forEach(r),v.forEach(r),this.h()},h(){a(e,"class","text-sm font-semibold mb-2"),a(b,"class","dark:bg-gray-600 bg-gray-500 text-xs font-medium text-gray-100 text-center p-0.5 leading-none rounded-full"),Vt(b,"width",Math.max(15,s[11]??0)+"%"),a(N,"class","w-full rounded-full dark:bg-gray-800"),a(c,"class","mt-1 text-xs dark:text-gray-500"),Vt(c,"font-size","0.5rem"),a(t,"class","my-2")},m(_,v){G(_,t,v),l(t,e),l(e,n),l(t,p),l(t,N),l(N,b),l(b,T),l(b,I),l(t,A),l(t,c),l(c,w)},p(_,v){v[0]&262144&&o!==(o=_[18].t("Pull Progress")+"")&&q(n,o),v[0]&2048&&m!==(m=(_[11]??0)+"")&&q(T,m),v[0]&2048&&Vt(b,"width",Math.max(15,_[11]??0)+"%"),v[0]&1024&&q(w,_[10])},d(_){_&&r(t)}}}function cl(s){let t,e=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
									transform-origin: center;
									animation: spinner_AtaB 0.75s infinite linear;
								}
								@keyframes spinner_AtaB {
									100% {
										transform: rotate(360deg);
									}
								}
							</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){t=i("div"),t.innerHTML=e,this.h()},l(o){t=u(o,"DIV",{class:!0,"data-svelte-h":!0}),vt(t)!=="svelte-qf5fty"&&(t.innerHTML=e),this.h()},h(){a(t,"class","ml-1.5 self-center")},m(o,n){G(o,t,n)},d(o){o&&r(t)}}}function ql(s){let t,e,o,n,p,N='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',b,m,T=s[18].t("Back")+"",I,A,c,w,_,v,z,W,y,U,Y,X=s[18].t("Name")+"",h,V,k,L,O,J,te,Q,_e,le=s[18].t("Model Tag Name")+"",we,ge,de,ke,oe,Me,Te,Z,j,E=s[18].t("Description")+"",S,Ae,Re,be,ne,Ee,Ne,g,P,fe,ie=s[18].t("Modelfile")+"",he,Ve,H,Se,se,me,Je,De,Be,He,Ze=s[18].t("Prompt suggestions")+"",Qe,bt,Pe,Rt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path></svg>',wt,Le,kt,Ce,ze,xe=s[18].t("Categories")+"",$e,Et,Oe,yt,et,Fe,ve,qe,Ge=s[18].t("Save & Create")+"",tt,It,lt,$,Tt,Nt;function St(d,R){return d[9]?Ul:Cl}let st=St(s),ye=st(s);function Bt(d,R){return d[1]?Ol:Ll}let at=Bt(s),Ie=at(s);const Ct=[Hl,jl],Ue=[];function Ut(d,R){return d[1]?0:1}se=Ut(s),me=Ue[se]=Ct[se](s);let We=mt(s[16]),ae=[];for(let d=0;d<We.length;d+=1)ae[d]=nl(rl(s,We,d));let Ye=mt(Object.keys(s[17])),re=[];for(let d=0;d<Ye.length;d+=1)re[d]=il(al(s,Ye,d));let ue=s[11]!==null&&ul(s),pe=s[6]&&cl();return{c(){t=i("div"),e=i("input"),o=D(),n=i("button"),p=i("div"),p.innerHTML=N,b=D(),m=i("div"),I=B(T),A=D(),c=i("form"),w=i("div"),_=i("div"),v=i("button"),ye.c(),W=D(),y=i("div"),U=i("div"),Y=i("div"),h=B(X),V=B("*"),k=D(),L=i("div"),O=i("input"),te=D(),Q=i("div"),_e=i("div"),we=B(le),ge=B("*"),de=D(),ke=i("div"),oe=i("input"),Te=D(),Z=i("div"),j=i("div"),S=B(E),Ae=B("*"),Re=D(),be=i("div"),ne=i("input"),Ne=D(),g=i("div"),P=i("div"),fe=i("div"),he=B(ie),Ve=D(),H=i("button"),Ie.c(),Se=D(),me.c(),Je=D(),De=i("div"),Be=i("div"),He=i("div"),Qe=B(Ze),bt=D(),Pe=i("button"),Pe.innerHTML=Rt,wt=D(),Le=i("div");for(let d=0;d<ae.length;d+=1)ae[d].c();kt=D(),Ce=i("div"),ze=i("div"),$e=B(xe),Et=D(),Oe=i("div");for(let d=0;d<re.length;d+=1)re[d].c();yt=D(),ue&&ue.c(),et=D(),Fe=i("div"),ve=i("button"),qe=i("div"),tt=B(Ge),It=D(),pe&&pe.c(),this.h()},l(d){t=u(d,"DIV",{class:!0});var R=f(t);e=u(R,"INPUT",{type:!0,accept:!0}),o=M(R),n=u(R,"BUTTON",{class:!0});var ee=f(n);p=u(ee,"DIV",{class:!0,"data-svelte-h":!0}),vt(p)!=="svelte-1klo87r"&&(p.innerHTML=N),b=M(ee),m=u(ee,"DIV",{class:!0});var F=f(m);I=C(F,T),F.forEach(r),ee.forEach(r),A=M(R),c=u(R,"FORM",{class:!0});var x=f(c);w=u(x,"DIV",{class:!0});var Lt=f(w);_=u(Lt,"DIV",{class:!0});var Ot=f(_);v=u(Ot,"BUTTON",{class:!0,type:!0});var jt=f(v);ye.l(jt),jt.forEach(r),Ot.forEach(r),Lt.forEach(r),W=M(x),y=u(x,"DIV",{class:!0});var rt=f(y);U=u(rt,"DIV",{class:!0});var ot=f(U);Y=u(ot,"DIV",{class:!0});var Dt=f(Y);h=C(Dt,X),V=C(Dt,"*"),Dt.forEach(r),k=M(ot),L=u(ot,"DIV",{});var Ht=f(L);O=u(Ht,"INPUT",{class:!0,placeholder:!0}),Ht.forEach(r),ot.forEach(r),te=M(rt),Q=u(rt,"DIV",{class:!0});var nt=f(Q);_e=u(nt,"DIV",{class:!0});var Mt=f(_e);we=C(Mt,le),ge=C(Mt,"*"),Mt.forEach(r),de=M(nt),ke=u(nt,"DIV",{});var zt=f(ke);oe=u(zt,"INPUT",{class:!0,placeholder:!0}),zt.forEach(r),nt.forEach(r),rt.forEach(r),Te=M(x),Z=u(x,"DIV",{class:!0});var it=f(Z);j=u(it,"DIV",{class:!0});var At=f(j);S=C(At,E),Ae=C(At,"*"),At.forEach(r),Re=M(it),be=u(it,"DIV",{});var Ft=f(be);ne=u(Ft,"INPUT",{class:!0,placeholder:!0}),Ft.forEach(r),it.forEach(r),Ne=M(x),g=u(x,"DIV",{class:!0});var ut=f(g);P=u(ut,"DIV",{class:!0});var ct=f(P);fe=u(ct,"DIV",{class:!0});var qt=f(fe);he=C(qt,ie),qt.forEach(r),Ve=M(ct),H=u(ct,"BUTTON",{class:!0,type:!0});var Wt=f(H);Ie.l(Wt),Wt.forEach(r),ct.forEach(r),Se=M(ut),me.l(ut),ut.forEach(r),Je=M(x),De=u(x,"DIV",{class:!0});var dt=f(De);Be=u(dt,"DIV",{class:!0});var ft=f(Be);He=u(ft,"DIV",{class:!0});var Yt=f(He);Qe=C(Yt,Ze),Yt.forEach(r),bt=M(ft),Pe=u(ft,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),vt(Pe)!=="svelte-1vn58fe"&&(Pe.innerHTML=Rt),ft.forEach(r),wt=M(dt),Le=u(dt,"DIV",{class:!0});var Xt=f(Le);for(let je=0;je<ae.length;je+=1)ae[je].l(Xt);Xt.forEach(r),dt.forEach(r),kt=M(x),Ce=u(x,"DIV",{class:!0});var pt=f(Ce);ze=u(pt,"DIV",{class:!0});var Jt=f(ze);$e=C(Jt,xe),Jt.forEach(r),Et=M(pt),Oe=u(pt,"DIV",{class:!0});var Zt=f(Oe);for(let je=0;je<re.length;je+=1)re[je].l(Zt);Zt.forEach(r),pt.forEach(r),yt=M(x),ue&&ue.l(x),et=M(x),Fe=u(x,"DIV",{class:!0});var xt=f(Fe);ve=u(xt,"BUTTON",{class:!0,type:!0});var ht=f(ve);qe=u(ht,"DIV",{class:!0});var Gt=f(qe);tt=C(Gt,Ge),Gt.forEach(r),It=M(ht),pe&&pe.l(ht),ht.forEach(r),xt.forEach(r),x.forEach(r),R.forEach(r),this.h()},h(){a(e,"type","file"),e.hidden=!0,a(e,"accept","image/*"),a(p,"class","self-center"),a(m,"class","self-center font-medium text-sm"),a(n,"class","flex space-x-1"),a(v,"class",z=(s[9]?"":"p-6")+" rounded-full dark:bg-gray-700 border border-dashed border-gray-200"),a(v,"type","button"),a(_,"class","self-center"),a(w,"class","flex justify-center my-4"),a(Y,"class","text-sm font-semibold mb-2"),a(O,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),a(O,"placeholder",J=s[18].t("Name your modelfile")),O.required=!0,a(U,"class","flex-1"),a(_e,"class","text-sm font-semibold mb-2"),a(oe,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),a(oe,"placeholder",Me=s[18].t("Add a model tag name")),oe.required=!0,a(Q,"class","flex-1"),a(y,"class","my-2 flex space-x-2"),a(j,"class","text-sm font-semibold mb-2"),a(ne,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),a(ne,"placeholder",Ee=s[18].t("Add a short description about what this modelfile does")),ne.required=!0,a(Z,"class","my-2"),a(fe,"class","self-center text-sm font-semibold"),a(H,"class","p-1 px-3 text-xs flex rounded transition"),a(H,"type","button"),a(P,"class","flex w-full justify-between"),a(g,"class","my-2"),a(He,"class","self-center text-sm font-semibold"),a(Pe,"class","p-1 px-3 text-xs flex rounded transition"),a(Pe,"type","button"),a(Be,"class","flex w-full justify-between mb-2"),a(Le,"class","flex flex-col space-y-1"),a(De,"class","my-2"),a(ze,"class","text-sm font-semibold mb-2"),a(Oe,"class","grid grid-cols-4"),a(Ce,"class","my-2"),a(qe,"class","self-center font-medium"),a(ve,"class",lt="text-sm px-3 py-2 transition rounded-xl "+(s[6]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800")+" flex"),a(ve,"type","submit"),ve.disabled=s[6],a(Fe,"class","my-2 flex justify-end"),a(c,"class","flex flex-col max-w-2xl mx-auto mt-4 mb-10"),a(t,"class","w-full max-h-full")},m(d,R){G(d,t,R),l(t,e),s[21](e),l(t,o),l(t,n),l(n,p),l(n,b),l(n,m),l(m,I),l(t,A),l(t,c),l(c,w),l(w,_),l(_,v),ye.m(v,null),l(c,W),l(c,y),l(y,U),l(U,Y),l(Y,h),l(Y,V),l(U,k),l(U,L),l(L,O),ce(O,s[0]),l(y,te),l(y,Q),l(Q,_e),l(_e,we),l(_e,ge),l(Q,de),l(Q,ke),l(ke,oe),ce(oe,s[12]),l(c,Te),l(c,Z),l(Z,j),l(j,S),l(j,Ae),l(Z,Re),l(Z,be),l(be,ne),ce(ne,s[13]),l(c,Ne),l(c,g),l(g,P),l(P,fe),l(fe,he),l(P,Ve),l(P,H),Ie.m(H,null),l(g,Se),Ue[se].m(g,null),l(c,Je),l(c,De),l(De,Be),l(Be,He),l(He,Qe),l(Be,bt),l(Be,Pe),l(De,wt),l(De,Le);for(let ee=0;ee<ae.length;ee+=1)ae[ee]&&ae[ee].m(Le,null);l(c,kt),l(c,Ce),l(Ce,ze),l(ze,$e),l(Ce,Et),l(Ce,Oe);for(let ee=0;ee<re.length;ee+=1)re[ee]&&re[ee].m(Oe,null);l(c,yt),ue&&ue.m(c,null),l(c,et),l(c,Fe),l(Fe,ve),l(ve,qe),l(qe,tt),l(ve,It),pe&&pe.m(ve,null),$=!0,Tt||(Nt=[K(e,"change",s[22]),K(e,"change",s[23]),K(n,"click",s[24]),K(v,"click",s[25]),K(O,"input",s[26]),K(oe,"input",s[27]),K(ne,"input",s[28]),K(H,"click",s[29]),K(Pe,"click",s[37]),K(c,"submit",ml(s[41]))],Tt=!0)},p(d,R){(!$||R[0]&262144)&&T!==(T=d[18].t("Back")+"")&&q(I,T),st===(st=St(d))&&ye?ye.p(d,R):(ye.d(1),ye=st(d),ye&&(ye.c(),ye.m(v,null))),(!$||R[0]&512&&z!==(z=(d[9]?"":"p-6")+" rounded-full dark:bg-gray-700 border border-dashed border-gray-200"))&&a(v,"class",z),(!$||R[0]&262144)&&X!==(X=d[18].t("Name")+"")&&q(h,X),(!$||R[0]&262144&&J!==(J=d[18].t("Name your modelfile")))&&a(O,"placeholder",J),R[0]&1&&O.value!==d[0]&&ce(O,d[0]),(!$||R[0]&262144)&&le!==(le=d[18].t("Model Tag Name")+"")&&q(we,le),(!$||R[0]&262144&&Me!==(Me=d[18].t("Add a model tag name")))&&a(oe,"placeholder",Me),R[0]&4096&&oe.value!==d[12]&&ce(oe,d[12]),(!$||R[0]&262144)&&E!==(E=d[18].t("Description")+"")&&q(S,E),(!$||R[0]&262144&&Ee!==(Ee=d[18].t("Add a short description about what this modelfile does")))&&a(ne,"placeholder",Ee),R[0]&8192&&ne.value!==d[13]&&ce(ne,d[13]),(!$||R[0]&262144)&&ie!==(ie=d[18].t("Modelfile")+"")&&q(he,ie),at===(at=Bt(d))&&Ie?Ie.p(d,R):(Ie.d(1),Ie=at(d),Ie&&(Ie.c(),Ie.m(H,null)));let ee=se;if(se=Ut(d),se===ee?Ue[se].p(d,R):(pl(),Ke(Ue[ee],1,1,()=>{Ue[ee]=null}),fl(),me=Ue[se],me?me.p(d,R):(me=Ue[se]=Ct[se](d),me.c()),Xe(me,1),me.m(g,null)),(!$||R[0]&262144)&&Ze!==(Ze=d[18].t("Prompt suggestions")+"")&&q(Qe,Ze),R[0]&327680){We=mt(d[16]);let F;for(F=0;F<We.length;F+=1){const x=rl(d,We,F);ae[F]?ae[F].p(x,R):(ae[F]=nl(x),ae[F].c(),ae[F].m(Le,null))}for(;F<ae.length;F+=1)ae[F].d(1);ae.length=We.length}if((!$||R[0]&262144)&&xe!==(xe=d[18].t("Categories")+"")&&q($e,xe),R[0]&131072){Ye=mt(Object.keys(d[17]));let F;for(F=0;F<Ye.length;F+=1){const x=al(d,Ye,F);re[F]?re[F].p(x,R):(re[F]=il(x),re[F].c(),re[F].m(Oe,null))}for(;F<re.length;F+=1)re[F].d(1);re.length=Ye.length}d[11]!==null?ue?ue.p(d,R):(ue=ul(d),ue.c(),ue.m(c,et)):ue&&(ue.d(1),ue=null),(!$||R[0]&262144)&&Ge!==(Ge=d[18].t("Save & Create")+"")&&q(tt,Ge),d[6]?pe||(pe=cl(),pe.c(),pe.m(ve,null)):pe&&(pe.d(1),pe=null),(!$||R[0]&64&&lt!==(lt="text-sm px-3 py-2 transition rounded-xl "+(d[6]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800")+" flex"))&&a(ve,"class",lt),(!$||R[0]&64)&&(ve.disabled=d[6])},i(d){$||(Xe(me),$=!0)},o(d){Ke(me),$=!1},d(d){d&&r(t),s[21](null),ye.d(),Ie.d(),Ue[se].d(),Kt(ae,d),Kt(re,d),ue&&ue.d(),pe&&pe.d(),Tt=!1,gt(Nt)}}}function Wl(s,t,e){let o,n;Qt(s,Ml,g=>e(44,o=g));const p=_l("i18n");Qt(s,p,g=>e(18,n=g));let N=!1,b,m,T=null,I="",A=null,c=!1,w="",_="",v="",z=!0,W=!1,y="",U="",Y="",X="",h={seed:0,stop:"",temperature:"",repeat_penalty:"",repeat_last_n:"",mirostat:"",mirostat_eta:"",mirostat_tau:"",top_k:"",top_p:"",tfs_z:"",num_ctx:"",num_predict:""},V=null,k=[{content:""}],L={character:!1,assistant:!1,writing:!1,productivity:!1,programming:!1,"data analysis":!1,lifestyle:!1,education:!1,business:!1};const O=async g=>{await Sl(localStorage.token,g),await Al.set(await Bl(localStorage.token))},J=async()=>{if(e(6,N=!0),Object.keys(L).filter(g=>L[g]).length==0)return _t.error("Uh-oh! It looks like you missed selecting a category. Please choose one to complete your modelfile."),e(6,N=!1),c=!1,c;if(o.map(g=>g.name).includes(_)||await Nl(localStorage.token,_).catch(()=>!1))return _t.error(`Uh-oh! It looks like you already have a model named '${_}'. Please choose a different name to complete your modelfile.`),e(6,N=!1),c=!1,c;if(w!==""&&v!==""&&y!==""&&Object.keys(L).filter(g=>L[g]).length>0&&!o.includes(_)){const g=await Rl(localStorage.token,_,y);if(g){const P=g.body.pipeThrough(new TextDecoderStream).pipeThrough(Pl(`
`)).getReader();for(;;){const{value:fe,done:ie}=await P.read();if(ie)break;try{let he=fe.split(`
`);for(const Ve of he)if(Ve!==""){console.log(Ve);let H=JSON.parse(Ve);if(console.log(H),H.error)throw H.error;if(H.detail)throw H.detail;H.status&&(!H.digest&&!H.status.includes("writing")&&!H.status.includes("sha256")?(_t.success(H.status),H.status==="success"&&(c=!0)):H.digest&&(e(10,I=H.digest),H.completed?e(11,A=Math.round(H.completed/H.total*1e3)/10):e(11,A=100)))}}catch(he){console.log(he),_t.error(he)}}}c&&(await O({tagName:_,imageUrl:T,title:w,desc:v,content:y,suggestionPrompts:k.filter(P=>P.content!==""),categories:Object.keys(L).filter(P=>L[P]),user:V!==null?V:void 0}),await Dl("/workspace/modelfiles"))}e(6,N=!1),c=!1};vl(async()=>{if(window.addEventListener("message",async g=>{if(!["https://ollamahub.com","https://www.ollamahub.com","https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(g.origin))return;const P=JSON.parse(g.data);console.log(P),e(9,T=P.imageUrl),e(0,w=P.title),await $t(),e(12,_=`${P.user.username==="hub"?"":"hub/"}${P.user.username}/${P.tagName}`),e(13,v=P.desc),e(15,y=P.content),e(16,k=P.suggestionPrompts.length!=0?P.suggestionPrompts:[{content:""}]),V={username:P.user.username,name:P.user.name};for(const fe of P.categories)e(17,L[fe.toLowerCase()]=!0,L)}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.modelfile){const g=JSON.parse(sessionStorage.modelfile);console.log(g),e(9,T=g.imageUrl),e(0,w=g.title),await $t(),e(12,_=g.tagName),e(13,v=g.desc),e(15,y=g.content),e(16,k=g.suggestionPrompts.length!=0?g.suggestionPrompts:[{content:""}]);for(const P of g.categories)e(17,L[P.toLowerCase()]=!0,L);sessionStorage.removeItem("modelfile")}});function te(g){dl[g?"unshift":"push"](()=>{b=g,e(7,b)})}function Q(){m=this.files,e(8,m)}const _e=()=>{let g=new FileReader;g.onload=P=>{let fe=`${P.target.result}`;const ie=new Image;ie.src=fe,ie.onload=function(){const he=document.createElement("canvas"),Ve=he.getContext("2d"),H=ie.width/ie.height;let Se,se;H>1?(Se=100*H,se=100):(Se=100,se=100/H),he.width=100,he.height=100;const me=(100-Se)/2,Je=(100-se)/2;Ve.drawImage(ie,me,Je,Se,se);const De=he.toDataURL("image/jpeg");e(9,T=De),e(8,m=null)}},m&&m.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(m[0].type)?g.readAsDataURL(m[0]):(console.log(`Unsupported File Type '${m[0].type}'.`),e(8,m=null))},le=()=>{history.back()},we=()=>{b.click()};function ge(){w=this.value,e(0,w)}function de(){_=this.value,e(12,_),e(0,w)}function ke(){v=this.value,e(13,v)}const oe=()=>{e(1,z=!z)};function Me(){y=this.value,e(15,y),e(1,z),e(2,U),e(4,X),e(5,h),e(3,Y)}const Te=()=>{e(1,z=!z)};function Z(){U=this.value,e(2,U)}function j(){Y=this.value,e(3,Y)}const E=()=>{e(14,W=!W)};function S(){X=this.value,e(4,X)}function Ae(g){h=g,e(5,h)}const Re=()=>{(k.length===0||k.at(-1).content!=="")&&e(16,k=[...k,{content:""}])};function be(g,P){g[P].content=this.value,e(16,k)}const ne=g=>{k.splice(g,1),e(16,k)};function Ee(g){L[g]=this.checked,e(17,L)}const Ne=()=>{J()};return s.$$.update=()=>{s.$$.dirty[0]&1&&e(12,_=w!==""?`${w.replace(/\s+/g,"-").toLowerCase()}:latest`:""),s.$$.dirty[0]&62&&(z||e(15,y=`FROM ${U}
${X!==""?`TEMPLATE """${X}"""`:""}
${h.seed!==0?`PARAMETER seed ${h.seed}`:""}
${h.stop!==""?`PARAMETER stop ${h.stop}`:""}
${h.temperature!==""?`PARAMETER temperature ${h.temperature}`:""}
${h.repeat_penalty!==""?`PARAMETER repeat_penalty ${h.repeat_penalty}`:""}
${h.repeat_last_n!==""?`PARAMETER repeat_last_n ${h.repeat_last_n}`:""}
${h.mirostat!==""?`PARAMETER mirostat ${h.mirostat}`:""}
${h.mirostat_eta!==""?`PARAMETER mirostat_eta ${h.mirostat_eta}`:""}
${h.mirostat_tau!==""?`PARAMETER mirostat_tau ${h.mirostat_tau}`:""}
${h.top_k!==""?`PARAMETER top_k ${h.top_k}`:""}
${h.top_p!==""?`PARAMETER top_p ${h.top_p}`:""}
${h.tfs_z!==""?`PARAMETER tfs_z ${h.tfs_z}`:""}
${h.num_ctx!==""?`PARAMETER num_ctx ${h.num_ctx}`:""}
${h.num_predict!==""?`PARAMETER num_predict ${h.num_predict}`:""}
SYSTEM """${Y}"""`.replace(/^\s*\n/gm,"")))},[w,z,U,Y,X,h,N,b,m,T,I,A,_,v,W,y,k,L,n,p,J,te,Q,_e,le,we,ge,de,ke,oe,Me,Te,Z,j,E,S,Ae,Re,be,ne,Ee,Ne]}class ts extends bl{constructor(t){super(),wl(this,t,Wl,ql,hl,{},null,[-1,-1])}}export{ts as component};
