import{s as oe,z as ee,A as te,h as N,d as g,j as c,i as E,r as b,C as J,p as Ve,Y as Ie,w as ne,P as Oe,X as Te,o as Ce,a as j,c as S,f as M,g as D,E as Pe,F as Be,G as ze,H as je,K as ge,l as A,m as H,n as Z,Q as _e,u as ie,R as ue}from"./scheduler.bcadb9af.js";import{S as fe,i as ce,f as Se,b as R,d as U,m as F,a as I,t as T,e as G,g as se,c as re}from"./index.bbb895f1.js";import{e as ae}from"./each.f3e982ad.js";import{T as he}from"./create.324e2fd2.js";import{c as Le,d as We,M as Ae}from"./menu-trigger.9c7a531b.js";import{f as He}from"./index.1df8947f.js";import{g as qe,p as Ze,c as Re,d as Ue}from"./index.8cda1db3.js";import{M as x,m as Fe,u as Ge,d as Ye}from"./index.9487f70b.js";import{a as Y}from"./Toaster.svelte_svelte_type_style_lang.a4036649.js";import{s as Je,o as Ke}from"./index.146e7b79.js";/* empty css                                               */function Qe(r){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(s){e=te(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var l=N(e);t=te(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),N(t).forEach(g),l.forEach(g),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m19.5 8.25-7.5 7.5-7.5-7.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(s,l){E(s,e,l),b(e,t)},p(s,[l]){l&2&&c(e,"stroke-width",s[1]),l&1&&c(e,"class",s[0])},i:J,o:J,d(s){s&&g(e)}}}function Xe(r,e,t){let{className:s="w-4 h-4"}=e,{strokeWidth:l="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,s=n.className),"strokeWidth"in n&&t(1,l=n.strokeWidth)},[s,l]}class xe extends fe{constructor(e){super(),ce(this,e,Xe,Qe,oe,{className:0,strokeWidth:1})}}function et(r){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(s){e=te(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var l=N(e);t=te(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),N(t).forEach(g),l.forEach(g),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m4.5 12.75 6 6 9-13.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(s,l){E(s,e,l),b(e,t)},p(s,[l]){l&2&&c(e,"stroke-width",s[1]),l&1&&c(e,"class",s[0])},i:J,o:J,d(s){s&&g(e)}}}function tt(r,e,t){let{className:s="w-4 h-4"}=e,{strokeWidth:l="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,s=n.className),"strokeWidth"in n&&t(1,l=n.strokeWidth)},[s,l]}class lt extends fe{constructor(e){super(),ce(this,e,tt,et,oe,{className:0,strokeWidth:1})}}function st(r){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(s){e=te(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var l=N(e);t=te(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),N(t).forEach(g),l.forEach(g),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",r[1]),c(e,"stroke","currentColor"),c(e,"class",r[0])},m(s,l){E(s,e,l),b(e,t)},p(s,[l]){l&2&&c(e,"stroke-width",s[1]),l&1&&c(e,"class",s[0])},i:J,o:J,d(s){s&&g(e)}}}function rt(r,e,t){let{className:s="w-4 h-4"}=e,{strokeWidth:l="1.5"}=e;return r.$$set=n=>{"className"in n&&t(0,s=n.className),"strokeWidth"in n&&t(1,l=n.strokeWidth)},[s,l]}class nt extends fe{constructor(e){super(),ce(this,e,rt,st,oe,{className:0,strokeWidth:1})}}function pe(r,e,t){const s=r.slice();return s[27]=e[t],s}function ve(r,e,t){const s=r.slice();return s[30]=e[t],s}function at(r){let e;return{c(){e=A(r[1])},l(t){e=H(t,r[1])},m(t,s){E(t,e,s)},p(t,s){s[0]&2&&Z(e,t[1])},d(t){t&&g(e)}}}function ot(r){let e=r[7].label+"",t;return{c(){t=A(e)},l(s){t=H(s,e)},m(s,l){E(s,t,l)},p(s,l){l[0]&128&&e!==(e=s[7].label+"")&&Z(t,e)},d(s){s&&g(t)}}}function it(r){let e,t,s,l;function n(m,v){return m[7]?ot:at}let o=n(r),i=o(r);return s=new xe({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=M("div"),i.c(),t=j(),R(s.$$.fragment),this.h()},l(m){e=D(m,"DIV",{class:!0});var v=N(e);i.l(v),t=S(v),U(s.$$.fragment,v),v.forEach(g),this.h()},h(){c(e,"class","flex w-full text-left px-0.5 outline-none bg-transparent truncate text-lg font-semibold placeholder-gray-400 focus:outline-none")},m(m,v){E(m,e,v),i.m(e,null),b(e,t),F(s,e,null),l=!0},p(m,v){o===(o=n(m))&&i?i.p(m,v):(i.d(1),i=o(m),i&&(i.c(),i.m(e,t)))},i(m){l||(I(s.$$.fragment,m),l=!0)},o(m){T(s.$$.fragment,m),l=!1},d(m){m&&g(e),i.d(),G(s)}}}function we(r){let e,t,s,l,n,o,i,m,v;return t=new nt({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=M("div"),R(t.$$.fragment),s=j(),l=M("input"),n=j(),o=M("hr"),this.h()},l(w){e=D(w,"DIV",{class:!0});var d=N(e);U(t.$$.fragment,d),s=S(d),l=D(d,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0}),d.forEach(g),n=S(w),o=D(w,"HR",{class:!0}),this.h()},h(){c(l,"id","model-search-input"),c(l,"class","w-full text-sm bg-transparent outline-none"),c(l,"placeholder",r[3]),c(l,"autocomplete","off"),c(e,"class","flex items-center gap-2.5 px-5 mt-3.5 mb-3"),c(o,"class","border-gray-100 dark:border-gray-800")},m(w,d){E(w,e,d),F(t,e,null),b(e,s),b(e,l),_e(l,r[5]),E(w,n,d),E(w,o,d),i=!0,m||(v=ie(l,"input",r[19]),m=!0)},p(w,d){(!i||d[0]&8)&&c(l,"placeholder",w[3]),d[0]&32&&l.value!==w[5]&&_e(l,w[5])},i(w){i||(I(t.$$.fragment,w),i=!0)},o(w){T(t.$$.fragment,w),i=!1},d(w){w&&(g(e),g(n),g(o)),G(t),m=!1,v()}}}function ke(r){let e,t,s=r[11].t("No results found")+"",l;return{c(){e=M("div"),t=M("div"),l=A(s),this.h()},l(n){e=D(n,"DIV",{});var o=N(e);t=D(o,"DIV",{class:!0});var i=N(t);l=H(i,s),i.forEach(g),o.forEach(g),this.h()},h(){c(t,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100")},m(n,o){E(n,e,o),b(e,t),b(t,l)},p(n,o){o[0]&2048&&s!==(s=n[11].t("No results found")+"")&&Z(l,s)},d(n){n&&g(e)}}}function ut(r){var s,l,n,o;let e,t;return e=new he({props:{content:`${(l=(s=r[30].info)==null?void 0:s.details)!=null&&l.quantization_level?((o=(n=r[30].info)==null?void 0:n.details)==null?void 0:o.quantization_level)+" ":""}${r[30].info.size?`(${(r[30].info.size/1024**3).toFixed(1)}GB)`:""}`,$$slots:{default:[ct]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(i){U(e.$$.fragment,i)},m(i,m){F(e,i,m),t=!0},p(i,m){var w,d,k,p;const v={};m[0]&512&&(v.content=`${(d=(w=i[30].info)==null?void 0:w.details)!=null&&d.quantization_level?((p=(k=i[30].info)==null?void 0:k.details)==null?void 0:p.quantization_level)+" ":""}${i[30].info.size?`(${(i[30].info.size/1024**3).toFixed(1)}GB)`:""}`),m[0]&33554432&&(v.$$scope={dirty:m,ctx:i}),e.$set(v)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){T(e.$$.fragment,i),t=!1},d(i){G(e,i)}}}function ft(r){var s;let e,t;return e=new he({props:{content:((s=r[30].info)==null?void 0:s.source)??"External",$$slots:{default:[dt]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){F(e,l,n),t=!0},p(l,n){var i;const o={};n[0]&512&&(o.content=((i=l[30].info)==null?void 0:i.source)??"External"),n[0]&33554432&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){G(e,l)}}}function ct(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(s){e=D(s,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1gyx42g"&&(e.innerHTML=t),this.h()},h(){c(e,"class","mr-2")},m(s,l){E(s,e,l)},p:J,d(s){s&&g(e)}}}function dt(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(s){e=D(s,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1y35m72"&&(e.innerHTML=t),this.h()},h(){c(e,"class","mr-2")},m(s,l){E(s,e,l)},p:J,d(s){s&&g(e)}}}function be(r){let e,t,s;return t=new lt({}),{c(){e=M("div"),R(t.$$.fragment),this.h()},l(l){e=D(l,"DIV",{class:!0});var n=N(e);U(t.$$.fragment,n),n.forEach(g),this.h()},h(){c(e,"class","ml-auto")},m(l,n){E(l,e,n),F(t,e,null),s=!0},i(l){s||(I(t.$$.fragment,l),s=!0)},o(l){T(t.$$.fragment,l),s=!1},d(l){l&&g(e),G(t)}}}function $e(r){var f,P;let e,t,s,l=r[30].label+"",n,o,i,m=(((P=(f=r[30].info)==null?void 0:f.details)==null?void 0:P.parameter_size)??"")+"",v,w,d,k,p,L,$,y;const V=[ft,ut],_=[];function C(B,O){return B[30].info.external?0:1}d=C(r),k=_[d]=V[d](r);let a=r[0]===r[30].value&&be();function u(){return r[20](r[30])}return{c(){e=M("button"),t=M("div"),s=M("div"),n=A(l),o=j(),i=M("span"),v=A(m),w=j(),k.c(),p=j(),a&&a.c(),this.h()},l(B){e=D(B,"BUTTON",{"aria-label":!0,class:!0});var O=N(e);t=D(O,"DIV",{class:!0});var W=N(t);s=D(W,"DIV",{class:!0});var q=N(s);n=H(q,l),o=S(q),i=D(q,"SPAN",{class:!0});var K=N(i);v=H(K,m),K.forEach(g),q.forEach(g),w=S(W),k.l(W),W.forEach(g),p=S(O),a&&a.l(O),O.forEach(g),this.h()},h(){c(i,"class","text-xs font-medium text-gray-600 dark:text-gray-400"),c(s,"class","line-clamp-1"),c(t,"class","flex items-center gap-2"),c(e,"aria-label","model-item"),c(e,"class","flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-none transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-[highlighted]:bg-muted")},m(B,O){E(B,e,O),b(e,t),b(t,s),b(s,n),b(s,o),b(s,i),b(i,v),b(t,w),_[d].m(t,null),b(e,p),a&&a.m(e,null),L=!0,$||(y=ie(e,"click",u),$=!0)},p(B,O){var q,K;r=B,(!L||O[0]&512)&&l!==(l=r[30].label+"")&&Z(n,l),(!L||O[0]&512)&&m!==(m=(((K=(q=r[30].info)==null?void 0:q.details)==null?void 0:K.parameter_size)??"")+"")&&Z(v,m);let W=d;d=C(r),d===W?_[d].p(r,O):(se(),T(_[W],1,1,()=>{_[W]=null}),re(),k=_[d],k?k.p(r,O):(k=_[d]=V[d](r),k.c()),I(k,1),k.m(t,null)),r[0]===r[30].value?a?O[0]&513&&I(a,1):(a=be(),a.c(),I(a,1),a.m(e,null)):a&&(se(),T(a,1,1,()=>{a=null}),re())},i(B){L||(I(k),I(a),L=!0)},o(B){T(k),T(a),L=!1},d(B){B&&g(e),_[d].d(),a&&a.d(),$=!1,y()}}}function ye(r){let e,t=r[11].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:r[5]})+"",s,l,n;return{c(){e=M("button"),s=A(t),this.h()},l(o){e=D(o,"BUTTON",{class:!0});var i=N(e);s=H(i,t),i.forEach(g),this.h()},h(){c(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-none transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-[highlighted]:bg-muted")},m(o,i){E(o,e,i),b(e,s),l||(n=ie(e,"click",r[21]),l=!0)},p(o,i){i[0]&2080&&t!==(t=o[11].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[5]})+"")&&Z(s,t)},d(o){o&&g(e),l=!1,n()}}}function Ee(r){let e,t=r[10][r[27]].digest+"",s;return{c(){e=M("div"),s=A(t),this.h()},l(l){e=D(l,"DIV",{class:!0});var n=N(e);s=H(n,t),n.forEach(g),this.h()},h(){c(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(l,n){E(l,e,n),b(e,s)},p(l,n){n[0]&1024&&t!==(t=l[10][l[27]].digest+"")&&Z(s,t)},d(l){l&&g(e)}}}function ht(r){let e,t='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',s,l;function n(){return r[22](r[27])}return{c(){e=M("button"),e.innerHTML=t,this.h()},l(o){e=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-19bzgft"&&(e.innerHTML=t),this.h()},h(){c(e,"class","text-gray-800 dark:text-gray-100")},m(o,i){E(o,e,i),s||(l=ie(e,"click",n),s=!0)},p(o,i){r=o},d(o){o&&g(e),s=!1,l()}}}function Me(r){let e,t,s,l=`<svg class="size-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`,n,o,i,m,v=r[27]+"",w,d,k="pullProgress"in r[10][r[27]]?`(${r[10][r[27]].pullProgress}%)`:"",p,L,$,y,V,_,C,a="digest"in r[10][r[27]]&&r[10][r[27]].digest&&Ee(r);return V=new he({props:{content:r[11].t("Cancel"),$$slots:{default:[ht]},$$scope:{ctx:r}}}),{c(){e=M("div"),t=M("div"),s=M("div"),s.innerHTML=l,n=j(),o=M("div"),i=M("div"),m=A('Downloading "'),w=A(v),d=A('" '),p=A(k),L=j(),a&&a.c(),$=j(),y=M("div"),R(V.$$.fragment),_=j(),this.h()},l(u){e=D(u,"DIV",{class:!0});var f=N(e);t=D(f,"DIV",{class:!0});var P=N(t);s=D(P,"DIV",{class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-102rp4j"&&(s.innerHTML=l),n=S(P),o=D(P,"DIV",{class:!0});var B=N(o);i=D(B,"DIV",{class:!0});var O=N(i);m=H(O,'Downloading "'),w=H(O,v),d=H(O,'" '),p=H(O,k),O.forEach(g),L=S(B),a&&a.l(B),B.forEach(g),P.forEach(g),$=S(f),y=D(f,"DIV",{class:!0});var W=N(y);U(V.$$.fragment,W),W.forEach(g),_=S(f),f.forEach(g),this.h()},h(){c(s,"class","-ml-2 mr-2.5 translate-y-0.5"),c(i,"class","line-clamp-1"),c(o,"class","flex flex-col self-start"),c(t,"class","flex"),c(y,"class","mr-2 translate-y-0.5"),c(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-none transition-all duration-75 rounded-lg cursor-pointer data-[highlighted]:bg-muted")},m(u,f){E(u,e,f),b(e,t),b(t,s),b(t,n),b(t,o),b(o,i),b(i,m),b(i,w),b(i,d),b(i,p),b(o,L),a&&a.m(o,null),b(e,$),b(e,y),F(V,y,null),b(e,_),C=!0},p(u,f){(!C||f[0]&1024)&&v!==(v=u[27]+"")&&Z(w,v),(!C||f[0]&1024)&&k!==(k="pullProgress"in u[10][u[27]]?`(${u[10][u[27]].pullProgress}%)`:"")&&Z(p,k),"digest"in u[10][u[27]]&&u[10][u[27]].digest?a?a.p(u,f):(a=Ee(u),a.c(),a.m(o,null)):a&&(a.d(1),a=null);const P={};f[0]&2048&&(P.content=u[11].t("Cancel")),f[0]&33555456&&(P.$$scope={dirty:f,ctx:u}),V.$set(P)},i(u){C||(I(V.$$.fragment,u),C=!0)},o(u){T(V.$$.fragment,u),C=!1},d(u){u&&g(e),a&&a.d(),G(V)}}}function mt(r){let e,t,s,l=!(r[5].trim()in r[10])&&r[5]&&r[8]&&r[13].role==="admin",n,o,i,m,v,w,d=r[2]&&we(r),k=ae(r[9]),p=[];for(let a=0;a<k.length;a+=1)p[a]=$e(ve(r,k,a));const L=a=>T(p[a],1,1,()=>{p[a]=null});let $=null;k.length||($=ke(r));let y=l&&ye(r),V=ae(Object.keys(r[10])),_=[];for(let a=0;a<V.length;a+=1)_[a]=Me(pe(r,V,a));const C=a=>T(_[a],1,1,()=>{_[a]=null});return{c(){d&&d.c(),e=j(),t=M("div");for(let a=0;a<p.length;a+=1)p[a].c();$&&$.c(),s=j(),y&&y.c(),n=j();for(let a=0;a<_.length;a+=1)_[a].c();o=j(),i=M("div"),m=j(),v=M("div"),this.h()},l(a){d&&d.l(a),e=S(a),t=D(a,"DIV",{class:!0});var u=N(t);for(let f=0;f<p.length;f+=1)p[f].l(u);$&&$.l(u),s=S(u),y&&y.l(u),n=S(u);for(let f=0;f<_.length;f+=1)_[f].l(u);u.forEach(g),o=S(a),i=D(a,"DIV",{class:!0}),N(i).forEach(g),m=S(a),v=D(a,"DIV",{class:!0}),N(v).forEach(g),this.h()},h(){c(t,"class","px-3 my-2 max-h-64 overflow-y-auto scrollbar-hidden svelte-141e0sl"),c(i,"class","hidden w-[42rem]"),c(v,"class","hidden w-[32rem]")},m(a,u){d&&d.m(a,u),E(a,e,u),E(a,t,u);for(let f=0;f<p.length;f+=1)p[f]&&p[f].m(t,null);$&&$.m(t,null),b(t,s),y&&y.m(t,null),b(t,n);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(t,null);E(a,o,u),E(a,i,u),E(a,m,u),E(a,v,u),w=!0},p(a,u){if(a[2]?d?(d.p(a,u),u[0]&4&&I(d,1)):(d=we(a),d.c(),I(d,1),d.m(e.parentNode,e)):d&&(se(),T(d,1,1,()=>{d=null}),re()),u[0]&2625){k=ae(a[9]);let f;for(f=0;f<k.length;f+=1){const P=ve(a,k,f);p[f]?(p[f].p(P,u),I(p[f],1)):(p[f]=$e(P),p[f].c(),I(p[f],1),p[f].m(t,s))}for(se(),f=k.length;f<p.length;f+=1)L(f);re(),!k.length&&$?$.p(a,u):k.length?$&&($.d(1),$=null):($=ke(a),$.c(),$.m(t,s))}if(u[0]&9504&&(l=!(a[5].trim()in a[10])&&a[5]&&a[8]&&a[13].role==="admin"),l?y?y.p(a,u):(y=ye(a),y.c(),y.m(t,n)):y&&(y.d(1),y=null),u[0]&68608){V=ae(Object.keys(a[10]));let f;for(f=0;f<V.length;f+=1){const P=pe(a,V,f);_[f]?(_[f].p(P,u),I(_[f],1)):(_[f]=Me(P),_[f].c(),I(_[f],1),_[f].m(t,null))}for(se(),f=V.length;f<_.length;f+=1)C(f);re()}},i(a){if(!w){I(d);for(let u=0;u<k.length;u+=1)I(p[u]);for(let u=0;u<V.length;u+=1)I(_[u]);w=!0}},o(a){T(d),p=p.filter(Boolean);for(let u=0;u<p.length;u+=1)T(p[u]);_=_.filter(Boolean);for(let u=0;u<_.length;u+=1)T(_[u]);w=!1},d(a){a&&(g(e),g(t),g(o),g(i),g(m),g(v)),d&&d.d(a),ge(p,a),$&&$.d(),y&&y.d(),ge(_,a)}}}function gt(r){let e;const t=r[18].default,s=Pe(t,r,r[25],null),l=s||mt(r);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,o){l&&l.m(n,o),e=!0},p(n,o){s?s.p&&(!e||o[0]&33554432)&&Be(s,t,n,n[25],e?je(t,n[25],o,null):ze(n[25]),null):l&&l.p&&(!e||o[0]&12141)&&l.p(n,e?o:[-1,-1])},i(n){e||(I(l,n),e=!0)},o(n){T(l,n),e=!1},d(n){l&&l.d(n)}}}function _t(r){let e,t,s,l;return e=new We({props:{class:"relative w-full","aria-label":r[1],$$slots:{default:[it]},$$scope:{ctx:r}}}),s=new Ae({props:{class:" z-40 "+(r[12]?"w-full":`${r[4]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-300/30 dark:border-gray-700/50  outline-none ",transition:He,side:r[12]?"bottom":"bottom-start",sideOffset:4,$$slots:{default:[gt]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment),t=j(),R(s.$$.fragment)},l(n){U(e.$$.fragment,n),t=S(n),U(s.$$.fragment,n)},m(n,o){F(e,n,o),E(n,t,o),F(s,n,o),l=!0},p(n,o){const i={};o[0]&2&&(i["aria-label"]=n[1]),o[0]&33554562&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);const m={};o[0]&4112&&(m.class=" z-40 "+(n[12]?"w-full":`${n[4]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-300/30 dark:border-gray-700/50  outline-none "),o[0]&4096&&(m.side=n[12]?"bottom":"bottom-start"),o[0]&33566573&&(m.$$scope={dirty:o,ctx:n}),s.$set(m)},i(n){l||(I(e.$$.fragment,n),I(s.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),T(s.$$.fragment,n),l=!1},d(n){n&&g(t),G(e,n),G(s,n)}}}function pt(r){let e,t,s;function l(o){r[24](o)}let n={onOpenChange:r[23],$$slots:{default:[_t]},$$scope:{ctx:r}};return r[6]!==void 0&&(n.open=r[6]),e=new Le({props:n}),Ve.push(()=>Se(e,"open",l)),{c(){R(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,i){F(e,o,i),s=!0},p(o,i){const m={};i[0]&32&&(m.onOpenChange=o[23]),i[0]&33570815&&(m.$$scope={dirty:i,ctx:o}),!t&&i[0]&64&&(t=!0,m.open=o[6],Ie(()=>t=!1)),e.$set(m)},i(o){s||(I(e.$$.fragment,o),s=!0)},o(o){T(e.$$.fragment,o),s=!1},d(o){G(e,o)}}}function vt(r,e,t){let s,l,n,o,i;ne(r,x,h=>t(10,l=h)),ne(r,Fe,h=>t(12,o=h)),ne(r,Ge,h=>t(13,i=h));let{$$slots:m={},$$scope:v}=e;const w=Oe("i18n");ne(r,w,h=>t(11,n=h)),Te();let{value:d=""}=e,{placeholder:k="Select a model"}=e,{searchEnabled:p=!0}=e,{searchPlaceholder:L=n.t("Search a model")}=e,{items:$=[{value:"mango",label:"Mango"}]}=e,{className:y="w-[30rem]"}=e,V=!1,_="",C="",a=null;const u=async()=>{const h=C.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(console.log(l),l[h]){Y.error(n.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:h}));return}if(Object.keys(l).length===3){Y.error(n.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const le=await Ze(localStorage.token,h,"0").catch(X=>(Y.error(X),null));if(le){const X=le.body.pipeThrough(new TextDecoderStream).pipeThrough(Je(`
`)).getReader();for(;;)try{const{value:Q,done:De}=await X.read();if(De)break;let Ne=Q.split(`
`);for(const me of Ne)if(me!==""){let z=JSON.parse(me);if(console.log(z),z.error)throw z.error;if(z.detail)throw z.detail;if(z.id&&(x.set({...l,[h]:{...l[h],requestId:z.id,reader:X,done:!1}}),console.log(z)),z.status)if(z.digest){let de=0;z.completed?de=Math.round(z.completed/z.total*1e3)/10:de=100,x.set({...l,[h]:{...l[h],pullProgress:de,digest:z.digest}})}else Y.success(z.status),x.set({...l,[h]:{...l[h],done:z.status==="success"}})}}catch(Q){console.log(Q),typeof Q!="string"&&(Q=Q.message),Y.error(Q)}l[h].done?(Y.success(n.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:h})),Ye.set(await Ke(localStorage.token))):Y.error(n.t("Download canceled")),delete l[h],x.set({...l})}};Ce(async()=>{t(8,a=await qe(localStorage.token).catch(h=>!1))});const f=async h=>{const{reader:le,requestId:X}=l[h];le&&(await le.cancel(),await Re(localStorage.token,X),delete l[h],x.set({...l}),await Ue(localStorage.token,h),Y.success(`${h} download has been canceled`))};function P(){C=this.value,t(5,C)}const B=h=>{t(0,d=h.value),t(6,V=!1)},O=()=>{u()},W=h=>{f(h)},q=async()=>{t(5,C=""),window.setTimeout(()=>{var h;return(h=document.getElementById("model-search-input"))==null?void 0:h.focus()},0)};function K(h){V=h,t(6,V)}return r.$$set=h=>{"value"in h&&t(0,d=h.value),"placeholder"in h&&t(1,k=h.placeholder),"searchEnabled"in h&&t(2,p=h.searchEnabled),"searchPlaceholder"in h&&t(3,L=h.searchPlaceholder),"items"in h&&t(17,$=h.items),"className"in h&&t(4,y=h.className),"$$scope"in h&&t(25,v=h.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&131073&&t(7,_=$.find(h=>h.value===d)??""),r.$$.dirty[0]&131104&&t(9,s=C?$.filter(h=>h.value.toLowerCase().includes(C.toLowerCase())):$)},[d,k,p,L,y,C,V,_,a,s,l,n,o,i,w,u,f,$,m,P,B,O,W,q,K,v]}class Ot extends fe{constructor(e){super(),ce(this,e,vt,pt,oe,{value:0,placeholder:1,searchEnabled:2,searchPlaceholder:3,items:17,className:4},null,[-1,-1])}}export{Ot as S};
