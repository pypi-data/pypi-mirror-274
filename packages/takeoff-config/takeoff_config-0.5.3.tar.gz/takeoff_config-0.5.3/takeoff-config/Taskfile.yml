version: '3'

tasks:
  # ------------------------------------------- Default -------------------------------------------- #
  print-format:
    desc: "Print formatted message"
    vars:
      MESSAGE: '{{default "HI" .MESSAGE}}'
    cmds:
      - echo -e '{{.SEP_LINE}}\n───{{.MESSAGE}}\n{{.SEP_LINE}}'
    internal: true

  # ------------------------------------------- Setup ---------------------------------------------- #
  install-deps:
    desc: "Install the python package."
    cmds:
      - pip install maturin
      - pip install -r requirements_test.txt

  # ------------------------------------------- Testing -------------------------------------------- #

  test:
    desc: "Run unit tests for the compiled python package."
    deps:
      - install-deps
    cmds:
      - pytest tests/unit/ -vv
