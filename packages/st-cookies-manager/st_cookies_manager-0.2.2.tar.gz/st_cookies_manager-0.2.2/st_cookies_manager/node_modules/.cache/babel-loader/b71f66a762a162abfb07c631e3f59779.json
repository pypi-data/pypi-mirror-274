{"ast":null,"code":"// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { valueToString } from '../util/pretty';\n/** @ignore */\nconst kParent = Symbol.for('parent');\n/** @ignore */\nconst kRowIndex = Symbol.for('rowIndex');\n/** @ignore */\nconst kKeyToIdx = Symbol.for('keyToIdx');\n/** @ignore */\nconst kIdxToVal = Symbol.for('idxToVal');\n/** @ignore */\nconst kCustomInspect = Symbol.for('nodejs.util.inspect.custom');\nclass Row {\n  constructor(parent, numKeys) {\n    this[kParent] = parent;\n    this.size = numKeys;\n  }\n  entries() {\n    return this[Symbol.iterator]();\n  }\n  has(key) {\n    return this.get(key) !== undefined;\n  }\n  get(key) {\n    let val = undefined;\n    if (key !== null && key !== undefined) {\n      const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n      let idx = ktoi.get(key);\n      if (idx !== undefined) {\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n        (val = itov[idx]) !== undefined || (itov[idx] = val = this.getValue(idx));\n      } else if ((idx = this.getIndex(key)) > -1) {\n        ktoi.set(key, idx);\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n        (val = itov[idx]) !== undefined || (itov[idx] = val = this.getValue(idx));\n      }\n    }\n    return val;\n  }\n  set(key, val) {\n    if (key !== null && key !== undefined) {\n      const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n      let idx = ktoi.get(key);\n      if (idx === undefined) {\n        ktoi.set(key, idx = this.getIndex(key));\n      }\n      if (idx > -1) {\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n        itov[idx] = this.setValue(idx, val);\n      }\n    }\n    return this;\n  }\n  clear() {\n    throw new Error(\"Clearing \".concat(this[Symbol.toStringTag], \" not supported.\"));\n  }\n  delete(_) {\n    throw new Error(\"Deleting \".concat(this[Symbol.toStringTag], \" values not supported.\"));\n  }\n  *[Symbol.iterator]() {\n    const ki = this.keys();\n    const vi = this.values();\n    const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n    const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n    for (let k, v, i = 0, kr, vr; !((kr = ki.next()).done || (vr = vi.next()).done); ++i) {\n      k = kr.value;\n      v = vr.value;\n      itov[i] = v;\n      ktoi.has(k) || ktoi.set(k, i);\n      yield [k, v];\n    }\n  }\n  forEach(callbackfn, thisArg) {\n    const ki = this.keys();\n    const vi = this.values();\n    const callback = thisArg === undefined ? callbackfn : (v, k, m) => callbackfn.call(thisArg, v, k, m);\n    const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n    const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n    for (let k, v, i = 0, kr, vr; !((kr = ki.next()).done || (vr = vi.next()).done); ++i) {\n      k = kr.value;\n      v = vr.value;\n      itov[i] = v;\n      ktoi.has(k) || ktoi.set(k, i);\n      callback(v, k, this);\n    }\n  }\n  toArray() {\n    return [...this.values()];\n  }\n  toJSON() {\n    const obj = {};\n    this.forEach((val, key) => obj[key] = val);\n    return obj;\n  }\n  inspect() {\n    return this.toString();\n  }\n  [kCustomInspect]() {\n    return this.toString();\n  }\n  toString() {\n    const str = [];\n    this.forEach((val, key) => {\n      key = valueToString(key);\n      val = valueToString(val);\n      str.push(\"\".concat(key, \": \").concat(val));\n    });\n    return \"{ \".concat(str.join(', '), \" }\");\n  }\n}\nRow[Symbol.toStringTag] = (proto => {\n  Object.defineProperties(proto, {\n    'size': {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: 0\n    },\n    [kParent]: {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: null\n    },\n    [kRowIndex]: {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: -1\n    }\n  });\n  return proto[Symbol.toStringTag] = 'Row';\n})(Row.prototype);\nexport class MapRow extends Row {\n  constructor(slice) {\n    super(slice, slice.length);\n    return createRowProxy(this);\n  }\n  keys() {\n    return this[kParent].getChildAt(0)[Symbol.iterator]();\n  }\n  values() {\n    return this[kParent].getChildAt(1)[Symbol.iterator]();\n  }\n  getKey(idx) {\n    return this[kParent].getChildAt(0).get(idx);\n  }\n  getIndex(key) {\n    return this[kParent].getChildAt(0).indexOf(key);\n  }\n  getValue(index) {\n    return this[kParent].getChildAt(1).get(index);\n  }\n  setValue(index, value) {\n    this[kParent].getChildAt(1).set(index, value);\n  }\n}\nexport class StructRow extends Row {\n  constructor(parent) {\n    super(parent, parent.type.children.length);\n    return defineRowProxyProperties(this);\n  }\n  *keys() {\n    for (const field of this[kParent].type.children) {\n      yield field.name;\n    }\n  }\n  *values() {\n    for (const field of this[kParent].type.children) {\n      yield this[field.name];\n    }\n  }\n  getKey(idx) {\n    return this[kParent].type.children[idx].name;\n  }\n  getIndex(key) {\n    return this[kParent].type.children.findIndex(f => f.name === key);\n  }\n  getValue(index) {\n    return this[kParent].getChildAt(index).get(this[kRowIndex]);\n  }\n  setValue(index, value) {\n    return this[kParent].getChildAt(index).set(this[kRowIndex], value);\n  }\n}\nObject.setPrototypeOf(Row.prototype, Map.prototype);\n/** @ignore */\nconst defineRowProxyProperties = (() => {\n  const desc = {\n    enumerable: true,\n    configurable: false,\n    get: null,\n    set: null\n  };\n  return row => {\n    let idx = -1,\n      ktoi = row[kKeyToIdx] || (row[kKeyToIdx] = new Map());\n    const getter = key => function () {\n      return this.get(key);\n    };\n    const setter = key => function (val) {\n      return this.set(key, val);\n    };\n    for (const key of row.keys()) {\n      ktoi.set(key, ++idx);\n      desc.get = getter(key);\n      desc.set = setter(key);\n      row.hasOwnProperty(key) || (desc.enumerable = true, Object.defineProperty(row, key, desc));\n      row.hasOwnProperty(idx) || (desc.enumerable = false, Object.defineProperty(row, idx, desc));\n    }\n    desc.get = desc.set = null;\n    return row;\n  };\n})();\n/** @ignore */\nconst createRowProxy = (() => {\n  if (typeof Proxy === 'undefined') {\n    return defineRowProxyProperties;\n  }\n  const has = Row.prototype.has;\n  const get = Row.prototype.get;\n  const set = Row.prototype.set;\n  const getKey = Row.prototype.getKey;\n  const RowProxyHandler = {\n    isExtensible() {\n      return false;\n    },\n    deleteProperty() {\n      return false;\n    },\n    preventExtensions() {\n      return true;\n    },\n    ownKeys(row) {\n      return [...row.keys()].map(x => \"\".concat(x));\n    },\n    has(row, key) {\n      switch (key) {\n        case 'getKey':\n        case 'getIndex':\n        case 'getValue':\n        case 'setValue':\n        case 'toArray':\n        case 'toJSON':\n        case 'inspect':\n        case 'constructor':\n        case 'isPrototypeOf':\n        case 'propertyIsEnumerable':\n        case 'toString':\n        case 'toLocaleString':\n        case 'valueOf':\n        case 'size':\n        case 'has':\n        case 'get':\n        case 'set':\n        case 'clear':\n        case 'delete':\n        case 'keys':\n        case 'values':\n        case 'entries':\n        case 'forEach':\n        case '__proto__':\n        case '__defineGetter__':\n        case '__defineSetter__':\n        case 'hasOwnProperty':\n        case '__lookupGetter__':\n        case '__lookupSetter__':\n        case Symbol.iterator:\n        case Symbol.toStringTag:\n        case kParent:\n        case kRowIndex:\n        case kIdxToVal:\n        case kKeyToIdx:\n        case kCustomInspect:\n          return true;\n      }\n      if (typeof key === 'number' && !row.has(key)) {\n        key = row.getKey(key);\n      }\n      return row.has(key);\n    },\n    get(row, key, receiver) {\n      switch (key) {\n        case 'getKey':\n        case 'getIndex':\n        case 'getValue':\n        case 'setValue':\n        case 'toArray':\n        case 'toJSON':\n        case 'inspect':\n        case 'constructor':\n        case 'isPrototypeOf':\n        case 'propertyIsEnumerable':\n        case 'toString':\n        case 'toLocaleString':\n        case 'valueOf':\n        case 'size':\n        case 'has':\n        case 'get':\n        case 'set':\n        case 'clear':\n        case 'delete':\n        case 'keys':\n        case 'values':\n        case 'entries':\n        case 'forEach':\n        case '__proto__':\n        case '__defineGetter__':\n        case '__defineSetter__':\n        case 'hasOwnProperty':\n        case '__lookupGetter__':\n        case '__lookupSetter__':\n        case Symbol.iterator:\n        case Symbol.toStringTag:\n        case kParent:\n        case kRowIndex:\n        case kIdxToVal:\n        case kKeyToIdx:\n        case kCustomInspect:\n          return Reflect.get(row, key, receiver);\n      }\n      if (typeof key === 'number' && !has.call(receiver, key)) {\n        key = getKey.call(receiver, key);\n      }\n      return get.call(receiver, key);\n    },\n    set(row, key, val, receiver) {\n      switch (key) {\n        case kParent:\n        case kRowIndex:\n        case kIdxToVal:\n        case kKeyToIdx:\n          return Reflect.set(row, key, val, receiver);\n        case 'getKey':\n        case 'getIndex':\n        case 'getValue':\n        case 'setValue':\n        case 'toArray':\n        case 'toJSON':\n        case 'inspect':\n        case 'constructor':\n        case 'isPrototypeOf':\n        case 'propertyIsEnumerable':\n        case 'toString':\n        case 'toLocaleString':\n        case 'valueOf':\n        case 'size':\n        case 'has':\n        case 'get':\n        case 'set':\n        case 'clear':\n        case 'delete':\n        case 'keys':\n        case 'values':\n        case 'entries':\n        case 'forEach':\n        case '__proto__':\n        case '__defineGetter__':\n        case '__defineSetter__':\n        case 'hasOwnProperty':\n        case '__lookupGetter__':\n        case '__lookupSetter__':\n        case Symbol.iterator:\n        case Symbol.toStringTag:\n          return false;\n      }\n      if (typeof key === 'number' && !has.call(receiver, key)) {\n        key = getKey.call(receiver, key);\n      }\n      return has.call(receiver, key) ? !!set.call(receiver, key, val) : false;\n    }\n  };\n  return row => new Proxy(row, RowProxyHandler);\n})();","map":{"version":3,"sources":["vector/row.ts"],"names":[],"mappings":"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","sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nimport { Vector } from '../vector';\nimport { StructVector } from './struct';\nimport { valueToString } from '../util/pretty';\nimport { DataType, Struct, RowLike } from '../type';\n\n/** @ignore */ const kParent = Symbol.for('parent');\n/** @ignore */ const kRowIndex = Symbol.for('rowIndex');\n/** @ignore */ const kKeyToIdx = Symbol.for('keyToIdx');\n/** @ignore */ const kIdxToVal = Symbol.for('idxToVal');\n/** @ignore */ const kCustomInspect = Symbol.for('nodejs.util.inspect.custom');\n\nabstract class Row<K extends PropertyKey = any, V = any> implements Map<K, V> {\n\n    public readonly size: number;\n    public readonly [Symbol.toStringTag]: string;\n\n    protected [kRowIndex]: number;\n    protected [kParent]: Vector<Struct>;\n    protected [kKeyToIdx]: Map<K, number>;\n    protected [kIdxToVal]: V[];\n\n    constructor(parent: Vector<Struct>, numKeys: number) {\n        this[kParent] = parent;\n        this.size = numKeys;\n    }\n\n    public abstract keys(): IterableIterator<K>;\n    public abstract values(): IterableIterator<V>;\n    public abstract getKey(idx: number): K;\n    public abstract getIndex(key: K): number;\n    public abstract getValue(idx: number): V;\n    public abstract setValue(idx: number, val: V): void;\n\n    public entries() { return this[Symbol.iterator](); }\n\n    public has(key: K) { return this.get(key) !== undefined; }\n\n    public get(key: K) {\n        let val = undefined;\n        if (key !== null && key !== undefined) {\n            const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n            let idx = ktoi.get(key);\n            if (idx !== undefined) {\n                const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n                ((val = itov[idx]) !== undefined) || (itov[idx] = val = this.getValue(idx));\n            } else if ((idx = this.getIndex(key)) > -1) {\n                ktoi.set(key, idx);\n                const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n                ((val = itov[idx]) !== undefined) || (itov[idx] = val = this.getValue(idx));\n            }\n        }\n        return val;\n    }\n\n    public set(key: K, val: V) {\n        if (key !== null && key !== undefined) {\n            const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n            let idx = ktoi.get(key);\n            if (idx === undefined) {\n                ktoi.set(key, idx = this.getIndex(key));\n            }\n            if (idx > -1) {\n                const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n                itov[idx] = <any> this.setValue(idx, val);\n            }\n        }\n        return this;\n    }\n\n    public clear(): void { throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`); }\n\n    public delete(_: K): boolean { throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`); }\n\n    public *[Symbol.iterator](): IterableIterator<[K, V]> {\n\n        const ki = this.keys();\n        const vi = this.values();\n        const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n\n        for (let k: K, v: V, i = 0, kr: IteratorResult<K>, vr: IteratorResult<V>;\n            !((kr = ki.next()).done || (vr = vi.next()).done);\n            ++i\n        ) {\n            k = kr.value;\n            v = vr.value;\n            itov[i] = v;\n            ktoi.has(k) || ktoi.set(k, i);\n            yield [k, v];\n        }\n    }\n\n    public forEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void {\n\n        const ki = this.keys();\n        const vi = this.values();\n        const callback = thisArg === undefined ? callbackfn :\n            (v: V, k: K, m: Map<K, V>) => callbackfn.call(thisArg, v, k, m);\n        const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n\n        for (let k: K, v: V, i = 0, kr: IteratorResult<K>, vr: IteratorResult<V>;\n            !((kr = ki.next()).done || (vr = vi.next()).done);\n            ++i\n        ) {\n            k = kr.value;\n            v = vr.value;\n            itov[i] = v;\n            ktoi.has(k) || ktoi.set(k, i);\n            callback(v, k, this);\n        }\n    }\n\n    public toArray() { return [...this.values()]; }\n    public toJSON() {\n        const obj = {} as any;\n        this.forEach((val, key) => obj[key] = val);\n        return obj;\n    }\n\n    public inspect() { return this.toString(); }\n    public [kCustomInspect]() { return this.toString(); }\n    public toString() {\n        const str: string[] = [];\n        this.forEach((val, key) => {\n            key = valueToString(key);\n            val = valueToString(val);\n            str.push(`${key}: ${val}`);\n        });\n        return `{ ${str.join(', ')} }`;\n    }\n\n    protected static [Symbol.toStringTag] = ((proto: Row) => {\n        Object.defineProperties(proto, {\n            'size': { writable: true, enumerable: false, configurable: false, value: 0 },\n            [kParent]: { writable: true, enumerable: false, configurable: false, value: null },\n            [kRowIndex]: { writable: true, enumerable: false, configurable: false, value: -1 },\n        });\n        return (proto as any)[Symbol.toStringTag] = 'Row';\n    })(Row.prototype);\n}\n\nexport class MapRow<K extends DataType = any, V extends DataType = any> extends Row<K['TValue'], V['TValue'] | null> {\n    constructor(slice: Vector<Struct<{ key: K, value: V }>>) {\n        super(slice, slice.length);\n        return createRowProxy(this);\n    }\n    public keys() {\n        return this[kParent].getChildAt(0)![Symbol.iterator]();\n    }\n    public values() {\n        return this[kParent].getChildAt(1)![Symbol.iterator]();\n    }\n    public getKey(idx: number): K['TValue'] {\n        return this[kParent].getChildAt(0)!.get(idx);\n    }\n    public getIndex(key: K['TValue']): number {\n        return this[kParent].getChildAt(0)!.indexOf(key);\n    }\n    public getValue(index: number): V['TValue'] | null {\n        return this[kParent].getChildAt(1)!.get(index);\n    }\n    public setValue(index: number, value: V['TValue'] | null): void {\n        this[kParent].getChildAt(1)!.set(index, value);\n    }\n}\n\nexport class StructRow<T extends { [key: string]: DataType } = any> extends Row<keyof T, T[keyof T]['TValue'] | null> {\n    constructor(parent: StructVector<T>) {\n        super(parent, parent.type.children.length);\n        return defineRowProxyProperties(this);\n    }\n    public *keys() {\n        for (const field of this[kParent].type.children) {\n            yield field.name as keyof T;\n        }\n    }\n    public *values() {\n        for (const field of this[kParent].type.children) {\n            yield (this as RowLike<T>)[field.name];\n        }\n    }\n    public getKey(idx: number): keyof T {\n        return this[kParent].type.children[idx].name as keyof T;\n    }\n    public getIndex(key: keyof T): number {\n        return this[kParent].type.children.findIndex((f) => f.name === key);\n    }\n    public getValue(index: number): T[keyof T]['TValue'] | null {\n        return this[kParent].getChildAt(index)!.get(this[kRowIndex]);\n    }\n    public setValue(index: number, value: T[keyof T]['TValue'] | null): void {\n        return this[kParent].getChildAt(index)!.set(this[kRowIndex], value);\n    }\n}\n\nObject.setPrototypeOf(Row.prototype, Map.prototype);\n\n/** @ignore */\nconst defineRowProxyProperties = (() => {\n    const desc = { enumerable: true, configurable: false, get: null as any, set: null as any };\n    return <T extends Row>(row: T) => {\n        let idx = -1, ktoi = row[kKeyToIdx] || (row[kKeyToIdx] = new Map());\n        const getter = (key: any) => function(this: T) { return this.get(key); };\n        const setter = (key: any) => function(this: T, val: any) { return this.set(key, val); };\n        for (const key of row.keys()) {\n            ktoi.set(key, ++idx);\n            desc.get = getter(key);\n            desc.set = setter(key);\n            row.hasOwnProperty(key) || (desc.enumerable = true, Object.defineProperty(row, key, desc));\n            row.hasOwnProperty(idx) || (desc.enumerable = false, Object.defineProperty(row, idx, desc));\n        }\n        desc.get = desc.set = null;\n        return row;\n    };\n})();\n\n/** @ignore */\nconst createRowProxy = (() => {\n    if (typeof Proxy === 'undefined') {\n        return defineRowProxyProperties;\n    }\n    const has = Row.prototype.has;\n    const get = Row.prototype.get;\n    const set = Row.prototype.set;\n    const getKey = Row.prototype.getKey;\n    const RowProxyHandler: ProxyHandler<Row> = {\n        isExtensible() { return false; },\n        deleteProperty() { return false; },\n        preventExtensions() { return true; },\n        ownKeys(row: Row) { return [...row.keys()].map((x) => `${x}`); },\n        has(row: Row, key: PropertyKey) {\n            switch (key) {\n                case 'getKey': case 'getIndex': case 'getValue': case 'setValue': case 'toArray': case 'toJSON': case 'inspect':\n                case 'constructor': case 'isPrototypeOf': case 'propertyIsEnumerable': case 'toString': case 'toLocaleString': case 'valueOf':\n                case 'size': case 'has': case 'get': case 'set': case 'clear': case 'delete': case 'keys': case 'values': case 'entries': case 'forEach':\n                case '__proto__': case '__defineGetter__': case '__defineSetter__': case 'hasOwnProperty': case '__lookupGetter__': case '__lookupSetter__':\n                case Symbol.iterator: case Symbol.toStringTag: case kParent: case kRowIndex: case kIdxToVal: case kKeyToIdx: case kCustomInspect:\n                    return true;\n            }\n            if (typeof key === 'number' && !row.has(key)) {\n                key = row.getKey(key);\n            }\n            return row.has(key);\n        },\n        get(row: Row, key: PropertyKey, receiver: any) {\n            switch (key) {\n                case 'getKey': case 'getIndex': case 'getValue': case 'setValue': case 'toArray': case 'toJSON': case 'inspect':\n                case 'constructor': case 'isPrototypeOf': case 'propertyIsEnumerable': case 'toString': case 'toLocaleString': case 'valueOf':\n                case 'size': case 'has': case 'get': case 'set': case 'clear': case 'delete': case 'keys': case 'values': case 'entries': case 'forEach':\n                case '__proto__': case '__defineGetter__': case '__defineSetter__': case 'hasOwnProperty': case '__lookupGetter__': case '__lookupSetter__':\n                case Symbol.iterator: case Symbol.toStringTag: case kParent: case kRowIndex: case kIdxToVal: case kKeyToIdx: case kCustomInspect:\n                    return Reflect.get(row, key, receiver);\n            }\n            if (typeof key === 'number' && !has.call(receiver, key)) {\n                key = getKey.call(receiver, key);\n            }\n            return get.call(receiver, key);\n        },\n        set(row: Row, key: PropertyKey, val: any, receiver: any) {\n            switch (key) {\n                case kParent: case kRowIndex: case kIdxToVal: case kKeyToIdx:\n                    return Reflect.set(row, key, val, receiver);\n                case 'getKey': case 'getIndex': case 'getValue': case 'setValue': case 'toArray': case 'toJSON': case 'inspect':\n                case 'constructor': case 'isPrototypeOf': case 'propertyIsEnumerable': case 'toString': case 'toLocaleString': case 'valueOf':\n                case 'size': case 'has': case 'get': case 'set': case 'clear': case 'delete': case 'keys': case 'values': case 'entries': case 'forEach':\n                case '__proto__': case '__defineGetter__': case '__defineSetter__': case 'hasOwnProperty': case '__lookupGetter__': case '__lookupSetter__':\n                case Symbol.iterator: case Symbol.toStringTag:\n                    return false;\n            }\n            if (typeof key === 'number' && !has.call(receiver, key)) {\n                key = getKey.call(receiver, key);\n            }\n            return has.call(receiver, key) ? !!set.call(receiver, key, val) : false;\n        },\n    };\n    return <T extends Row>(row: T) => new Proxy(row, RowProxyHandler) as T;\n})();\n"]},"metadata":{},"sourceType":"module"}