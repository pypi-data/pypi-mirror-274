{"code":"(this.webpackJsonpst_cookie_manager=this.webpackJsonpst_cookie_manager||[]).push([[0],{3:function(e,n,o){\"use strict\";o.r(n);var t=o(1);const a=(window.parent||window).document;let c=null;t.a.events.addEventListener(t.a.RENDER_EVENT,(function(e){const n=e.detail;var o;o=n.args.queue,Object.keys(o).forEach((e=>{const n=o[e];if(null===n.value)a.cookie=\"\".concat(encodeURIComponent(e),\"=; max-age=0; path=\").concat(encodeURIComponent(n.path));else{const o=new Date(n.expires_at);a.cookie=\"\".concat(encodeURIComponent(e),\"=\").concat(encodeURIComponent(n.value),\";\")+\" expires=\".concat(o.toUTCString(),\";\")+\" path=\".concat(encodeURIComponent(n.path),\";\")}}));const s=a.cookie;c===s||n.args.saveOnly||(t.a.setComponentValue(s),c=s)})),t.a.setComponentReady(),t.a.setFrameHeight(0)}},[[3,1,2]]]);","name":"static/js/main.694c9ed7.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__","targetDocument","window","parent","document","lastValue","events","addEventListener","RENDER_EVENT","event","data","detail","queue","args","Object","keys","forEach","name","spec","value","cookie","concat","encodeURIComponent","path","date","Date","expires_at","toUTCString","newValue","saveOnly","setComponentValue","setComponentReady","setFrameHeight"],"sources":["static/js/main.694c9ed7.chunk.js"],"mappings":"CAACA,KAAoC,8BAAIA,KAAoC,+BAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAE1F,EACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACD,IAAIG,EAAuDF,EAAoB,GACpG,MAA+CG,GAA5BC,OAAOC,QAAQD,QAAyCE,SAAS,IAAIC,EAAU,KAAoSL,EAAwE,EAAEM,OAAOC,iBAAiBP,EAAwE,EAAEQ,cAA3c,SAAkBC,GAAO,MAAMC,EAAKD,EAAME,OAAknB,IAAqBC,IAApnBF,EAAKG,KAAY,MAA0mBC,OAAOC,KAAKH,GAAOI,SAAQC,IAAO,MAAMC,EAAKN,EAAMK,GAAM,GAAgB,OAAbC,EAAKC,MAAalB,EAAemB,OAAO,GAAGC,OAAOC,mBAAmBL,GAAM,uBAAuBI,OAAOC,mBAAmBJ,EAAKK,WAAW,CAAC,MAAMC,EAAK,IAAIC,KAAKP,EAAKQ,YAAYzB,EAAemB,OAAO,GAAGC,OAAOC,mBAAmBL,GAAM,KAAKI,OAAOC,mBAAmBJ,EAAKC,OAAO,KAAK,YAAYE,OAAOG,EAAKG,cAAc,KAAK,SAASN,OAAOC,mBAAmBJ,EAAKK,MAAM,IAAK,KAA5hC,MAAMK,EAAS3B,EAAemB,OAAUf,IAAYuB,GAAWlB,EAAKG,KAAKgB,WAAU7B,EAAwE,EAAE8B,kBAAkBF,GAAUvB,EAAUuB,EAAU,IAAoM5B,EAAwE,EAAE+B,oBAAoB/B,EAAwE,EAAEgC,eAAe,EAEzvB,GAEL,CAAC,CAAC,EAAE,EAAE","ignoreList":[]},"input":"(this[\"webpackJsonpst_cookie_manager\"] = this[\"webpackJsonpst_cookie_manager\"] || []).push([[0],{\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\nconst targetWindow=window.parent||window;const targetDocument=targetWindow.document;let lastValue=null;function onRender(event){const data=event.detail;saveCookies(data.args[\"queue\"]);const newValue=targetDocument.cookie;if(lastValue!==newValue&&!data.args.saveOnly){streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setComponentValue(newValue);lastValue=newValue;}}streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].events.addEventListener(streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].RENDER_EVENT,onRender);streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setComponentReady();streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setFrameHeight(0);function saveCookies(queue){Object.keys(queue).forEach(name=>{const spec=queue[name];if(spec.value===null)targetDocument.cookie=\"\".concat(encodeURIComponent(name),\"=; max-age=0; path=\").concat(encodeURIComponent(spec.path));else{const date=new Date(spec.expires_at);targetDocument.cookie=\"\".concat(encodeURIComponent(name),\"=\").concat(encodeURIComponent(spec.value),\";\")+\" expires=\".concat(date.toUTCString(),\";\")+\" path=\".concat(encodeURIComponent(spec.path),\";\");}});}\n\n/***/ })\n\n},[[3,1,2]]]);","inputSourceMap":{"version":3,"sources":["D:/Download/streamlit-cookies-manager-0.2.0/st-cookies-manager-0.2.0/st_cookies_manager/src/index.ts"],"names":["targetWindow","window","parent","targetDocument","document","lastValue","onRender","event","data","detail","saveCookies","args","newValue","cookie","saveOnly","Streamlit","setComponentValue","events","addEventListener","RENDER_EVENT","setComponentReady","setFrameHeight","queue","Object","keys","forEach","name","spec","value","concat","encodeURIComponent","path","date","Date","expires_at","toUTCString"],"mappings":";;;;;;AAAA;AAAA;AAEA,KAAM,CAAAA,YAAoB,CAAGC,MAAM,CAACC,MAAM,EAAID,MAAM,CACpD,KAAM,CAAAE,cAAc,CAAGH,YAAY,CAACI,QAAQ,CAE5C,GAAI,CAAAC,SAAwB,CAAG,IAAI,CAenC,QAAS,CAAAC,QAAQA,CAACC,KAAY,CAAQ,CAClC,KAAM,CAAAC,IAAI,CAAID,KAAK,CAA6BE,MAAM,CAEtDC,WAAW,CAACF,IAAI,CAACG,IAAI,CAAC,OAAO,CAAC,CAAC,CAE/B,KAAM,CAAAC,QAAQ,CAAGT,cAAc,CAACU,MAAM,CACtC,GAAIR,SAAS,GAAKO,QAAQ,EAAI,CAACJ,IAAI,CAACG,IAAI,CAACG,QAAQ,CAAE,CAC/CC,yEAAS,CAACC,iBAAiB,CAACJ,QAAQ,CAAC,CACrCP,SAAS,CAAGO,QAAQ,CACxB,CACJ,CAEAG,yEAAS,CAACE,MAAM,CAACC,gBAAgB,CAACH,yEAAS,CAACI,YAAY,CAAEb,QAAQ,CAAC,CACnES,yEAAS,CAACK,iBAAiB,CAAC,CAAC,CAC7BL,yEAAS,CAACM,cAAc,CAAC,CAAC,CAAC,CAG3B,QAAS,CAAAX,WAAWA,CAACY,KAAoC,CAAE,CACvDC,MAAM,CAACC,IAAI,CAACF,KAAK,CAAC,CAACG,OAAO,CAAEC,IAAI,EAAK,CACjC,KAAM,CAAAC,IAAI,CAAGL,KAAK,CAACI,IAAI,CAAC,CACxB,GAAIC,IAAI,CAACC,KAAK,GAAK,IAAI,CACnBzB,cAAc,CAACU,MAAM,IAAAgB,MAAA,CAAMC,kBAAkB,CAACJ,IAAI,CAAC,wBAAAG,MAAA,CAAsBC,kBAAkB,CAACH,IAAI,CAACI,IAAI,CAAC,CAAE,KACvG,CACD,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACN,IAAI,CAACO,UAAU,CAAC,CACtC/B,cAAc,CAACU,MAAM,CACjB,GAAAgB,MAAA,CAAGC,kBAAkB,CAACJ,IAAI,CAAC,MAAAG,MAAA,CAAIC,kBAAkB,CAACH,IAAI,CAACC,KAAK,CAAC,kBAAAC,MAAA,CACjDG,IAAI,CAACG,WAAW,CAAC,CAAC,KAAG,UAAAN,MAAA,CACxBC,kBAAkB,CAACH,IAAI,CAACI,IAAI,CAAC,KACzC,CACL,CACJ,CAAC,CAAC,CACN,C","file":"x","sourcesContent":["import {RenderData, Streamlit} from \"streamlit-component-lib\"\n\nconst targetWindow: Window = window.parent || window\nconst targetDocument = targetWindow.document\n\nlet lastValue: string | null = null\n\ninterface AddCookieSpec {\n    value: string\n    expires_at: string\n    path: string\n}\n\ninterface DeleteCookieSpec {\n    value: null\n    path: string\n}\n\ntype CookieSpec = AddCookieSpec | DeleteCookieSpec\n\nfunction onRender(event: Event): void {\n    const data = (event as CustomEvent<RenderData>).detail\n\n    saveCookies(data.args[\"queue\"])\n\n    const newValue = targetDocument.cookie\n    if (lastValue !== newValue && !data.args.saveOnly) {\n        Streamlit.setComponentValue(newValue)\n        lastValue = newValue\n    }\n}\n\nStreamlit.events.addEventListener(Streamlit.RENDER_EVENT, onRender)\nStreamlit.setComponentReady()\nStreamlit.setFrameHeight(0)\n\n\nfunction saveCookies(queue: { [k in string]: CookieSpec }) {\n    Object.keys(queue).forEach((name) => {\n        const spec = queue[name]\n        if (spec.value === null)\n            targetDocument.cookie = `${encodeURIComponent(name)}=; max-age=0; path=${encodeURIComponent(spec.path)}`\n        else {\n            const date = new Date(spec.expires_at)\n            targetDocument.cookie = (\n                `${encodeURIComponent(name)}=${encodeURIComponent(spec.value)};` +\n                ` expires=${date.toUTCString()};` +\n                ` path=${encodeURIComponent(spec.path)};`\n            )\n        }\n    })\n}"]}}