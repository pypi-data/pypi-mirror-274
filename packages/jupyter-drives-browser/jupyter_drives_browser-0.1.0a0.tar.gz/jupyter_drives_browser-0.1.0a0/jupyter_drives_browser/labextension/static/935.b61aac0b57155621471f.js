"use strict";(self.webpackChunkjupyter_drives_browser=self.webpackChunkjupyter_drives_browser||[]).push([[935],{4935:(e,t,n)=>{n.r(t),n.d(t,{IS3Auth:()=>x,default:()=>T});var i=n(9626),s=n(5923),o=n(4670),a=n(2825),r=n(265),l=n(5256),c=n(4602),d=n(7861),h=n(8702),m=n(9191),p=n(3773);let u={name:"",path:"",last_modified:"",created:"",content:null,format:null,mimetype:"",size:0,writable:!0,type:""};class y{constructor(e){var t,n,i;this._name="",this._provider="",this._baseUrl="",this._region="",this._creationDate="",this._fileChanged=new c.Signal(this),this._isDisposed=!1,this._disposed=new c.Signal(this),this._registeredFileTypes={},this._serverSettings=d.ServerConnection.makeSettings(),this._s3Client=new m.S3Client(null!==(t=e.config)&&void 0!==t?t:{}),this._name=e.name,this._baseUrl=h.URLExt.join(null!==(i=null===(n=e.config)||void 0===n?void 0:n.endpoint)&&void 0!==i?i:"https://s3.amazonaws.com/",this._name),this._provider="S3",this.getRegion().then((e=>{this._region=e})),this._registeredFileTypes={}}get s3Client(){return this._s3Client}set s3Client(e){this._s3Client=e}get baseUrl(){return this._baseUrl}set baseUrl(e){this._baseUrl=e}get name(){return this._name}set name(e){this._name=e}get provider(){return this._provider}set provider(e){this._provider=e}get region(){return this._region}set region(e){this._region=e}get creationDate(){return this._creationDate}set creationDate(e){this._creationDate=e}get registeredFileTypes(){return this._registeredFileTypes}set registeredFileTypes(e){this._registeredFileTypes=e}get serverSettings(){return this._serverSettings}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}set fileBrowserModel(e){this._fileBrowserModel=e}get fileBrowserModel(){return this._fileBrowserModel}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),c.Signal.clearData(this))}async getDownloadUrl(e){const t=new m.GetObjectCommand({Bucket:this._name,Key:e,ResponseContentDisposition:"attachment",ResponseContentType:"application/octet-stream"});return await this._s3Client.send(t),await(0,p.getSignedUrl)(this._s3Client,t)}async get(e,t){if(e=e.replace(this._name+"/","")){const t=e.split("/"),n=t[t.length-1];if(-1===n.indexOf(".")){const t=[],i=new m.ListObjectsV2Command({Bucket:this._name,Prefix:n+"/"});let s=!0;for(;s;){const{Contents:o,IsTruncated:a,NextContinuationToken:r}=await this._s3Client.send(i);o&&o.forEach((i=>{if(i.Key!==n+"/"){const n=i.Key.split("/")[1],[s,o,a]=this.getFileType(i.Key.split(".")[1]);t.push({name:n,path:e+"/"+n,last_modified:i.LastModified.toISOString(),created:"",content:i.Key.split(".")[1]?null:[],format:a,mimetype:o,size:i.Size,writable:!0,type:s})}})),s&&(s=a),i.input.ContinuationToken=r}u={name:n,path:e+"/",last_modified:"",created:"",content:t,format:"json",mimetype:"",size:void 0,writable:!0,type:"directory"}}else{const t=new m.GetObjectCommand({Bucket:this._name,Key:e.replace(this._name+"/","")}),i=await this._s3Client.send(t);if(i){const t=i.LastModified.toISOString(),[s,o,a]=this.getFileType(n.split(".")[1]);let r;"base64"===a||"PDF"===s?(r=await i.Body.transformToByteArray(),r=btoa(r.reduce(((e,t)=>e+String.fromCharCode(t)),""))):r=await i.Body.transformToString(),u={name:n,path:e,last_modified:t,created:"",content:r,format:a,mimetype:o,size:i.ContentLength,writable:!0,type:s}}}}else{const e=[],t=new m.ListObjectsV2Command({Bucket:this._name});let n=!0;for(;n;){const{Contents:i,IsTruncated:s,NextContinuationToken:o}=await this._s3Client.send(t);i&&i.forEach((t=>{if(1===t.Key.split("/").length||""===t.Key.split("/")[1]){const[n,i,s]=this.getFileType(t.Key.split(".")[1]);e.push({name:t.Key.split(".")[1]?t.Key:t.Key.slice(0,-1),path:t.Key,last_modified:t.LastModified.toISOString(),created:"",content:t.Key.split(".")[1]?null:[],format:s,mimetype:i,size:t.Size,writable:!0,type:n})}})),n&&(n=s),t.input.ContinuationToken=o}u={name:this._name,path:this._name,last_modified:"",created:"",content:e,format:"json",mimetype:"",size:void 0,writable:!0,type:"directory"}}return d.Contents.validateContentsModel(u),u}async newUntitled(e={}){const t=[],n=new m.ListObjectsV2Command({Bucket:this._name});let i=!0;for(;i;){const{Contents:e,IsTruncated:s,NextContinuationToken:o}=await this._s3Client.send(n);e&&e.forEach((e=>{const[n,i,s]=this.getFileType(e.Key.split(".")[1]);t.push({name:e.Key,path:h.URLExt.join(this._name,e.Key),last_modified:e.LastModified.toISOString(),created:"",content:e.Key.split(".")[1]?null:[],format:s,mimetype:i,size:e.Size,writable:!0,type:n})})),i&&(i=s),n.input.ContinuationToken=o}const s={name:this._name,path:"",last_modified:"",created:"",content:t,format:"json",mimetype:"",size:void 0,writable:!0,type:"directory"};if(void 0!==e.type)if("directory"!==e.type){const t=this.incrementUntitledName(s,e);await this.s3Client.send(new m.PutObjectCommand({Bucket:this._name,Key:e.path?e.path+"/"+t:t,Body:""}));const[n,i,o]=this.getFileType(e.ext);u={name:t,path:e.path+"/"+t,last_modified:(new Date).toISOString(),created:(new Date).toISOString(),content:"",format:o,mimetype:i,size:0,writable:!0,type:n}}else{const t=this.incrementUntitledName(s,e);await this.s3Client.send(new m.PutObjectCommand({Bucket:this._name,Key:e.path?e.path+"/"+t+"/":t+"/",Body:""})),u={name:t,path:e.path+"/"+t,last_modified:(new Date).toISOString(),created:(new Date).toISOString(),content:[],format:"json",mimetype:"text/directory",size:void 0,writable:!0,type:e.type}}else console.warn("Type of new element is undefined");return this._fileBrowserModel.refresh(),d.Contents.validateContentsModel(u),this._fileChanged.emit({type:"new",oldValue:null,newValue:u}),u}incrementUntitledName(e,t){const n=e.content;let i="",s=0,o=0,a=0;return"notebook"===t.type&&(t.ext="ipynb"),n.forEach((e=>{void 0!==t.ext?e.name.includes("untitled")&&e.name.includes(".txt")?s+=1:e.name.includes("Untitled")&&e.name.includes(".ipynb")&&(a+=1):e.name.includes("Untitled Folder")&&(o+=1)})),"txt"===t.ext&&(i=0===s?"untitled."+t.ext:"untitled"+s+"."+t.ext),"ipynb"===t.ext?i=0===a?"Untitled."+t.ext:"Untitled"+a+"."+t.ext:"directory"===t.type&&(i=0===o?"Untitled Folder":"Untitled Folder "+o),i}async delete(e){const t=await this.s3Client.send(new m.ListObjectsV2Command({Bucket:this._name,Prefix:e}));let n=0;if((t.Contents.length>1||"/"===t.Contents[0].Key[t.Contents[0].Key.length-1])&&(e+="/",n=1),await this.s3Client.send(new m.DeleteObjectCommand({Bucket:this._name,Key:e})),n){const t=new m.ListObjectsV2Command({Bucket:this._name,Prefix:e});let n=!0;for(;n;){const{Contents:e,IsTruncated:i,NextContinuationToken:s}=await this._s3Client.send(t);e&&e.forEach((e=>{this.delete_file(e.Key)})),n&&(n=i),t.input.ContinuationToken=s}}this._fileBrowserModel.refresh(),this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:{path:void 0}})}async rename(e,t,n={}){var i;let s=t.indexOf("/")>=0?t.split("/")[t.split("/").length-1]:t;const o=await this.s3Client.send(new m.ListObjectsV2Command({Bucket:this._name,Prefix:e}));let a=!1;(o.Contents.length>1||"/"===o.Contents[0].Key[o.Contents[0].Key.length-1])&&(e+="/",t+="/",a=!0);const r=await this._s3Client.send(new m.GetObjectCommand({Bucket:this._name,Key:e}));await this._s3Client.send(new m.DeleteObjectCommand({Bucket:this._name,Key:e}));try{await this._s3Client.send(new m.HeadObjectCommand({Bucket:this._name,Key:t})),console.log("File name already exists!"),s=await this.incrementName(t,a,this._name),a&&(t=t.substring(0,t.length-1)),t=a?t.substring(0,t.lastIndexOf("/")+1)+s+"/":t.substring(0,t.lastIndexOf("/")+1)+s}catch(e){console.log("Name doesn't exist!")}const l=await(null===(i=r.Body)||void 0===i?void 0:i.transformToString());if(await this.s3Client.send(new m.PutObjectCommand({Bucket:this._name,Key:t,Body:l})),a){const n=new m.ListObjectsV2Command({Bucket:this._name,Prefix:e});let i=!0;for(;i;){const{Contents:s,IsTruncated:o,NextContinuationToken:a}=await this._s3Client.send(n);s&&s.forEach((n=>{const i=n.Key.split("/")[n.Key.split.length-1];this.copy_file(i,e,t,this._name)})),i&&(i=o),n.input.ContinuationToken=a}}const[c,h,p]=this.getFileType(s.split(".")[1]),u={name:s,path:t,last_modified:r.LastModified.toISOString(),created:"",content:a?[]:l,format:p,mimetype:h,size:r.ContentLength,writable:!0,type:c};return this._fileBrowserModel.refresh(),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:u}),d.Contents.validateContentsModel(u),u}async incrementName(e,t,n){let i=0,s="",o="";t?(e=e.substring(0,e.length-1),o=e.split("/")[e.split("/").length-1]):(o=e.split("/")[e.split("/").length-1],s=o.split(".")[o.split(".").length-1],o=o.split(".")[o.split(".").length-2]);const a=new m.ListObjectsV2Command({Bucket:n,Prefix:e.substring(0,e.lastIndexOf("/"))});let r=!0;for(;r;){const{Contents:e,IsTruncated:t,NextContinuationToken:n}=await this._s3Client.send(a);e&&e.forEach((e=>{"/"===e.Key[e.Key.length-1]&&(e.Key=e.Key.substring(0,e.Key.length-1)),e.Key.substring(e.Key.lastIndexOf("/")+1,e.Key.lastIndexOf("/")+1+o.length).includes(o)&&(i+=1)})),r&&(r=t),a.input.ContinuationToken=n}let l=i?o+i:o;return l=t?l+"/":l+"."+s,l}async save(e,t={}){const n=-1===e.indexOf("/")?e:e.split("/")[e.split.length-1],[i,s,o]=this.getFileType(n.split(".")[1]);let a;if("json"===t.format)a=JSON.stringify(null==t?void 0:t.content,null,2);else if("base64"!==t.format||"base64"!==o&&"PDF"!==i)a=null==t?void 0:t.content;else{const e=atob(t.content),n=[];for(let t=0;t<e.length;t+=512){const i=e.slice(t,t+512),s=new Array(i.length);for(let e=0;e<i.length;e++)s[e]=i.charCodeAt(e);const o=new Uint8Array(s);n.push(o)}a=new Blob(n,{type:s})}return await this._s3Client.send(new m.PutObjectCommand({Bucket:this._name,Key:e,Body:a,CacheControl:"no-cache"})),u={name:n,path:e,last_modified:(new Date).toISOString(),created:"",content:a,format:o,mimetype:s,size:"string"==typeof a?a.length:a.size,writable:!0,type:i},this._fileBrowserModel.refresh(),this._fileChanged.emit({type:"save",oldValue:null,newValue:u}),d.Contents.validateContentsModel(u),u}async incrementCopyName(e,t,n){const i=e.split("/")[e.split("/").length-1],s=t?i+"-Copy":i.split(".")[0]+"-Copy."+i.split(".")[1],o=t?e.substring(0,e.lastIndexOf("/")+1)+s+"/":e.substring(0,e.lastIndexOf("/")+1)+s;return await this.incrementName(o,t,n)}async copy(e,t,n={}){const i=await this.s3Client.send(new m.ListObjectsV2Command({Bucket:this._name,Prefix:e}));let s=!1;(i.Contents.length>1||"/"===i.Contents[0].Key[i.Contents[0].Key.length-1])&&(s=!0);const o=await this.incrementCopyName(e,s,this._name);if(e=s?e+"/":e,await this._s3Client.send(new m.CopyObjectCommand({Bucket:this._name,CopySource:this._name+"/"+e,Key:""!==t?t+"/"+o:o})),s){const t=new m.ListObjectsV2Command({Bucket:this._name,Prefix:e});let n=!0;for(;n;){const{Contents:i,IsTruncated:s,NextContinuationToken:a}=await this._s3Client.send(t);i&&i.forEach((t=>{const n=t.Key.split("/")[t.Key.split.length-1];this.copy_file(n,e,o,this._name)})),n&&(n=s),t.input.ContinuationToken=a}}const a=await this._s3Client.send(new m.GetObjectCommand({Bucket:this._name,Key:""!==t?t+"/"+o:o})),[r,l,c]=this.getFileType(o.split(".")[1]);return u={name:o,path:t+"/"+o,last_modified:a.LastModified.toISOString(),created:(new Date).toISOString(),content:await a.Body.transformToString(),format:c,mimetype:l,size:a.ContentLength,writable:!0,type:r},this._fileBrowserModel.refresh(),this._fileChanged.emit({type:"new",oldValue:null,newValue:u}),d.Contents.validateContentsModel(u),u}async copyToAnotherBucket(e,t,n,i={}){e="/"===e[e.length-1]?e.substring(0,e.length-1):e;const s=await this.s3Client.send(new m.ListObjectsV2Command({Bucket:this._name,Prefix:e}));let o=!1;(s.Contents.length>1||"/"===s.Contents[0].Key[s.Contents[0].Key.length-1])&&(o=!0);const a=await this.incrementCopyName(e,o,n);if(e=o?e+"/":e,await this._s3Client.send(new m.CopyObjectCommand({Bucket:n,CopySource:this._name+"/"+e,Key:""!==t?t+"/"+a:a})),o){const t=new m.ListObjectsV2Command({Bucket:this._name,Prefix:e});let i=!0;for(;i;){const{Contents:s,IsTruncated:o,NextContinuationToken:r}=await this._s3Client.send(t);s&&s.forEach((t=>{const i=t.Key.split("/")[t.Key.split.length-1];this.copy_file(i,e,a,n)})),i&&(i=o),t.input.ContinuationToken=r}}const r=await this._s3Client.send(new m.GetObjectCommand({Bucket:n,Key:""!==t?t+"/"+a:a})),[l,c,h]=this.getFileType(a.split(".")[1]);return u={name:a,path:t+"/"+a,last_modified:r.LastModified.toISOString(),created:(new Date).toISOString(),content:await r.Body.transformToString(),format:h,mimetype:c,size:r.ContentLength,writable:!0,type:l},this._fileChanged.emit({type:"new",oldValue:null,newValue:u}),d.Contents.validateContentsModel(u),u}async createCheckpoint(e){return Promise.resolve({id:"",last_modified:""})}listCheckpoints(e){return Promise.resolve([])}restoreCheckpoint(e,t){return Promise.reject("Repository is read only")}deleteCheckpoint(e,t){return Promise.reject("Read only")}async getRegion(){var e;const t=await this._s3Client.send(new m.GetBucketLocationCommand({Bucket:this._name}));return null!==(e=null==t?void 0:t.LocationConstraint)&&void 0!==e?e:""}async copy_file(e,t,n,i){await this._s3Client.send(new m.CopyObjectCommand({Bucket:i,CopySource:this._name+"/"+t+e,Key:n+e}))}async delete_file(e){await this.s3Client.send(new m.DeleteObjectCommand({Bucket:this._name,Key:e}))}getRegisteredFileTypes(e){const t=e.docRegistry.fileTypes();for(const e of t)0===e.extensions.length&&(this._registeredFileTypes[""]={fileType:"directory",fileFormat:"json",fileMimeTypes:["text/directory"]}),e.extensions.forEach((t=>{t=t.split(".")[1],this._registeredFileTypes[t]||(this._registeredFileTypes[t]={fileType:e.name,fileMimeTypes:[...e.mimeTypes],fileFormat:e.fileFormat?e.fileFormat:""})}))}getFileType(e){let t="text",n="text/plain",i="text";return e=null!=e?e:"",this._registeredFileTypes[e]&&(t=this._registeredFileTypes[e].fileType,n=this._registeredFileTypes[e].fileMimeTypes[0],i=this._registeredFileTypes[e].fileFormat),"ipynb"===e&&(i="text"),[t,n,i]}}var f=n(1527);const w=new f.LabIcon({name:"@jupyter/jupyter-drives-browser:drive",svgstr:'<svg \n    xmlns="http://www.w3.org/2000/svg"\n    height="34" viewBox="0 -960 960 960"\n    width="34"\n    >\n    <path d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q25-92 100-149t170-57q117 0 198.5 81.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H260Z"\n    fill = "#616161"\n    />\n</svg>'});new f.LabIcon({name:"@jupyter/jupyter-drives-browser:new-drive",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" \nxmlns:xlink="http://www.w3.org/1999/xlink" \nversion="1.1" \nx="0px" \ny="0px" \nviewBox="0 0 95 86.5" \n height="54" \n width="54"\nstyle="enable-background:new 0 0 98 98;" \nxml:space="preserve"\n>\n<path \nclass="st0" \nd="M90.87,42.866c0.003,7.796-6.343,14.141-14.141,14.141H71.07c-0.027-0.085-0.063-0.167-0.09-0.252  c-0.127-0.389-0.265-0.772-0.411-1.152c-0.077-0.199-0.153-0.399-0.235-0.596c-0.163-0.387-0.335-0.769-0.518-1.145  c-0.129-0.265-0.265-0.525-0.403-0.785c-0.078-0.147-0.159-0.291-0.241-0.436c-0.292-0.523-0.604-1.032-0.934-1.528  c-0.032-0.049-0.064-0.099-0.097-0.147c-0.612-0.903-1.284-1.755-2.012-2.557c-0.015-0.017-0.032-0.035-0.047-0.052  c-0.735-0.806-1.522-1.558-2.362-2.251c-0.044-0.037-0.09-0.072-0.134-0.107c-0.456-0.37-0.925-0.723-1.408-1.058  c-0.166-0.115-0.332-0.228-0.5-0.339c-0.225-0.148-0.451-0.297-0.681-0.436c-0.362-0.221-0.732-0.43-1.107-0.63  c-0.182-0.097-0.366-0.189-0.551-0.283c-0.366-0.184-0.737-0.359-1.114-0.524c-0.118-0.051-0.234-0.104-0.353-0.153  c-0.444-0.185-0.897-0.353-1.355-0.511c-0.122-0.042-0.245-0.084-0.368-0.124c-0.501-0.164-1.009-0.312-1.525-0.442  c-0.078-0.02-0.156-0.036-0.234-0.054c-0.494-0.118-0.994-0.221-1.499-0.306c-0.072-0.012-0.144-0.027-0.217-0.039  c-0.54-0.087-1.088-0.151-1.64-0.2c-0.109-0.01-0.218-0.017-0.329-0.025c-0.563-0.041-1.129-0.069-1.703-0.069  c-0.574,0-1.14,0.028-1.703,0.069c-0.109,0.008-0.22,0.015-0.328,0.025c-0.552,0.048-1.1,0.114-1.641,0.2  c-0.072,0.012-0.143,0.026-0.216,0.039c-0.506,0.087-1.007,0.188-1.502,0.307c-0.077,0.018-0.155,0.035-0.233,0.054  c-0.516,0.13-1.025,0.278-1.528,0.442c-0.122,0.04-0.243,0.082-0.366,0.124c-0.46,0.158-0.915,0.327-1.361,0.514  c-0.115,0.048-0.227,0.099-0.341,0.148c-0.38,0.166-0.755,0.344-1.124,0.529c-0.183,0.091-0.365,0.183-0.545,0.279  c-0.377,0.201-0.748,0.411-1.112,0.634c-0.228,0.139-0.449,0.286-0.672,0.431c-0.173,0.114-0.343,0.23-0.513,0.347  c-0.473,0.328-0.932,0.674-1.38,1.036c-0.053,0.043-0.107,0.084-0.16,0.128c-0.276,0.228-0.547,0.463-0.812,0.704  c-0.005,0.005-0.011,0.011-0.017,0.016c-0.529,0.482-1.035,0.989-1.52,1.519c-0.02,0.023-0.041,0.045-0.062,0.068  c-0.723,0.797-1.391,1.646-2,2.542c-0.039,0.057-0.076,0.116-0.115,0.173c-0.322,0.485-0.627,0.982-0.912,1.493  c-0.087,0.153-0.172,0.307-0.254,0.461c-0.136,0.254-0.269,0.509-0.395,0.77c-0.184,0.38-0.358,0.766-0.523,1.157  c-0.08,0.192-0.154,0.385-0.228,0.578c-0.151,0.389-0.292,0.783-0.422,1.181c-0.026,0.079-0.059,0.154-0.084,0.233l-5.659,0  c-7.799,0-14.143-6.345-14.143-14.144c0-7.799,6.345-14.143,14.143-14.143l3.577,0l0.17-1.249c1.055-7.77,7.773-13.63,15.626-13.63  c5.271,0,10.172,2.618,13.113,7.004l0.857,1.277l1.222-0.935c1.723-1.321,3.786-2.019,5.963-2.019c4.81,0,8.981,3.579,9.703,8.327  l0.186,1.227l5.036,0C84.526,28.723,90.87,35.067,90.87,42.866z M68.537,58.654c0.454,1.68,0.701,3.446,0.701,5.269  c-0.001,11.159-9.078,20.235-20.235,20.235c-11.156,0-20.233-9.076-20.233-20.233c0-1.829,0.248-3.599,0.705-5.286  c0.108-0.402,0.232-0.796,0.363-1.185c0.049-0.143,0.094-0.287,0.145-0.429c0.137-0.381,0.291-0.755,0.45-1.124  c0.09-0.206,0.182-0.41,0.277-0.613c0.103-0.218,0.213-0.431,0.322-0.644c0.184-0.355,0.377-0.704,0.58-1.048  c0.063-0.106,0.128-0.211,0.193-0.316c0.301-0.484,0.619-0.955,0.958-1.411c0.013-0.018,0.026-0.037,0.04-0.054  c0.57-0.76,1.192-1.478,1.86-2.15c0.035-0.037,0.074-0.073,0.109-0.109c0.387-0.384,0.793-0.751,1.21-1.104  c0.079-0.067,0.158-0.134,0.238-0.199c0.224-0.183,0.451-0.363,0.682-0.536c0.268-0.199,0.539-0.393,0.816-0.579  c0.193-0.13,0.391-0.253,0.588-0.378c0.24-0.149,0.483-0.295,0.729-0.433c0.203-0.116,0.408-0.228,0.616-0.337  c0.312-0.163,0.627-0.318,0.948-0.464c0.131-0.06,0.261-0.121,0.393-0.179c0.413-0.178,0.831-0.343,1.257-0.494  c0.103-0.037,0.207-0.07,0.31-0.105c0.463-0.156,0.93-0.301,1.406-0.422c0.007-0.002,0.013-0.003,0.02-0.004  c0.485-0.124,0.979-0.225,1.477-0.314c0.08-0.014,0.159-0.029,0.238-0.042c0.488-0.08,0.982-0.143,1.48-0.187  c0.087-0.008,0.174-0.013,0.262-0.02c0.515-0.039,1.033-0.065,1.557-0.065c0.524,0,1.041,0.026,1.557,0.065  c0.088,0.007,0.174,0.012,0.262,0.02c0.498,0.044,0.992,0.107,1.48,0.187c0.08,0.013,0.159,0.029,0.239,0.043  c0.497,0.088,0.989,0.19,1.474,0.313c0.008,0.002,0.015,0.003,0.023,0.005c0.475,0.122,0.942,0.268,1.404,0.422  c0.104,0.035,0.209,0.069,0.313,0.106c0.425,0.151,0.842,0.315,1.255,0.493c0.134,0.057,0.265,0.119,0.399,0.18  c0.318,0.145,0.631,0.3,0.94,0.46c0.212,0.11,0.421,0.225,0.628,0.343c0.243,0.137,0.482,0.28,0.719,0.428  c0.199,0.124,0.399,0.249,0.593,0.381c0.253,0.17,0.501,0.349,0.746,0.53c0.256,0.19,0.507,0.386,0.754,0.587  c0.077,0.063,0.153,0.128,0.229,0.191c0.422,0.355,0.83,0.726,1.222,1.114c0.034,0.034,0.068,0.066,0.102,0.1  c0.67,0.673,1.294,1.393,1.864,2.154c0.012,0.015,0.023,0.032,0.033,0.047c0.341,0.458,0.661,0.931,0.963,1.417  c0.065,0.105,0.13,0.21,0.193,0.317c0.203,0.34,0.394,0.687,0.577,1.041c0.112,0.217,0.223,0.432,0.327,0.654  c0.095,0.2,0.186,0.404,0.275,0.607c0.161,0.372,0.314,0.748,0.454,1.132c0.05,0.138,0.094,0.277,0.141,0.416  C68.301,57.843,68.427,58.245,68.537,58.654z M60.696,63.925c0-0.798-0.647-1.443-1.443-1.443l-8.805,0.001v-8.807  c0-0.798-0.647-1.443-1.443-1.443c-0.797,0-1.443,0.646-1.443,1.443v8.807h-8.807c-0.798,0-1.443,0.645-1.443,1.443  c0,0.798,0.646,1.443,1.443,1.443h8.807v8.806c0,0.798,0.647,1.443,1.443,1.443c0.797,0,1.443-0.646,1.443-1.443v-8.806h8.805  C60.051,65.369,60.696,64.722,60.696,63.925z"\nfill = "#616161"\n/>\n\x3c!-- <text x="0" y="113" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Good Father</text><text x="0" y="118" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</svg>'});var g,C=n(7262);!function(e){e.openPath="filebrowser:open-path",e.openChangeDrive="drives:open-change-drive-dialog",e.copyToAnotherBucket="drives:copy-to-another-bucket"}(g||(g={}));const _="DriveBrowser",b="jp-FileDialog",v="jp-new-drive-title",x=new C.Token("jupyter-drives-browser:auth-file-browser"),T=[{id:"jupyter-drives-browser:auth-file-browser",description:"The default file browser auth/credentials provider",provides:x,activate:()=>({factory:async()=>({bucket:"jupyter-drives-test-bucket-1",config:{forcePathStyle:!0,endpoint:"https://example.com/s3",region:"eu-west-1",credentials:{accessKeyId:"abcdefghijklmnopqrstuvwxyz",secretAccessKey:"SECRET123456789abcdefghijklmnopqrstuvwxyz"}}})})},{id:"jupyter-drives-browser:default-file-browser",description:"The default file browser factory provider",provides:o.IDefaultFileBrowser,requires:[o.IFileBrowserFactory,x],optional:[i.IRouter,i.JupyterFrontEnd.ITreeResolver,i.ILabShell],activate:async(e,t,n,i,s,o)=>{const{commands:a}=e,r=await n.factory(),l=new y({name:r.bucket,config:r.config});e.serviceManager.contents.addDrive(l),l.getRegisteredFileTypes(e);const c=t.createFileBrowser("drivebrowser",{auto:!1,restore:!1,driveName:l.name});return l.fileBrowserModel=c.model,k.addCommands(e,l,t),k.restoreBrowser(c,a,i,s,o),c}},{id:"jupyter-drives-browser:file-browser-toolbar",description:"The toolbar for the drives file browser",requires:[o.IDefaultFileBrowser,s.IToolbarWidgetRegistry,a.ISettingRegistry,r.ITranslator,o.IFileBrowserFactory],autoStart:!0,activate:async(e,t,n,i,a)=>{n.addFactory(_,"uploaderTest",(e=>new o.Uploader({model:e.model,translator:a}))),n.addFactory(_,"fileNameSearcherTest",(e=>{const t=(0,f.FilenameSearcher)({updateFilter:(t,n)=>{e.model.setFilter((e=>t(e.name.toLowerCase())))},useFuzzyFilter:!0,placeholder:"Filter files by namesss",forceRefresh:!0});return t.addClass("jp-DriveBrowser-filterBox"),t})),(0,s.setToolbar)(t,(0,s.createToolbarFactory)(n,i,_,"jupyter-drives-browser:file-browser-toolbar",a))}}];var k;!function(e){const t=e=>{const t=document.createElement("div"),n=document.createElement("label");n.textContent="Current Drive";const i=document.createElement("span");i.textContent=e;const s=document.createElement("label");s.textContent="Switch to another Drive",s.className=v;const o=document.createElement("input");return t.appendChild(n),t.appendChild(i),t.appendChild(s),t.appendChild(o),t},n=()=>{const e=document.createElement("div"),t=document.createElement("label");t.textContent="Copy to another Bucket",t.className=v;const n=document.createElement("input"),i=document.createElement("label");i.textContent="Location within the Bucket",i.className=v;const s=document.createElement("input");return e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(s),e};class i extends l.Widget{constructor(){super({node:n()}),this.onAfterAttach()}onAfterAttach(){this.addClass(b);const e=this.inputNameNode.value;this.inputNameNode.setSelectionRange(0,e.length);const t=this.inputLocationNode.value;this.inputLocationNode.setSelectionRange(0,t.length)}get inputNameNode(){return this.node.getElementsByTagName("input")[0]}get inputLocationNode(){return this.node.getElementsByTagName("input")[1]}getValue(){return[this.inputNameNode.value,this.inputLocationNode.value]}}e.CopyToAnotherBucket=i;class o extends l.Widget{constructor(e){super({node:t(e)}),this.onAfterAttach()}onAfterAttach(){this.addClass(b);const e=this.inputNode.value;this.inputNode.setSelectionRange(0,e.length)}get inputNode(){return this.node.getElementsByTagName("input")[0]}getValue(){return this.inputNode.value}}e.SwitchDriveHandler=o,e.addCommands=function(t,n,i){const{tracker:o}=i;t.commands.addCommand(g.openChangeDrive,{execute:async()=>(0,s.showDialog)({body:new e.SwitchDriveHandler(n.name),focusNodeSelector:"input",buttons:[s.Dialog.okButton({label:"Switch Drive",ariaLabel:"Switch to another Drive"})]}).then((e=>{e.value&&(n.name=e.value,t.serviceManager.contents.addDrive(n))})),icon:w.bindprops({stylesheet:"menuItem"})}),t.commands.addCommand(g.copyToAnotherBucket,{execute:async()=>(0,s.showDialog)({body:new e.CopyToAnotherBucket,focusNodeSelector:"input",buttons:[s.Dialog.okButton({label:"Copy",ariaLabel:"Copy to another Bucket"})]}).then((e=>{const t=o.currentWidget;if(t){const i=t.selectedItems().next().value.path.split(":")[1];e.value&&n.copyToAnotherBucket(i,e.value[1],e.value[0])}})),icon:w.bindprops({stylesheet:"menuItem"}),label:"Copy to another Bucket"}),t.contextMenu.addItem({command:g.copyToAnotherBucket,selector:".jp-SidePanel .jp-DirListing-content .jp-DirListing-item[data-isDir]",rank:10})},e.restoreBrowser=async function(e,t,n,i,s){const o="jp-mod-restoring";if(e.addClass(o),!n)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(o);const a=async()=>{n.routed.disconnect(a);const r=await(null==i?void 0:i.paths);(null==r?void 0:r.file)||(null==r?void 0:r.browser)?(await e.model.restore(e.id,!1),r.file&&await t.execute(g.openPath,{path:r.file,dontShowBrowser:!0}),r.browser&&await t.execute(g.openPath,{path:r.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(o),(null==s?void 0:s.isEmpty("main"))&&t.execute("launcher:create")};n.routed.connect(a)}}(k||(k={}))}}]);