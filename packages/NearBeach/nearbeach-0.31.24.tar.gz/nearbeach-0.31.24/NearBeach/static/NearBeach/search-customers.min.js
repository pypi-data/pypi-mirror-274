"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7735],{6262:(e,t)=>{t.A=(e,t)=>{const s=e.__vccOpts||e;for(const[e,r]of t)s[e]=r;return s}},570:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var r=s(641),o=s(3751);const a={class:"card"},l={class:"card-body"},c=(0,r.Lk)("h1",null,"Search Customers",-1),i=(0,r.Lk)("br",null,null,-1),n={class:"form-group"},u=(0,r.Lk)("label",null,"Search:",-1),m=(0,r.Lk)("hr",null,null,-1),h={key:0,class:"alert alert-warning"},d=(0,r.Lk)("hr",null,null,-1),p={class:"row submit-row"},f={class:"col-md-12"},A=["href"];var g=s(33);const k=["src"],L={class:"customer-name"},v=["href"],S={class:"customer-email"},U=["href"];var C=s(2243),y=s(2321),I=s(2124);const b={name:"ListCustomers",components:{Icon:y.In},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,I.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[C.A],methods:{getProfilePicture(e){const t=e.fields.customer_profile_picture;return""===t||null===t?`${this.staticUrl}NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${t}`}}};var w=s(6262);const R={name:"SearchCustomers",components:{ListCustomers:(0,w.A)(b,[["render",function(e,t,s,o,a,l){const c=(0,r.g2)("Icon");return(0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.customerResults,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.pk,class:"customer-details"},[(0,r.Lk)("img",{src:l.getProfilePicture(t),alt:"Stakeholder Logo",class:"customer-image"},null,8,k),(0,r.Lk)("div",L,[(0,r.Lk)("a",{href:`${e.rootUrl}customer_information/${t.pk}/`},(0,g.toDisplayString)(t.fields.customer_first_name)+" "+(0,g.toDisplayString)(t.fields.customer_last_name),9,v)]),(0,r.Lk)("div",S,[(0,r.bF)(c,{icon:e.icons.mailIcon},null,8,["icon"]),(0,r.eW)(" Email: "),(0,r.Lk)("a",{href:`mailto:${t.fields.customer_email}`},(0,g.toDisplayString)(t.fields.customer_email),9,U)])])))),128)}]])},props:{customerResults:{type:Array,default:()=>[]},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"}},data(){return{localCustomerResults:this.customerResults,searchModel:"",searchTimeout:""}},methods:{getSearchResults(){const e=new FormData;e.set("search",this.searchModel),this.axios.post(`${this.rootUrl}search/customer/data/`,e).then((e=>{this.localCustomerResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error getting search results",message:"Sorry, we could not retrieve your search results",extra_classes:"bg-warning text-dark",delay:0})}))}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchModel.length>=3&&(this.searchTimeout=setTimeout((()=>{this.getSearchResults()}),500))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},T=(0,w.A)(R,[["render",function(e,t,s,g,k,L){const v=(0,r.g2)("list-customers");return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",l,[(0,r.Q3)(" HEADING "),c,i,(0,r.Q3)(" SEARCH FIELD "),(0,r.Lk)("div",n,[u,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>k.searchModel=e)},null,512),[[o.vModelText,k.searchModel]])]),(0,r.Q3)(" LIST OUT RESULTS "),m,(0,r.bF)(v,{"customer-results":k.localCustomerResults},null,8,["customer-results"]),(0,r.Q3)(" SHOW IF NO RESULTS "),0==k.localCustomerResults.length?((0,r.uX)(),(0,r.CE)("div",h," There are no customers with the search parameters used. Please try again. ")):(0,r.Q3)("v-if",!0),d,(0,r.Lk)("div",p,[(0,r.Lk)("div",f,[(0,r.Lk)("a",{href:`${s.rootUrl}new_customer/`,class:"btn btn-primary save-changes"}," Add new Customer ",8,A)])])])])}]])},2243:(e,t,s)=>{s.d(t,{A:()=>R});var r=s(8998),o=s(102),a=s(9394),l=s(2438),c=s(9605),i=s(3438),n=s(5666),u=s(6375),m=s(1647),h=s(7066),d=s(4397),p=s(4603),f=s(7432),A=s(1758),g=s(8959),k=s(9587),L=s(9675),v=s(386),S=s(6120),U=s(8086),C=s(5617),y=s(6325),I=s(6500),b=s(5707),w=s(1511);const R={data:()=>({icons:{arrowUp:r.A,bugIcon:o.A,bxBriefcase:a.A,cardChecklist:l.A,clipboardIcon:c.A,documentPdf:i.A,documentText:n.A,folderIcon:u.A,groupPresentation:m.A,imageIcon:h.A,infoCircle:d.A,linkIcon:p.A,linkIcon2:f.A,linkOut:A.A,mailIcon:g.A,microsoftExcel:k.A,microsoftPowerpoint:L.A,microsoftWord:v.A,noteAdd:S.A,objectStorage:U.A,passwordIcon:C.A,trashCan:y.A,userIcon:I.A,usersIcon:b.A,xCircle:w.A}})}}}]);